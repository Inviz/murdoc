<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Murdoc</title>
    <style>
      html, body {
        min-height: 100%; }
      
      p, h1, h2, h3, ol, li, ol, ul, dt, dd, dl, body, html {
        padding: 0;
        margin: 0; }
      
      body {
        width: 45%;
        padding-left: 2.5%;
        padding-right: 2.5%;
        background: #7ba32d;
        font-family: Helvetica; }
        body:after {
          content: ".";
          font-size: 0.01em;
          line-height: 0.01em;
          display: block;
          clear: both; }
      
      body > * {
        padding-left: 6%;
        padding-right: 6%; }
      
      html {
        background: #094201; }
      
      header {
        background: rgba(255, 255, 255, 0.1);
        padding-top: 1em;
        display: block; }
        header dl {
          margin-top: 1.125em;
          font-size: 0.75em; }
          header dl dt {
            width: 5em;
            font-weight: bold; }
      
      p, dl, li {
        color: #c4eeff;
        font-weight: normal; }
      
      a {
        color: #a41717; }
      
      p {
        margin-top: 1.5em; }
      
      h1 {
        font-size: 2em; }
      
      h2 {
        font-size: 1em;
        line-height: 2em; }
      
      h1, h2, h3 {
        color: #a41717; }
      
      ol, li {
        margin-left: 1em; }
      
      body > div.paragraph, body > h1, body > h2 {
        clear: both; }
      
      header {
        padding-bottom: 1em;
        overflow: hidden; }
      
      pre {
        margin-top: 0;
      }
      
      dl {
        clear: left; }
        dl dt, dl dd {
          float: left; }
        dl dt {
          clear: left; }
        dl dd {
          margin-left: 1em; }
      
      section {
          clear: both;
      }
      
      figure {
        display: block;
        float: right;
        margin-right: -112.5%;
        width: 95%;
        clear: right;
        padding: 2.5em 5% 3em; }
        figure > ol {
          width: 7.5%;
          text-align: right;
          float: left;
          font-size: 0.8em;
          color: #7ba32d;
          -webkit-border-radius: 0.2em;
          background: rgba(255, 255, 255, 0.1);
          border: 1px solid rgba(0, 0, 0, 0.3);
          list-style: none;
          margin-left: -11.25%; }
          figure > ol li {
            margin: 0; }
        figure pre {
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(0, 0, 0, 0.3);
            border-left: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        figure > code, figure > ol {
          font-size: 1em;
          font-family: monospace; }
        figure ~ figure {
          padding-top: 1.5em; }
      
      body .hll {
        background-color: #ffffcc; }
      body .c {
        color: #408080;
        font-style: italic; }
      body .err {
        border: 1px solid red; }
      body .k {
        color: #954121; }
      body .o {
        color: #666666; }
      body .cm {
        color: #408080;
        font-style: italic; }
      body .cp {
        color: #bc7a00; }
      body .c1, body .cs {
        color: #408080;
        font-style: italic; }
      body .gd {
        color: #a00000; }
      body .ge {
        font-style: italic; }
      body .gr {
        color: red; }
      body .gh {
        color: navy;
        font-weight: bold; }
      body .gi {
        color: #00a000; }
      body .go {
        color: gray; }
      body .gp {
        color: navy;
        font-weight: bold; }
      body .gs {
        font-weight: bold; }
      body .gu {
        color: purple;
        font-weight: bold; }
      body .gt {
        color: #0040d0; }
      body .kc {
        color: #954121; }
      body .kd, body .kn {
        color: #954121;
        font-weight: bold; }
      body .kp {
        color: #954121; }
      body .kr {
        color: #954121;
        font-weight: bold; }
      body .kt {
        color: #b00040; }
      body .m {
        color: #666666; }
      body .s {
        color: #219161; }
      body .na {
        color: #7d9029; }
      body .nb {
        color: #954121; }
      body .nc {
        color: blue;
        font-weight: bold; }
      body .no {
        color: #880000; }
      body .nd {
        color: #aa22ff; }
      body .ni {
        color: #999999;
        font-weight: bold; }
      body .ne {
        color: #d2413a;
        font-weight: bold; }
      body .nf {
        color: blue; }
      body .nl {
        color: #a0a000; }
      body .nn {
        color: blue;
        font-weight: bold; }
      body .nt {
        color: #954121;
        font-weight: bold; }
      body .nv {
        color: #19469d; }
      body .ow {
        color: #aa22ff;
        font-weight: bold; }
      body .w {
        color: #bbbbbb; }
      body .mf, body .mh, body .mi, body .mo {
        color: #666666; }
      body .sb, body .sc {
        color: #219161; }
      body .sd {
        color: #219161;
        font-style: italic; }
      body .s2 {
        color: #219161; }
      body .se {
        color: #bb6622;
        font-weight: bold; }
      body .sh {
        color: #219161; }
      body .si {
        color: #bb6688;
        font-weight: bold; }
      body .sx {
        color: #954121; }
      body .sr {
        color: #bb6688; }
      body .s1 {
        color: #219161; }
      body .ss {
        color: #19469d; }
      body .bp {
        color: #954121; }
      body .vc, body .vg, body .vi {
        color: #19469d; }
      body .il {
        color: #666666; }
    </style>
  </head>
  <body>
    <section>
      <p>Script: Core.js
      MooTools &ndash; My Object Oriented JavaScript Tools.</p>
      
      <p>License:
      MIT-style license.</p>
      
      <p>Copyright:
      Copyright &copy; 2006-2007 <a href="http://mad4milk.net/">Valerio Proietti</a>.</p>
      
      <p>Code &amp; Documentation:
      <a href="http://mootools.net/developers/">The MooTools production team</a>.</p>
      
      <p>Inspiration:
      &ndash; Class implementation inspired by <a href="http://dean.edwards.name/weblog/2006/03/base/">Base.js</a> Copyright &copy; 2006 Dean Edwards, <a href="http://opensource.org/licenses/lgpl-license.php">GNU Lesser General Public License</a>
      &ndash; Some functionality inspired by <a href="http://prototypejs.org">Prototype.js</a> Copyright &copy; 2005-2007 Sam Stephenson, <a href="http://opensource.org/licenses/mit-license.php">MIT License</a></p>
    </section>
    <figure>
      <ol>
        <li>19</li>
        <li>20</li>
        <li>21</li>
        <li>22</li>
        <li>23</li>
        <li>24</li>
        <li>25</li>
        <li>26</li>
        <li>27</li>
        <li>28</li>
        <li>29</li>
        <li>30</li>
        <li>31</li>
        <li>32</li>
        <li>33</li>
        <li>34</li>
        <li>35</li>
        <li>36</li>
        <li>37</li>
        <li>38</li>
        <li>39</li>
        <li>40</li>
        <li>41</li>
        <li>42</li>
        <li>43</li>
        <li>44</li>
        <li>45</li>
        <li>46</li>
        <li>47</li>
        <li>48</li>
        <li>49</li>
        <li>50</li>
        <li>51</li>
        <li>52</li>
        <li>53</li>
        <li>54</li>
        <li>55</li>
        <li>56</li>
        <li>57</li>
        <li>58</li>
        <li>59</li>
        <li>60</li>
        <li>61</li>
        <li>62</li>
        <li>63</li>
        <li>64</li>
        <li>65</li>
        <li>66</li>
        <li>67</li>
        <li>68</li>
        <li>69</li>
        <li>70</li>
        <li>71</li>
        <li>72</li>
        <li>73</li>
        <li>74</li>
        <li>75</li>
        <li>76</li>
        <li>77</li>
        <li>78</li>
        <li>79</li>
        <li>80</li>
        <li>81</li>
        <li>82</li>
        <li>83</li>
        <li>84</li>
        <li>85</li>
        <li>86</li>
        <li>87</li>
        <li>88</li>
        <li>89</li>
        <li>90</li>
        <li>91</li>
        <li>92</li>
        <li>93</li>
        <li>94</li>
        <li>95</li>
        <li>96</li>
        <li>97</li>
        <li>98</li>
        <li>99</li>
        <li>100</li>
        <li>101</li>
        <li>102</li>
        <li>103</li>
        <li>104</li>
        <li>105</li>
        <li>106</li>
        <li>107</li>
        <li>108</li>
        <li>109</li>
        <li>110</li>
        <li>111</li>
        <li>112</li>
        <li>113</li>
        <li>114</li>
        <li>115</li>
        <li>116</li>
        <li>117</li>
        <li>118</li>
        <li>119</li>
        <li>120</li>
        <li>121</li>
        <li>122</li>
        <li>123</li>
        <li>124</li>
        <li>125</li>
        <li>126</li>
        <li>127</li>
        <li>128</li>
        <li>129</li>
        <li>130</li>
        <li>131</li>
        <li>132</li>
        <li>133</li>
        <li>134</li>
        <li>135</li>
        <li>136</li>
        <li>137</li>
        <li>138</li>
        <li>139</li>
        <li>140</li>
        <li>141</li>
        <li>142</li>
        <li>143</li>
        <li>144</li>
        <li>145</li>
        <li>146</li>
        <li>147</li>
        <li>148</li>
        <li>149</li>
        <li>150</li>
        <li>151</li>
        <li>152</li>
        <li>153</li>
        <li>154</li>
        <li>155</li>
        <li>156</li>
        <li>157</li>
        <li>158</li>
        <li>159</li>
        <li>160</li>
        <li>161</li>
        <li>162</li>
        <li>163</li>
        <li>164</li>
        <li>165</li>
        <li>166</li>
        <li>167</li>
        <li>168</li>
        <li>169</li>
        <li>170</li>
        <li>171</li>
        <li>172</li>
        <li>173</li>
        <li>174</li>
        <li>175</li>
        <li>176</li>
        <li>177</li>
        <li>178</li>
        <li>179</li>
        <li>180</li>
        <li>181</li>
        <li>182</li>
        <li>183</li>
        <li>184</li>
        <li>185</li>
        <li>186</li>
        <li>187</li>
        <li>188</li>
        <li>189</li>
        <li>190</li>
        <li>191</li>
        <li>192</li>
        <li>193</li>
        <li>194</li>
        <li>195</li>
        <li>196</li>
        <li>197</li>
        <li>198</li>
        <li>199</li>
        <li>200</li>
        <li>201</li>
        <li>202</li>
        <li>203</li>
        <li>204</li>
        <li>205</li>
        <li>206</li>
        <li>207</li>
        <li>208</li>
        <li>209</li>
        <li>210</li>
        <li>211</li>
        <li>212</li>
        <li>213</li>
        <li>214</li>
        <li>215</li>
        <li>216</li>
        <li>217</li>
        <li>218</li>
        <li>219</li>
        <li>220</li>
        <li>221</li>
        <li>222</li>
        <li>223</li>
        <li>224</li>
        <li>225</li>
        <li>226</li>
        <li>227</li>
        <li>228</li>
        <li>229</li>
        <li>230</li>
        <li>231</li>
        <li>232</li>
        <li>233</li>
        <li>234</li>
        <li>235</li>
        <li>236</li>
        <li>237</li>
        <li>238</li>
        <li>239</li>
        <li>240</li>
        <li>241</li>
        <li>242</li>
        <li>243</li>
        <li>244</li>
        <li>245</li>
        <li>246</li>
        <li>247</li>
        <li>248</li>
        <li>249</li>
        <li>250</li>
        <li>251</li>
        <li>252</li>
        <li>253</li>
        <li>254</li>
        <li>255</li>
        <li>256</li>
        <li>257</li>
        <li>258</li>
        <li>259</li>
        <li>260</li>
        <li>261</li>
        <li>262</li>
        <li>263</li>
        <li>264</li>
        <li>265</li>
        <li>266</li>
        <li>267</li>
        <li>268</li>
        <li>269</li>
        <li>270</li>
        <li>271</li>
        <li>272</li>
        <li>273</li>
        <li>274</li>
        <li>275</li>
        <li>276</li>
        <li>277</li>
        <li>278</li>
        <li>279</li>
        <li>280</li>
        <li>281</li>
        <li>282</li>
        <li>283</li>
        <li>284</li>
        <li>285</li>
        <li>286</li>
        <li>287</li>
      </ol>
      <code><div class="highlight"><pre><span class="kd">var</span> <span class="nx">MooTools</span> <span class="o">=</span> <span class="p">{</span>&#x000A;	<span class="s1">&#39;version&#39;</span><span class="o">:</span> <span class="s1">&#39;1.2.0&#39;</span><span class="p">,</span>&#x000A;	<span class="s1">&#39;build&#39;</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>&#x000A;<span class="p">};</span>&#x000A;      &#x000A;<span class="kd">var</span> <span class="nx">Native</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>&#x000A;	<span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>&#x000A;&#x000A;	<span class="kd">var</span> <span class="nx">afterImplement</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">afterImplement</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(){};</span>&#x000A;	<span class="kd">var</span> <span class="nx">generics</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">generics</span><span class="p">;</span>&#x000A;	<span class="nx">generics</span> <span class="o">=</span> <span class="p">(</span><span class="nx">generics</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">);</span>&#x000A;	<span class="kd">var</span> <span class="nx">legacy</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">legacy</span><span class="p">;</span>&#x000A;	<span class="kd">var</span> <span class="nx">initialize</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">initialize</span><span class="p">;</span>&#x000A;	<span class="kd">var</span> <span class="nx">protect</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">protect</span><span class="p">;</span>&#x000A;	<span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>&#x000A;&#x000A;	<span class="kd">var</span> <span class="nx">object</span> <span class="o">=</span> <span class="nx">initialize</span> <span class="o">||</span> <span class="nx">legacy</span><span class="p">;</span>&#x000A;&#x000A;	<span class="nx">object</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Native</span><span class="p">;</span>&#x000A;	<span class="nx">object</span><span class="p">.</span><span class="nx">$family</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;native&#39;</span><span class="p">};</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="nx">legacy</span> <span class="o">&amp;&amp;</span> <span class="nx">initialize</span><span class="p">)</span> <span class="nx">object</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">legacy</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span>&#x000A;	<span class="nx">object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">object</span><span class="p">;</span>&#x000A;&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="nx">name</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">family</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>&#x000A;		<span class="nx">object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">$family</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="nx">family</span><span class="p">};</span>&#x000A;		<span class="nx">Native</span><span class="p">.</span><span class="nx">typize</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">family</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;	<span class="kd">var</span> <span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">method</span><span class="p">,</span> <span class="nx">force</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">protect</span> <span class="o">||</span> <span class="nx">force</span> <span class="o">||</span> <span class="o">!</span><span class="nx">obj</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">name</span><span class="p">])</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">method</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">generics</span><span class="p">)</span> <span class="nx">Native</span><span class="p">.</span><span class="nx">genericize</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">protect</span><span class="p">);</span>&#x000A;		<span class="nx">afterImplement</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">method</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>&#x000A;	<span class="p">};</span>&#x000A;	&#x000A;	<span class="nx">object</span><span class="p">.</span><span class="nx">implement</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a1</span><span class="p">,</span> <span class="nx">a2</span><span class="p">,</span> <span class="nx">a3</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a1</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="nx">add</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">a1</span><span class="p">,</span> <span class="nx">a2</span><span class="p">,</span> <span class="nx">a3</span><span class="p">);</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">a1</span><span class="p">)</span> <span class="nx">add</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">a1</span><span class="p">[</span><span class="nx">p</span><span class="p">],</span> <span class="nx">a2</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">};</span>&#x000A;	&#x000A;	<span class="nx">object</span><span class="p">.</span><span class="nx">alias</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a1</span><span class="p">,</span> <span class="nx">a2</span><span class="p">,</span> <span class="nx">a3</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">a1</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">){</span>&#x000A;			<span class="nx">a1</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">a1</span><span class="p">];</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">a1</span><span class="p">)</span> <span class="nx">add</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">a2</span><span class="p">,</span> <span class="nx">a1</span><span class="p">,</span> <span class="nx">a3</span><span class="p">);</span>&#x000A;		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>&#x000A;			<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">a</span> <span class="k">in</span> <span class="nx">a1</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">alias</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">a1</span><span class="p">[</span><span class="nx">a</span><span class="p">],</span> <span class="nx">a2</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">};</span>&#x000A;&#x000A;	<span class="k">return</span> <span class="nx">object</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Native</span><span class="p">.</span><span class="nx">implement</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">objects</span><span class="p">,</span> <span class="nx">properties</span><span class="p">){</span>&#x000A;	<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">objects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">implement</span><span class="p">(</span><span class="nx">properties</span><span class="p">);</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Native</span><span class="p">.</span><span class="nx">genericize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">property</span><span class="p">,</span> <span class="nx">check</span><span class="p">){</span>&#x000A;	<span class="k">if</span> <span class="p">((</span><span class="o">!</span><span class="nx">check</span> <span class="o">||</span> <span class="o">!</span><span class="nx">object</span><span class="p">[</span><span class="nx">property</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="nx">object</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="nx">object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">[</span><span class="nx">property</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span> <span class="nx">args</span><span class="p">);</span>&#x000A;	<span class="p">};</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Native</span><span class="p">.</span><span class="nx">typize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">family</span><span class="p">){</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">object</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="nx">object</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="o">===</span> <span class="nx">family</span><span class="p">);</span>&#x000A;	<span class="p">};</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Native</span><span class="p">.</span><span class="nx">alias</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">objects</span><span class="p">,</span> <span class="nx">a1</span><span class="p">,</span> <span class="nx">a2</span><span class="p">,</span> <span class="nx">a3</span><span class="p">){</span>&#x000A;	<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">objects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">alias</span><span class="p">(</span><span class="nx">a1</span><span class="p">,</span> <span class="nx">a2</span><span class="p">,</span> <span class="nx">a3</span><span class="p">);</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">objects</span><span class="p">){</span>&#x000A;	<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">objects</span><span class="p">)</span> <span class="nx">Native</span><span class="p">.</span><span class="nx">typize</span><span class="p">(</span><span class="nx">objects</span><span class="p">[</span><span class="nx">name</span><span class="p">],</span> <span class="nx">name</span><span class="p">);</span>&#x000A;<span class="p">})({</span><span class="s1">&#39;boolean&#39;</span><span class="o">:</span> <span class="nb">Boolean</span><span class="p">,</span> <span class="s1">&#39;native&#39;</span><span class="o">:</span> <span class="nx">Native</span><span class="p">,</span> <span class="s1">&#39;object&#39;</span><span class="o">:</span> <span class="nb">Object</span><span class="p">});</span>&#x000A;&#x000A;<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">objects</span><span class="p">){</span>&#x000A;	<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">objects</span><span class="p">)</span> <span class="k">new</span> <span class="nx">Native</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">initialize</span><span class="o">:</span> <span class="nx">objects</span><span class="p">[</span><span class="nx">name</span><span class="p">],</span> <span class="nx">protect</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>&#x000A;<span class="p">})({</span><span class="s1">&#39;String&#39;</span><span class="o">:</span> <span class="nb">String</span><span class="p">,</span> <span class="s1">&#39;Function&#39;</span><span class="o">:</span> <span class="nb">Function</span><span class="p">,</span> <span class="s1">&#39;Number&#39;</span><span class="o">:</span> <span class="nb">Number</span><span class="p">,</span> <span class="s1">&#39;Array&#39;</span><span class="o">:</span> <span class="nb">Array</span><span class="p">,</span> <span class="s1">&#39;RegExp&#39;</span><span class="o">:</span> <span class="nb">RegExp</span><span class="p">,</span> <span class="s1">&#39;Date&#39;</span><span class="o">:</span> <span class="nb">Date</span><span class="p">});</span>&#x000A;&#x000A;<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">methods</span><span class="p">){</span>&#x000A;	<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">methods</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;</span> <span class="nx">i</span><span class="p">)</span> <span class="nx">Native</span><span class="p">.</span><span class="nx">genericize</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">methods</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="kc">true</span><span class="p">);</span>&#x000A;	<span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">;</span>&#x000A;<span class="p">})</span>&#x000A;<span class="p">(</span><span class="nb">Array</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;pop&#39;</span><span class="p">,</span> <span class="s1">&#39;push&#39;</span><span class="p">,</span> <span class="s1">&#39;reverse&#39;</span><span class="p">,</span> <span class="s1">&#39;shift&#39;</span><span class="p">,</span> <span class="s1">&#39;sort&#39;</span><span class="p">,</span> <span class="s1">&#39;splice&#39;</span><span class="p">,</span> <span class="s1">&#39;unshift&#39;</span><span class="p">,</span> <span class="s1">&#39;concat&#39;</span><span class="p">,</span> <span class="s1">&#39;join&#39;</span><span class="p">,</span> <span class="s1">&#39;slice&#39;</span><span class="p">,</span> <span class="s1">&#39;toString&#39;</span><span class="p">,</span> <span class="s1">&#39;valueOf&#39;</span><span class="p">,</span> <span class="s1">&#39;indexOf&#39;</span><span class="p">,</span> <span class="s1">&#39;lastIndexOf&#39;</span><span class="p">])</span>&#x000A;<span class="p">(</span><span class="nb">String</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;charAt&#39;</span><span class="p">,</span> <span class="s1">&#39;charCodeAt&#39;</span><span class="p">,</span> <span class="s1">&#39;concat&#39;</span><span class="p">,</span> <span class="s1">&#39;indexOf&#39;</span><span class="p">,</span> <span class="s1">&#39;lastIndexOf&#39;</span><span class="p">,</span> <span class="s1">&#39;match&#39;</span><span class="p">,</span> <span class="s1">&#39;replace&#39;</span><span class="p">,</span> <span class="s1">&#39;search&#39;</span><span class="p">,</span> <span class="s1">&#39;slice&#39;</span><span class="p">,</span> <span class="s1">&#39;split&#39;</span><span class="p">,</span> <span class="s1">&#39;substr&#39;</span><span class="p">,</span> <span class="s1">&#39;substring&#39;</span><span class="p">,</span> <span class="s1">&#39;toLowerCase&#39;</span><span class="p">,</span> <span class="s1">&#39;toUpperCase&#39;</span><span class="p">,</span> <span class="s1">&#39;valueOf&#39;</span><span class="p">]);</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$chk</span><span class="p">(</span><span class="nx">obj</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="o">!!</span><span class="p">(</span><span class="nx">obj</span> <span class="o">||</span> <span class="nx">obj</span> <span class="o">===</span> <span class="mi">0</span><span class="p">);</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$clear</span><span class="p">(</span><span class="nx">timer</span><span class="p">){</span>&#x000A;	<span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>&#x000A;	<span class="nx">clearInterval</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>&#x000A;	<span class="k">return</span> <span class="kc">null</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$defined</span><span class="p">(</span><span class="nx">obj</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="p">(</span><span class="nx">obj</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">);</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$empty</span><span class="p">(){};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$arguments</span><span class="p">(</span><span class="nx">i</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>&#x000A;	<span class="p">};</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$lambda</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">==</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">value</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="nx">value</span><span class="p">;</span>&#x000A;	<span class="p">};</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$extend</span><span class="p">(</span><span class="nx">original</span><span class="p">,</span> <span class="nx">extended</span><span class="p">){</span>&#x000A;	<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="p">(</span><span class="nx">extended</span> <span class="o">||</span> <span class="p">{}))</span> <span class="nx">original</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">extended</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>&#x000A;	<span class="k">return</span> <span class="nx">original</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$unlink</span><span class="p">(</span><span class="nx">object</span><span class="p">){</span>&#x000A;	<span class="kd">var</span> <span class="nx">unlinked</span><span class="p">;</span>&#x000A;	&#x000A;	<span class="k">switch</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">object</span><span class="p">)){</span>&#x000A;		<span class="k">case</span> <span class="s1">&#39;object&#39;</span><span class="o">:</span>&#x000A;			<span class="nx">unlinked</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;			<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">object</span><span class="p">)</span> <span class="nx">unlinked</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span> <span class="o">=</span> <span class="nx">$unlink</span><span class="p">(</span><span class="nx">object</span><span class="p">[</span><span class="nx">p</span><span class="p">]);</span>&#x000A;		<span class="k">break</span><span class="p">;</span>&#x000A;		<span class="k">case</span> <span class="s1">&#39;hash&#39;</span><span class="o">:</span>&#x000A;			<span class="nx">unlinked</span> <span class="o">=</span> <span class="nx">$unlink</span><span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">getClean</span><span class="p">());</span>&#x000A;		<span class="k">break</span><span class="p">;</span>&#x000A;		<span class="k">case</span> <span class="s1">&#39;array&#39;</span><span class="o">:</span>&#x000A;			<span class="nx">unlinked</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;			<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">unlinked</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">$unlink</span><span class="p">(</span><span class="nx">object</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>&#x000A;		<span class="k">break</span><span class="p">;</span>&#x000A;		<span class="k">default</span><span class="o">:</span> <span class="k">return</span> <span class="nx">object</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;	&#x000A;	<span class="k">return</span> <span class="nx">unlinked</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$merge</span><span class="p">(){</span>&#x000A;	<span class="kd">var</span> <span class="nx">mix</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;	<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">object</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">object</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">op</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span> <span class="nx">mp</span> <span class="o">=</span> <span class="nx">mix</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>&#x000A;			<span class="nx">mix</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">mp</span> <span class="o">&amp;&amp;</span> <span class="nx">$type</span><span class="p">(</span><span class="nx">op</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">$type</span><span class="p">(</span><span class="nx">mp</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">$merge</span><span class="p">(</span><span class="nx">mp</span><span class="p">,</span> <span class="nx">op</span><span class="p">)</span> <span class="o">:</span> <span class="nx">$unlink</span><span class="p">(</span><span class="nx">op</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;	<span class="p">}</span>&#x000A;	<span class="k">return</span> <span class="nx">mix</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$pick</span><span class="p">(){</span>&#x000A;	<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="k">return</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>&#x000A;	<span class="p">}</span>&#x000A;	<span class="k">return</span> <span class="kc">null</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$random</span><span class="p">(</span><span class="nx">min</span><span class="p">,</span> <span class="nx">max</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">max</span> <span class="o">-</span> <span class="nx">min</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">min</span><span class="p">);</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$splat</span><span class="p">(</span><span class="nx">obj</span><span class="p">){</span>&#x000A;	<span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">$type</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>&#x000A;	<span class="k">return</span> <span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nx">type</span> <span class="o">!=</span> <span class="s1">&#39;array&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">!=</span> <span class="s1">&#39;arguments&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="p">[</span><span class="nx">obj</span><span class="p">]</span> <span class="o">:</span> <span class="nx">obj</span><span class="p">)</span> <span class="o">:</span> <span class="p">[];</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">var</span> <span class="nx">$time</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;	<span class="k">return</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$try</span><span class="p">(){</span>&#x000A;	<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;		<span class="k">try</span> <span class="p">{</span>&#x000A;			<span class="k">return</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">]();</span>&#x000A;		<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){}</span>&#x000A;	<span class="p">}</span>&#x000A;	<span class="k">return</span> <span class="kc">null</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$type</span><span class="p">(</span><span class="nx">obj</span><span class="p">){</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="nx">obj</span> <span class="o">==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">$family</span><span class="p">)</span> <span class="k">return</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">$family</span><span class="p">.</span><span class="nx">name</span> <span class="o">==</span> <span class="s1">&#39;number&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">isFinite</span><span class="p">(</span><span class="nx">obj</span><span class="p">))</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">$family</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">){</span>&#x000A;		<span class="k">switch</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">){</span>&#x000A;			<span class="k">case</span> <span class="mi">1</span><span class="o">:</span> <span class="k">return</span> <span class="s1">&#39;element&#39;</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="mi">3</span><span class="o">:</span> <span class="k">return</span> <span class="p">(</span><span class="sr">/\S/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">nodeValue</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;textnode&#39;</span> <span class="o">:</span> <span class="s1">&#39;whitespace&#39;</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="s1">&#39;number&#39;</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">callee</span><span class="p">)</span> <span class="k">return</span> <span class="s1">&#39;arguments&#39;</span><span class="p">;</span>&#x000A;		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">item</span><span class="p">)</span> <span class="k">return</span> <span class="s1">&#39;collection&#39;</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;	<span class="k">return</span> <span class="k">typeof</span> <span class="nx">obj</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">var</span> <span class="nx">Hash</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Native</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Hash&#39;</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;hash&#39;</span><span class="p">)</span> <span class="nx">object</span> <span class="o">=</span> <span class="nx">$unlink</span><span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">getClean</span><span class="p">());</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">object</span><span class="p">)</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Hash</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;	&#x000A;	<span class="nx">getLength</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="nx">length</span><span class="o">++</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">length</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">forEach</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span> <span class="nx">key</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">getClean</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">clean</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="nx">clean</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">clean</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Hash</span><span class="p">.</span><span class="nx">alias</span><span class="p">(</span><span class="s1">&#39;forEach&#39;</span><span class="p">,</span> <span class="s1">&#39;each&#39;</span><span class="p">);</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$H</span><span class="p">(</span><span class="nx">object</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">(</span><span class="nx">object</span><span class="p">);</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nb">Array</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">forEach</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nb">Array</span><span class="p">.</span><span class="nx">alias</span><span class="p">(</span><span class="s1">&#39;forEach&#39;</span><span class="p">,</span> <span class="s1">&#39;each&#39;</span><span class="p">);</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$A</span><span class="p">(</span><span class="nx">iterable</span><span class="p">){</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="nx">iterable</span><span class="p">.</span><span class="nx">item</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">iterable</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">iterable</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>&#x000A;		<span class="k">return</span> <span class="nx">array</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;	<span class="k">return</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">iterable</span><span class="p">);</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$each</span><span class="p">(</span><span class="nx">iterable</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;	<span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">$type</span><span class="p">(</span><span class="nx">iterable</span><span class="p">);</span>&#x000A;	<span class="p">((</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;arguments&#39;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;collection&#39;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;array&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nb">Array</span> <span class="o">:</span> <span class="nx">Hash</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="nx">iterable</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">bind</span><span class="p">);</span>&#x000A;<span class="p">};</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Browser.js
      The Browser Core. Contains Browser initialization, Window and Document, and the Browser Hash.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>298</li>
        <li>299</li>
        <li>300</li>
        <li>301</li>
        <li>302</li>
        <li>303</li>
        <li>304</li>
        <li>305</li>
        <li>306</li>
        <li>307</li>
        <li>308</li>
        <li>309</li>
        <li>310</li>
        <li>311</li>
        <li>312</li>
        <li>313</li>
        <li>314</li>
        <li>315</li>
        <li>316</li>
        <li>317</li>
        <li>318</li>
        <li>319</li>
        <li>320</li>
        <li>321</li>
        <li>322</li>
        <li>323</li>
        <li>324</li>
        <li>325</li>
        <li>326</li>
        <li>327</li>
        <li>328</li>
        <li>329</li>
        <li>330</li>
        <li>331</li>
        <li>332</li>
        <li>333</li>
        <li>334</li>
        <li>335</li>
        <li>336</li>
        <li>337</li>
        <li>338</li>
        <li>339</li>
        <li>340</li>
        <li>341</li>
        <li>342</li>
        <li>343</li>
        <li>344</li>
        <li>345</li>
        <li>346</li>
        <li>347</li>
        <li>348</li>
        <li>349</li>
        <li>350</li>
        <li>351</li>
        <li>352</li>
        <li>353</li>
        <li>354</li>
        <li>355</li>
        <li>356</li>
        <li>357</li>
        <li>358</li>
        <li>359</li>
        <li>360</li>
        <li>361</li>
        <li>362</li>
        <li>363</li>
        <li>364</li>
        <li>365</li>
        <li>366</li>
        <li>367</li>
        <li>368</li>
        <li>369</li>
        <li>370</li>
        <li>371</li>
        <li>372</li>
        <li>373</li>
        <li>374</li>
        <li>375</li>
        <li>376</li>
        <li>377</li>
        <li>378</li>
        <li>379</li>
        <li>380</li>
        <li>381</li>
        <li>382</li>
        <li>383</li>
        <li>384</li>
        <li>385</li>
        <li>386</li>
        <li>387</li>
        <li>388</li>
        <li>389</li>
        <li>390</li>
        <li>391</li>
        <li>392</li>
        <li>393</li>
        <li>394</li>
        <li>395</li>
        <li>396</li>
        <li>397</li>
        <li>398</li>
        <li>399</li>
        <li>400</li>
        <li>401</li>
        <li>402</li>
        <li>403</li>
        <li>404</li>
        <li>405</li>
        <li>406</li>
        <li>407</li>
      </ol>
      <code><div class="highlight"><pre><span class="kd">var</span> <span class="nx">Browser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">({</span>&#x000A;	<span class="nx">Engine</span><span class="o">:</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;unknown&#39;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">},</span>&#x000A;	<span class="nx">Platform</span><span class="o">:</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">platform</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/mac|win|linux/i</span><span class="p">)</span> <span class="o">||</span> <span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">])[</span><span class="mi">0</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()},</span>&#x000A;	<span class="nx">Features</span><span class="o">:</span> <span class="p">{</span><span class="nx">xpath</span><span class="o">:</span> <span class="o">!!</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">),</span> <span class="nx">air</span><span class="o">:</span> <span class="o">!!</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">runtime</span><span class="p">)},</span>&#x000A;	<span class="nx">Plugins</span><span class="o">:</span> <span class="p">{}</span>&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">opera</span><span class="p">)</span> <span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;presto&#39;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">)</span> <span class="o">?</span> <span class="mi">950</span> <span class="o">:</span> <span class="mi">925</span><span class="p">};</span>&#x000A;<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span><span class="p">)</span> <span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;trident&#39;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">XMLHttpRequest</span><span class="p">)</span> <span class="o">?</span> <span class="mi">5</span> <span class="o">:</span> <span class="mi">4</span><span class="p">};</span>&#x000A;<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">taintEnabled</span><span class="p">)</span> <span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;webkit&#39;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Features</span><span class="p">.</span><span class="nx">xpath</span><span class="p">)</span> <span class="o">?</span> <span class="mi">420</span> <span class="o">:</span> <span class="mi">419</span><span class="p">};</span>&#x000A;<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getBoxObjectFor</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;gecko&#39;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">)</span> <span class="o">?</span> <span class="mi">19</span> <span class="o">:</span> <span class="mi">18</span><span class="p">};</span>&#x000A;<span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">[</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">[</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">version</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>&#x000A;&#x000A;<span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">orientation</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">Browser</span><span class="p">.</span><span class="nx">Platform</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;ipod&#39;</span><span class="p">;</span>&#x000A;&#x000A;<span class="nx">Browser</span><span class="p">.</span><span class="nx">Platform</span><span class="p">[</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Platform</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>&#x000A;&#x000A;<span class="nx">Browser</span><span class="p">.</span><span class="nx">Request</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;	<span class="k">return</span> <span class="nx">$try</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>&#x000A;	<span class="p">},</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s1">&#39;MSXML2.XMLHTTP&#39;</span><span class="p">);</span>&#x000A;	<span class="p">});</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Browser</span><span class="p">.</span><span class="nx">Features</span><span class="p">.</span><span class="nx">xhr</span> <span class="o">=</span> <span class="o">!!</span><span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Request</span><span class="p">());</span>&#x000A;&#x000A;<span class="nx">Browser</span><span class="p">.</span><span class="nx">Plugins</span><span class="p">.</span><span class="nx">Flash</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;	<span class="kd">var</span> <span class="nx">version</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$try</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="nx">navigator</span><span class="p">.</span><span class="nx">plugins</span><span class="p">[</span><span class="s1">&#39;Shockwave Flash&#39;</span><span class="p">].</span><span class="nx">description</span><span class="p">;</span>&#x000A;	<span class="p">},</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s1">&#39;ShockwaveFlash.ShockwaveFlash&#39;</span><span class="p">).</span><span class="nx">GetVariable</span><span class="p">(</span><span class="s1">&#39;$version&#39;</span><span class="p">);</span>&#x000A;	<span class="p">})</span> <span class="o">||</span> <span class="s1">&#39;0 r0&#39;</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\d+/g</span><span class="p">);</span>&#x000A;	<span class="k">return</span> <span class="p">{</span><span class="nx">version</span><span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">version</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">version</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">),</span> <span class="nx">build</span><span class="o">:</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">version</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)};</span>&#x000A;<span class="p">})();</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">$exec</span><span class="p">(</span><span class="nx">text</span><span class="p">){</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">text</span><span class="p">)</span> <span class="k">return</span> <span class="nx">text</span><span class="p">;</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">execScript</span><span class="p">){</span>&#x000A;		<span class="nb">window</span><span class="p">.</span><span class="nx">execScript</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>&#x000A;	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>&#x000A;		<span class="kd">var</span> <span class="nx">script</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">);</span>&#x000A;		<span class="nx">script</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;text/javascript&#39;</span><span class="p">);</span>&#x000A;		<span class="nx">script</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span><span class="p">;</span>&#x000A;		<span class="nb">document</span><span class="p">.</span><span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">script</span><span class="p">);</span>&#x000A;		<span class="nb">document</span><span class="p">.</span><span class="nx">head</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">script</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;	<span class="k">return</span> <span class="nx">text</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Native</span><span class="p">.</span><span class="nx">UID</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>&#x000A;&#x000A;<span class="kd">var</span> <span class="nx">$uid</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span><span class="p">)</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">uid</span> <span class="o">||</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">uid</span> <span class="o">=</span> <span class="p">[</span><span class="nx">Native</span><span class="p">.</span><span class="nx">UID</span><span class="o">++</span><span class="p">]))[</span><span class="mi">0</span><span class="p">];</span>&#x000A;<span class="p">}</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="nx">item</span><span class="p">.</span><span class="nx">uid</span> <span class="o">||</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">uid</span> <span class="o">=</span> <span class="nx">Native</span><span class="p">.</span><span class="nx">UID</span><span class="o">++</span><span class="p">);</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">var</span> <span class="nx">Window</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Native</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Window&#39;</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">legacy</span><span class="o">:</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span><span class="p">)</span> <span class="o">?</span> <span class="kc">null</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">Window</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">win</span><span class="p">){</span>&#x000A;		<span class="nx">$uid</span><span class="p">(</span><span class="nx">win</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">win</span><span class="p">.</span><span class="nx">Element</span><span class="p">){</span>&#x000A;			<span class="nx">win</span><span class="p">.</span><span class="nx">Element</span> <span class="o">=</span> <span class="nx">$empty</span><span class="p">;</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">webkit</span><span class="p">)</span> <span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;iframe&quot;</span><span class="p">);</span> <span class="c1">//fixes safari 2</span>&#x000A;			<span class="nx">win</span><span class="p">.</span><span class="nx">Element</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">webkit</span><span class="p">)</span> <span class="o">?</span> <span class="nb">window</span><span class="p">[</span><span class="s2">&quot;[[DOMElement.prototype]]&quot;</span><span class="p">]</span> <span class="o">:</span> <span class="p">{};</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">$extend</span><span class="p">(</span><span class="nx">win</span><span class="p">,</span> <span class="nx">Window</span><span class="p">.</span><span class="nx">Prototype</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">afterImplement</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">property</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="nb">window</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Window</span><span class="p">.</span><span class="nx">Prototype</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Window</span><span class="p">.</span><span class="nx">Prototype</span> <span class="o">=</span> <span class="p">{</span><span class="nx">$family</span><span class="o">:</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;window&#39;</span><span class="p">}};</span>&#x000A;&#x000A;<span class="k">new</span> <span class="nx">Window</span><span class="p">(</span><span class="nb">window</span><span class="p">);</span>&#x000A;&#x000A;<span class="kd">var</span> <span class="nx">Document</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Native</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Document&#39;</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">legacy</span><span class="o">:</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span><span class="p">)</span> <span class="o">?</span> <span class="kc">null</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">Document</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">doc</span><span class="p">){</span>&#x000A;		<span class="nx">$uid</span><span class="p">(</span><span class="nx">doc</span><span class="p">);</span>&#x000A;		<span class="nx">doc</span><span class="p">.</span><span class="nx">head</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>&#x000A;		<span class="nx">doc</span><span class="p">.</span><span class="nx">html</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>&#x000A;		<span class="nx">doc</span><span class="p">.</span><span class="nb">window</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">defaultView</span> <span class="o">||</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">parentWindow</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident4</span><span class="p">)</span> <span class="nx">$try</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;			<span class="nx">doc</span><span class="p">.</span><span class="nx">execCommand</span><span class="p">(</span><span class="s2">&quot;BackgroundImageCache&quot;</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>&#x000A;		<span class="p">});</span>&#x000A;		<span class="k">return</span> <span class="nx">$extend</span><span class="p">(</span><span class="nx">doc</span><span class="p">,</span> <span class="nx">Document</span><span class="p">.</span><span class="nx">Prototype</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">afterImplement</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">property</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="nb">document</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Document</span><span class="p">.</span><span class="nx">Prototype</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Document</span><span class="p">.</span><span class="nx">Prototype</span> <span class="o">=</span> <span class="p">{</span><span class="nx">$family</span><span class="o">:</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;document&#39;</span><span class="p">}};</span>&#x000A;&#x000A;<span class="k">new</span> <span class="nx">Document</span><span class="p">(</span><span class="nb">document</span><span class="p">);</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Array.js
      Contains Array Prototypes like copy, each, contains, and remove.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>417</li>
        <li>418</li>
        <li>419</li>
        <li>420</li>
        <li>421</li>
        <li>422</li>
        <li>423</li>
        <li>424</li>
        <li>425</li>
        <li>426</li>
        <li>427</li>
        <li>428</li>
        <li>429</li>
        <li>430</li>
        <li>431</li>
        <li>432</li>
        <li>433</li>
        <li>434</li>
        <li>435</li>
        <li>436</li>
        <li>437</li>
        <li>438</li>
        <li>439</li>
        <li>440</li>
        <li>441</li>
        <li>442</li>
        <li>443</li>
        <li>444</li>
        <li>445</li>
        <li>446</li>
        <li>447</li>
        <li>448</li>
        <li>449</li>
        <li>450</li>
        <li>451</li>
        <li>452</li>
        <li>453</li>
        <li>454</li>
        <li>455</li>
        <li>456</li>
        <li>457</li>
        <li>458</li>
        <li>459</li>
        <li>460</li>
        <li>461</li>
        <li>462</li>
        <li>463</li>
        <li>464</li>
        <li>465</li>
        <li>466</li>
        <li>467</li>
        <li>468</li>
        <li>469</li>
        <li>470</li>
        <li>471</li>
        <li>472</li>
        <li>473</li>
        <li>474</li>
        <li>475</li>
        <li>476</li>
        <li>477</li>
        <li>478</li>
        <li>479</li>
        <li>480</li>
        <li>481</li>
        <li>482</li>
        <li>483</li>
        <li>484</li>
        <li>485</li>
        <li>486</li>
        <li>487</li>
        <li>488</li>
        <li>489</li>
        <li>490</li>
        <li>491</li>
        <li>492</li>
        <li>493</li>
        <li>494</li>
        <li>495</li>
        <li>496</li>
        <li>497</li>
        <li>498</li>
        <li>499</li>
        <li>500</li>
        <li>501</li>
        <li>502</li>
        <li>503</li>
        <li>504</li>
        <li>505</li>
        <li>506</li>
        <li>507</li>
        <li>508</li>
        <li>509</li>
        <li>510</li>
        <li>511</li>
        <li>512</li>
        <li>513</li>
        <li>514</li>
        <li>515</li>
        <li>516</li>
        <li>517</li>
        <li>518</li>
        <li>519</li>
        <li>520</li>
        <li>521</li>
        <li>522</li>
        <li>523</li>
        <li>524</li>
        <li>525</li>
        <li>526</li>
        <li>527</li>
        <li>528</li>
        <li>529</li>
        <li>530</li>
        <li>531</li>
        <li>532</li>
        <li>533</li>
        <li>534</li>
        <li>535</li>
        <li>536</li>
        <li>537</li>
        <li>538</li>
        <li>539</li>
        <li>540</li>
        <li>541</li>
        <li>542</li>
        <li>543</li>
        <li>544</li>
        <li>545</li>
        <li>546</li>
        <li>547</li>
        <li>548</li>
      </ol>
      <code><div class="highlight"><pre><span class="nb">Array</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">every</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="k">this</span><span class="p">))</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">filter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="k">this</span><span class="p">))</span> <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">results</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">clean</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">$defined</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">indexOf</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">from</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="p">(</span><span class="nx">from</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">+</span> <span class="nx">from</span><span class="p">)</span> <span class="o">:</span> <span class="nx">from</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="nx">item</span><span class="p">)</span> <span class="k">return</span> <span class="nx">i</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">map</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="nx">results</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">some</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="k">this</span><span class="p">))</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">associate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">keys</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">length</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">keys</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>&#x000A;		<span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">link</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;			<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">object</span><span class="p">){</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">object</span><span class="p">[</span><span class="nx">key</span><span class="p">](</span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">])){</span>&#x000A;					<span class="nx">result</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>&#x000A;					<span class="k">delete</span> <span class="nx">object</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>&#x000A;					<span class="k">break</span><span class="p">;</span>&#x000A;				<span class="p">}</span>&#x000A;			<span class="p">}</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">result</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">contains</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">from</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">from</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">extend</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getLast</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getRandom</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">[</span><span class="nx">$random</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">include</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">item</span><span class="p">))</span> <span class="k">this</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">combine</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">erase</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;</span> <span class="nx">i</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="nx">item</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">empty</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">flatten</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">$type</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">type</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>&#x000A;			<span class="nx">array</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">concat</span><span class="p">((</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;array&#39;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;collection&#39;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;arguments&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">flatten</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">:</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">array</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">hexToRgb</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">rgb</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">value</span> <span class="o">+=</span> <span class="nx">value</span><span class="p">;</span>&#x000A;			<span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">toInt</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>&#x000A;		<span class="p">});</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="o">?</span> <span class="nx">rgb</span> <span class="o">:</span> <span class="s1">&#39;rgb(&#39;</span> <span class="o">+</span> <span class="nx">rgb</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">rgbToHex</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">array</span><span class="p">)</span> <span class="k">return</span> <span class="s1">&#39;transparent&#39;</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">hex</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">bit</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">0</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>&#x000A;			<span class="nx">hex</span><span class="p">.</span><span class="nx">push</span><span class="p">((</span><span class="nx">bit</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;0&#39;</span> <span class="o">+</span> <span class="nx">bit</span> <span class="o">:</span> <span class="nx">bit</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="o">?</span> <span class="nx">hex</span> <span class="o">:</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="nx">hex</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Function.js
      Contains Function Prototypes like create, bind, pass, and delay.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>558</li>
        <li>559</li>
        <li>560</li>
        <li>561</li>
        <li>562</li>
        <li>563</li>
        <li>564</li>
        <li>565</li>
        <li>566</li>
        <li>567</li>
        <li>568</li>
        <li>569</li>
        <li>570</li>
        <li>571</li>
        <li>572</li>
        <li>573</li>
        <li>574</li>
        <li>575</li>
        <li>576</li>
        <li>577</li>
        <li>578</li>
        <li>579</li>
        <li>580</li>
        <li>581</li>
        <li>582</li>
        <li>583</li>
        <li>584</li>
        <li>585</li>
        <li>586</li>
        <li>587</li>
        <li>588</li>
        <li>589</li>
        <li>590</li>
        <li>591</li>
        <li>592</li>
        <li>593</li>
        <li>594</li>
        <li>595</li>
        <li>596</li>
        <li>597</li>
        <li>598</li>
        <li>599</li>
        <li>600</li>
        <li>601</li>
        <li>602</li>
        <li>603</li>
        <li>604</li>
        <li>605</li>
        <li>606</li>
        <li>607</li>
        <li>608</li>
        <li>609</li>
        <li>610</li>
      </ol>
      <code><div class="highlight"><pre><span class="nb">Function</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">extend</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">properties</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">property</span> <span class="k">in</span> <span class="nx">properties</span><span class="p">)</span> <span class="k">this</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">=</span> <span class="nx">properties</span><span class="p">[</span><span class="nx">property</span><span class="p">];</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">create</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>&#x000A;		<span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">arguments</span><span class="p">;</span>&#x000A;			<span class="nx">args</span> <span class="o">=</span> <span class="p">(</span><span class="nx">args</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">?</span> <span class="nx">$splat</span><span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="o">:</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">event</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">event</span><span class="p">)</span> <span class="nx">args</span> <span class="o">=</span> <span class="p">[</span><span class="nx">event</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">].</span><span class="nx">extend</span><span class="p">(</span><span class="nx">args</span><span class="p">);</span>&#x000A;			<span class="kd">var</span> <span class="nx">returns</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;				<span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">bind</span> <span class="o">||</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>&#x000A;			<span class="p">};</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">delay</span><span class="p">)</span> <span class="k">return</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">returns</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">delay</span><span class="p">);</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">periodical</span><span class="p">)</span> <span class="k">return</span> <span class="nx">setInterval</span><span class="p">(</span><span class="nx">returns</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">periodical</span><span class="p">);</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">attempt</span><span class="p">)</span> <span class="k">return</span> <span class="nx">$try</span><span class="p">(</span><span class="nx">returns</span><span class="p">);</span>&#x000A;			<span class="k">return</span> <span class="nx">returns</span><span class="p">();</span>&#x000A;		<span class="p">};</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">pass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">arguments</span><span class="o">:</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">bind</span><span class="o">:</span> <span class="nx">bind</span><span class="p">});</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">attempt</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">arguments</span><span class="o">:</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">bind</span><span class="o">:</span> <span class="nx">bind</span><span class="p">,</span> <span class="nx">attempt</span><span class="o">:</span> <span class="kc">true</span><span class="p">})();</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">bind</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="nx">args</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">bind</span><span class="o">:</span> <span class="nx">bind</span><span class="p">,</span> <span class="nx">arguments</span><span class="o">:</span> <span class="nx">args</span><span class="p">});</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">bindWithEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="nx">args</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">bind</span><span class="o">:</span> <span class="nx">bind</span><span class="p">,</span> <span class="nx">event</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">arguments</span><span class="o">:</span> <span class="nx">args</span><span class="p">});</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">delay</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">delay</span><span class="p">,</span> <span class="nx">bind</span><span class="p">,</span> <span class="nx">args</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">delay</span><span class="o">:</span> <span class="nx">delay</span><span class="p">,</span> <span class="nx">bind</span><span class="o">:</span> <span class="nx">bind</span><span class="p">,</span> <span class="nx">arguments</span><span class="o">:</span> <span class="nx">args</span><span class="p">})();</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">periodical</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">interval</span><span class="p">,</span> <span class="nx">bind</span><span class="p">,</span> <span class="nx">args</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">periodical</span><span class="o">:</span> <span class="nx">interval</span><span class="p">,</span> <span class="nx">bind</span><span class="o">:</span> <span class="nx">bind</span><span class="p">,</span> <span class="nx">arguments</span><span class="o">:</span> <span class="nx">args</span><span class="p">})();</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">run</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="nx">$splat</span><span class="p">(</span><span class="nx">args</span><span class="p">));</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Number.js
      Contains Number Prototypes like limit, round, times, and ceil.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>620</li>
        <li>621</li>
        <li>622</li>
        <li>623</li>
        <li>624</li>
        <li>625</li>
        <li>626</li>
        <li>627</li>
        <li>628</li>
        <li>629</li>
        <li>630</li>
        <li>631</li>
        <li>632</li>
        <li>633</li>
        <li>634</li>
        <li>635</li>
        <li>636</li>
        <li>637</li>
        <li>638</li>
        <li>639</li>
        <li>640</li>
        <li>641</li>
        <li>642</li>
        <li>643</li>
        <li>644</li>
        <li>645</li>
        <li>646</li>
        <li>647</li>
        <li>648</li>
        <li>649</li>
        <li>650</li>
        <li>651</li>
        <li>652</li>
        <li>653</li>
        <li>654</li>
        <li>655</li>
      </ol>
      <code><div class="highlight"><pre><span class="nb">Number</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">limit</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">min</span><span class="p">,</span> <span class="nx">max</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">max</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">min</span><span class="p">,</span> <span class="k">this</span><span class="p">));</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">round</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">precision</span><span class="p">){</span>&#x000A;		<span class="nx">precision</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nx">precision</span> <span class="o">||</span> <span class="mi">0</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="k">this</span> <span class="o">*</span> <span class="nx">precision</span><span class="p">)</span> <span class="o">/</span> <span class="nx">precision</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">times</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">toFloat</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">toInt</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">base</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nb">parseInt</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">base</span> <span class="o">||</span> <span class="mi">10</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nb">Number</span><span class="p">.</span><span class="nx">alias</span><span class="p">(</span><span class="s1">&#39;times&#39;</span><span class="p">,</span> <span class="s1">&#39;each&#39;</span><span class="p">);</span>&#x000A;&#x000A;<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">math</span><span class="p">){</span>&#x000A;	<span class="kd">var</span> <span class="nx">methods</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;	<span class="nx">math</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">Number</span><span class="p">[</span><span class="nx">name</span><span class="p">])</span> <span class="nx">methods</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;			<span class="k">return</span> <span class="nb">Math</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">$A</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)));</span>&#x000A;		<span class="p">};</span>&#x000A;	<span class="p">});</span>&#x000A;	<span class="nb">Number</span><span class="p">.</span><span class="nx">implement</span><span class="p">(</span><span class="nx">methods</span><span class="p">);</span>&#x000A;<span class="p">})([</span><span class="s1">&#39;abs&#39;</span><span class="p">,</span> <span class="s1">&#39;acos&#39;</span><span class="p">,</span> <span class="s1">&#39;asin&#39;</span><span class="p">,</span> <span class="s1">&#39;atan&#39;</span><span class="p">,</span> <span class="s1">&#39;atan2&#39;</span><span class="p">,</span> <span class="s1">&#39;ceil&#39;</span><span class="p">,</span> <span class="s1">&#39;cos&#39;</span><span class="p">,</span> <span class="s1">&#39;exp&#39;</span><span class="p">,</span> <span class="s1">&#39;floor&#39;</span><span class="p">,</span> <span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;pow&#39;</span><span class="p">,</span> <span class="s1">&#39;sin&#39;</span><span class="p">,</span> <span class="s1">&#39;sqrt&#39;</span><span class="p">,</span> <span class="s1">&#39;tan&#39;</span><span class="p">]);</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: String.js
      Contains String Prototypes like camelCase, capitalize, test, and toInt.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>665</li>
        <li>666</li>
        <li>667</li>
        <li>668</li>
        <li>669</li>
        <li>670</li>
        <li>671</li>
        <li>672</li>
        <li>673</li>
        <li>674</li>
        <li>675</li>
        <li>676</li>
        <li>677</li>
        <li>678</li>
        <li>679</li>
        <li>680</li>
        <li>681</li>
        <li>682</li>
        <li>683</li>
        <li>684</li>
        <li>685</li>
        <li>686</li>
        <li>687</li>
        <li>688</li>
        <li>689</li>
        <li>690</li>
        <li>691</li>
        <li>692</li>
        <li>693</li>
        <li>694</li>
        <li>695</li>
        <li>696</li>
        <li>697</li>
        <li>698</li>
        <li>699</li>
        <li>700</li>
        <li>701</li>
        <li>702</li>
        <li>703</li>
        <li>704</li>
        <li>705</li>
        <li>706</li>
        <li>707</li>
        <li>708</li>
        <li>709</li>
        <li>710</li>
        <li>711</li>
        <li>712</li>
        <li>713</li>
        <li>714</li>
        <li>715</li>
        <li>716</li>
        <li>717</li>
        <li>718</li>
        <li>719</li>
        <li>720</li>
        <li>721</li>
        <li>722</li>
        <li>723</li>
        <li>724</li>
        <li>725</li>
        <li>726</li>
        <li>727</li>
        <li>728</li>
        <li>729</li>
        <li>730</li>
        <li>731</li>
        <li>732</li>
        <li>733</li>
        <li>734</li>
        <li>735</li>
        <li>736</li>
        <li>737</li>
        <li>738</li>
        <li>739</li>
        <li>740</li>
        <li>741</li>
      </ol>
      <code><div class="highlight"><pre><span class="nb">String</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">test</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">regex</span><span class="p">,</span> <span class="nx">params</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">regex</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">regex</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">:</span> <span class="nx">regex</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">contains</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">separator</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">separator</span><span class="p">)</span> <span class="o">?</span> <span class="p">(</span><span class="nx">separator</span> <span class="o">+</span> <span class="k">this</span> <span class="o">+</span> <span class="nx">separator</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">separator</span> <span class="o">+</span> <span class="nx">string</span> <span class="o">+</span> <span class="nx">separator</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">trim</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^\s+|\s+$/g</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">clean</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s+/g</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">).</span><span class="nx">trim</span><span class="p">();</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">camelCase</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/-\D/g</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">){</span>&#x000A;			<span class="k">return</span> <span class="nx">match</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">();</span>&#x000A;		<span class="p">});</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">hyphenate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[A-Z]/g</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">){</span>&#x000A;			<span class="k">return</span> <span class="p">(</span><span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="nx">match</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">());</span>&#x000A;		<span class="p">});</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">capitalize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\b[a-z]/g</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">){</span>&#x000A;			<span class="k">return</span> <span class="nx">match</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>&#x000A;		<span class="p">});</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">escapeRegExp</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/([-.*+?^${}()|[\]\/\\])/g</span><span class="p">,</span> <span class="s1">&#39;\\$1&#39;</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">toInt</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">base</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nb">parseInt</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">base</span> <span class="o">||</span> <span class="mi">10</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">toFloat</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">hexToRgb</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">hex</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">hex</span><span class="p">)</span> <span class="o">?</span> <span class="nx">hex</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nx">hexToRgb</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">rgbToHex</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">rgb</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\d{1,3}/g</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">rgb</span><span class="p">)</span> <span class="o">?</span> <span class="nx">rgb</span><span class="p">.</span><span class="nx">rgbToHex</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">stripScripts</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">option</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">scripts</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;script[^&gt;]*&gt;([\s\S]*?)&lt;\/script&gt;/gi</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;			<span class="nx">scripts</span> <span class="o">+=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;\n&#39;</span><span class="p">;</span>&#x000A;			<span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>&#x000A;		<span class="p">});</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">option</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="nx">$exec</span><span class="p">(</span><span class="nx">scripts</span><span class="p">);</span>&#x000A;		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">option</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="nx">option</span><span class="p">(</span><span class="nx">scripts</span><span class="p">,</span> <span class="nx">text</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="nx">text</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">substitute</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">regexp</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">regexp</span> <span class="o">||</span> <span class="p">(</span><span class="sr">/\\?\{([^}]+)\}/g</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">name</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">match</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;\\&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="nx">match</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>&#x000A;			<span class="k">return</span> <span class="p">(</span><span class="nx">object</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">?</span> <span class="nx">object</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>&#x000A;		<span class="p">});</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Hash.js
      Contains Hash Prototypes. Provides a means for overcoming the JavaScript practical impossibility of extending native Objects.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>751</li>
        <li>752</li>
        <li>753</li>
        <li>754</li>
        <li>755</li>
        <li>756</li>
        <li>757</li>
        <li>758</li>
        <li>759</li>
        <li>760</li>
        <li>761</li>
        <li>762</li>
        <li>763</li>
        <li>764</li>
        <li>765</li>
        <li>766</li>
        <li>767</li>
        <li>768</li>
        <li>769</li>
        <li>770</li>
        <li>771</li>
        <li>772</li>
        <li>773</li>
        <li>774</li>
        <li>775</li>
        <li>776</li>
        <li>777</li>
        <li>778</li>
        <li>779</li>
        <li>780</li>
        <li>781</li>
        <li>782</li>
        <li>783</li>
        <li>784</li>
        <li>785</li>
        <li>786</li>
        <li>787</li>
        <li>788</li>
        <li>789</li>
        <li>790</li>
        <li>791</li>
        <li>792</li>
        <li>793</li>
        <li>794</li>
        <li>795</li>
        <li>796</li>
        <li>797</li>
        <li>798</li>
        <li>799</li>
        <li>800</li>
        <li>801</li>
        <li>802</li>
        <li>803</li>
        <li>804</li>
        <li>805</li>
        <li>806</li>
        <li>807</li>
        <li>808</li>
        <li>809</li>
        <li>810</li>
        <li>811</li>
        <li>812</li>
        <li>813</li>
        <li>814</li>
        <li>815</li>
        <li>816</li>
        <li>817</li>
        <li>818</li>
        <li>819</li>
        <li>820</li>
        <li>821</li>
        <li>822</li>
        <li>823</li>
        <li>824</li>
        <li>825</li>
        <li>826</li>
        <li>827</li>
        <li>828</li>
        <li>829</li>
        <li>830</li>
        <li>831</li>
        <li>832</li>
        <li>833</li>
        <li>834</li>
        <li>835</li>
        <li>836</li>
        <li>837</li>
        <li>838</li>
        <li>839</li>
        <li>840</li>
        <li>841</li>
        <li>842</li>
        <li>843</li>
        <li>844</li>
        <li>845</li>
        <li>846</li>
        <li>847</li>
        <li>848</li>
        <li>849</li>
        <li>850</li>
        <li>851</li>
        <li>852</li>
        <li>853</li>
        <li>854</li>
        <li>855</li>
        <li>856</li>
        <li>857</li>
        <li>858</li>
        <li>859</li>
        <li>860</li>
        <li>861</li>
        <li>862</li>
        <li>863</li>
        <li>864</li>
        <li>865</li>
        <li>866</li>
        <li>867</li>
        <li>868</li>
        <li>869</li>
        <li>870</li>
        <li>871</li>
        <li>872</li>
        <li>873</li>
        <li>874</li>
        <li>875</li>
        <li>876</li>
        <li>877</li>
      </ol>
      <code><div class="highlight"><pre><span class="nx">Hash</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">has</span><span class="o">:</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">keyOf</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">===</span> <span class="nx">value</span><span class="p">)</span> <span class="k">return</span> <span class="nx">key</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="kc">null</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">hasValue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">Hash</span><span class="p">.</span><span class="nx">keyOf</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">extend</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">properties</span><span class="p">){</span>&#x000A;		<span class="nx">Hash</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">properties</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>&#x000A;			<span class="nx">Hash</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>&#x000A;		<span class="p">},</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">combine</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">properties</span><span class="p">){</span>&#x000A;		<span class="nx">Hash</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">properties</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>&#x000A;			<span class="nx">Hash</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>&#x000A;		<span class="p">},</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">erase</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="k">delete</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="o">?</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">empty</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="nx">Hash</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>&#x000A;			<span class="k">delete</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>&#x000A;		<span class="p">},</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">include</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">k</span> <span class="o">==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">map</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">;</span>&#x000A;		<span class="nx">Hash</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>&#x000A;			<span class="nx">results</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="k">this</span><span class="p">));</span>&#x000A;		<span class="p">},</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="nx">results</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">filter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">;</span>&#x000A;		<span class="nx">Hash</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="k">this</span><span class="p">))</span> <span class="nx">results</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>&#x000A;		<span class="p">},</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="nx">results</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">every</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span> <span class="nx">key</span><span class="p">))</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">some</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">bind</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span> <span class="nx">key</span><span class="p">))</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getKeys</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">keys</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		<span class="nx">Hash</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>&#x000A;			<span class="nx">keys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>&#x000A;		<span class="p">});</span>&#x000A;		<span class="k">return</span> <span class="nx">keys</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getValues</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		<span class="nx">Hash</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>&#x000A;			<span class="nx">values</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>&#x000A;		<span class="p">});</span>&#x000A;		<span class="k">return</span> <span class="nx">values</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">toQueryString</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">base</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">queryString</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		<span class="nx">Hash</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">base</span><span class="p">)</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">base</span> <span class="o">+</span> <span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="nx">key</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span><span class="p">;</span>&#x000A;			<span class="kd">var</span> <span class="nx">result</span><span class="p">;</span>&#x000A;			<span class="k">switch</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">value</span><span class="p">)){</span>&#x000A;				<span class="k">case</span> <span class="s1">&#39;object&#39;</span><span class="o">:</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">Hash</span><span class="p">.</span><span class="nx">toQueryString</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>&#x000A;				<span class="k">case</span> <span class="s1">&#39;array&#39;</span><span class="o">:</span>&#x000A;					<span class="kd">var</span> <span class="nx">qs</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;					<span class="nx">value</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>&#x000A;						<span class="nx">qs</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>&#x000A;					<span class="p">});</span>&#x000A;					<span class="nx">result</span> <span class="o">=</span> <span class="nx">Hash</span><span class="p">.</span><span class="nx">toQueryString</span><span class="p">(</span><span class="nx">qs</span><span class="p">,</span> <span class="nx">key</span><span class="p">);</span>&#x000A;				<span class="k">break</span><span class="p">;</span>&#x000A;				<span class="k">default</span><span class="o">:</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">key</span> <span class="o">+</span> <span class="s1">&#39;=&#39;</span> <span class="o">+</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>&#x000A;			<span class="p">}</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">queryString</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>&#x000A;		<span class="p">});</span>&#x000A;		&#x000A;		<span class="k">return</span> <span class="nx">queryString</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Hash</span><span class="p">.</span><span class="nx">alias</span><span class="p">({</span><span class="nx">keyOf</span><span class="o">:</span> <span class="s1">&#39;indexOf&#39;</span><span class="p">,</span> <span class="nx">hasValue</span><span class="o">:</span> <span class="s1">&#39;contains&#39;</span><span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Event.js
      Contains the Event Native, to make the event object completely crossbrowser.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>887</li>
        <li>888</li>
        <li>889</li>
        <li>890</li>
        <li>891</li>
        <li>892</li>
        <li>893</li>
        <li>894</li>
        <li>895</li>
        <li>896</li>
        <li>897</li>
        <li>898</li>
        <li>899</li>
        <li>900</li>
        <li>901</li>
        <li>902</li>
        <li>903</li>
        <li>904</li>
        <li>905</li>
        <li>906</li>
        <li>907</li>
        <li>908</li>
        <li>909</li>
        <li>910</li>
        <li>911</li>
        <li>912</li>
        <li>913</li>
        <li>914</li>
        <li>915</li>
        <li>916</li>
        <li>917</li>
        <li>918</li>
        <li>919</li>
        <li>920</li>
        <li>921</li>
        <li>922</li>
        <li>923</li>
        <li>924</li>
        <li>925</li>
        <li>926</li>
        <li>927</li>
        <li>928</li>
        <li>929</li>
        <li>930</li>
        <li>931</li>
        <li>932</li>
        <li>933</li>
        <li>934</li>
        <li>935</li>
        <li>936</li>
        <li>937</li>
        <li>938</li>
        <li>939</li>
        <li>940</li>
        <li>941</li>
        <li>942</li>
        <li>943</li>
        <li>944</li>
        <li>945</li>
        <li>946</li>
        <li>947</li>
        <li>948</li>
        <li>949</li>
        <li>950</li>
        <li>951</li>
        <li>952</li>
        <li>953</li>
        <li>954</li>
        <li>955</li>
        <li>956</li>
        <li>957</li>
        <li>958</li>
        <li>959</li>
        <li>960</li>
        <li>961</li>
        <li>962</li>
        <li>963</li>
        <li>964</li>
        <li>965</li>
        <li>966</li>
        <li>967</li>
        <li>968</li>
        <li>969</li>
        <li>970</li>
        <li>971</li>
        <li>972</li>
        <li>973</li>
        <li>974</li>
        <li>975</li>
        <li>976</li>
        <li>977</li>
        <li>978</li>
        <li>979</li>
        <li>980</li>
        <li>981</li>
        <li>982</li>
        <li>983</li>
        <li>984</li>
        <li>985</li>
        <li>986</li>
        <li>987</li>
        <li>988</li>
        <li>989</li>
        <li>990</li>
        <li>991</li>
        <li>992</li>
      </ol>
      <code><div class="highlight"><pre><span class="kd">var</span> <span class="nx">Event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Native</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Event&#39;</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">win</span><span class="p">){</span>&#x000A;		<span class="nx">win</span> <span class="o">=</span> <span class="nx">win</span> <span class="o">||</span> <span class="nb">window</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">doc</span> <span class="o">=</span> <span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">;</span>&#x000A;		<span class="nx">event</span> <span class="o">=</span> <span class="nx">event</span> <span class="o">||</span> <span class="nx">win</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">$extended</span><span class="p">)</span> <span class="k">return</span> <span class="nx">event</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">$extended</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">srcElement</span><span class="p">;</span>&#x000A;		<span class="k">while</span> <span class="p">(</span><span class="nx">target</span> <span class="o">&amp;&amp;</span> <span class="nx">target</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">target</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>&#x000A;		&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">type</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="sr">/key/</span><span class="p">)){</span>&#x000A;			<span class="kd">var</span> <span class="nx">code</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">;</span>&#x000A;			<span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">Event</span><span class="p">.</span><span class="nx">Keys</span><span class="p">.</span><span class="nx">keyOf</span><span class="p">(</span><span class="nx">code</span><span class="p">);</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;keydown&#39;</span><span class="p">){</span>&#x000A;				<span class="kd">var</span> <span class="nx">fKey</span> <span class="o">=</span> <span class="nx">code</span> <span class="o">-</span> <span class="mi">111</span><span class="p">;</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">fKey</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">fKey</span> <span class="o">&lt;</span> <span class="mi">13</span><span class="p">)</span> <span class="nx">key</span> <span class="o">=</span> <span class="s1">&#39;f&#39;</span> <span class="o">+</span> <span class="nx">fKey</span><span class="p">;</span>&#x000A;			<span class="p">}</span>&#x000A;			<span class="nx">key</span> <span class="o">=</span> <span class="nx">key</span> <span class="o">||</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">code</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>&#x000A;		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">type</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/(click|mouse|menu)/i</span><span class="p">)){</span>&#x000A;			<span class="nx">doc</span> <span class="o">=</span> <span class="p">(</span><span class="o">!</span><span class="nx">doc</span><span class="p">.</span><span class="nx">compatMode</span> <span class="o">||</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">compatMode</span> <span class="o">==</span> <span class="s1">&#39;CSS1Compat&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">html</span> <span class="o">:</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>&#x000A;			<span class="kd">var</span> <span class="nx">page</span> <span class="o">=</span> <span class="p">{</span>&#x000A;				<span class="nx">x</span><span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">+</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">,</span>&#x000A;				<span class="nx">y</span><span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageY</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">+</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">scrollTop</span>&#x000A;			<span class="p">};</span>&#x000A;			<span class="kd">var</span> <span class="nx">client</span> <span class="o">=</span> <span class="p">{</span>&#x000A;				<span class="nx">x</span><span class="o">:</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span><span class="p">)</span> <span class="o">?</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span> <span class="o">-</span> <span class="nx">win</span><span class="p">.</span><span class="nx">pageXOffset</span> <span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span><span class="p">,</span>&#x000A;				<span class="nx">y</span><span class="o">:</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">pageY</span><span class="p">)</span> <span class="o">?</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageY</span> <span class="o">-</span> <span class="nx">win</span><span class="p">.</span><span class="nx">pageYOffset</span> <span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientY</span>&#x000A;			<span class="p">};</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">type</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/DOMMouseScroll|mousewheel/</span><span class="p">)){</span>&#x000A;				<span class="kd">var</span> <span class="nx">wheel</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">wheelDelta</span><span class="p">)</span> <span class="o">?</span> <span class="nx">event</span><span class="p">.</span><span class="nx">wheelDelta</span> <span class="o">/</span> <span class="mi">120</span> <span class="o">:</span> <span class="o">-</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">detail</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="mi">3</span><span class="p">;</span>&#x000A;			<span class="p">}</span>&#x000A;			<span class="kd">var</span> <span class="nx">rightClick</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">==</span> <span class="mi">2</span><span class="p">);</span>&#x000A;			<span class="kd">var</span> <span class="nx">related</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">type</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/over|out/</span><span class="p">)){</span>&#x000A;				<span class="k">switch</span> <span class="p">(</span><span class="nx">type</span><span class="p">){</span>&#x000A;					<span class="k">case</span> <span class="s1">&#39;mouseover&#39;</span><span class="o">:</span> <span class="nx">related</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">fromElement</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>&#x000A;					<span class="k">case</span> <span class="s1">&#39;mouseout&#39;</span><span class="o">:</span> <span class="nx">related</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">toElement</span><span class="p">;</span>&#x000A;				<span class="p">}</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;					<span class="k">while</span> <span class="p">(</span><span class="nx">related</span> <span class="o">&amp;&amp;</span> <span class="nx">related</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="nx">related</span> <span class="o">=</span> <span class="nx">related</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>&#x000A;					<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;				<span class="p">}).</span><span class="nx">create</span><span class="p">({</span><span class="nx">attempt</span><span class="o">:</span> <span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">gecko</span><span class="p">})())</span> <span class="nx">related</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>&#x000A;			<span class="p">}</span>&#x000A;		<span class="p">}</span>&#x000A;&#x000A;		<span class="k">return</span> <span class="nx">$extend</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="p">{</span>&#x000A;			<span class="nx">event</span><span class="o">:</span> <span class="nx">event</span><span class="p">,</span>&#x000A;			<span class="nx">type</span><span class="o">:</span> <span class="nx">type</span><span class="p">,</span>&#x000A;			&#x000A;			<span class="nx">page</span><span class="o">:</span> <span class="nx">page</span><span class="p">,</span>&#x000A;			<span class="nx">client</span><span class="o">:</span> <span class="nx">client</span><span class="p">,</span>&#x000A;			<span class="nx">rightClick</span><span class="o">:</span> <span class="nx">rightClick</span><span class="p">,</span>&#x000A;			&#x000A;			<span class="nx">wheel</span><span class="o">:</span> <span class="nx">wheel</span><span class="p">,</span>&#x000A;			&#x000A;			<span class="nx">relatedTarget</span><span class="o">:</span> <span class="nx">related</span><span class="p">,</span>&#x000A;			<span class="nx">target</span><span class="o">:</span> <span class="nx">target</span><span class="p">,</span>&#x000A;			&#x000A;			<span class="nx">code</span><span class="o">:</span> <span class="nx">code</span><span class="p">,</span>&#x000A;			<span class="nx">key</span><span class="o">:</span> <span class="nx">key</span><span class="p">,</span>&#x000A;			&#x000A;			<span class="nx">shift</span><span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">shiftKey</span><span class="p">,</span>&#x000A;			<span class="nx">control</span><span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span><span class="p">,</span>&#x000A;			<span class="nx">alt</span><span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">altKey</span><span class="p">,</span>&#x000A;			<span class="nx">meta</span><span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span>&#x000A;		<span class="p">});</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Event</span><span class="p">.</span><span class="nx">Keys</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">({</span>&#x000A;	<span class="s1">&#39;enter&#39;</span><span class="o">:</span> <span class="mi">13</span><span class="p">,</span>&#x000A;	<span class="s1">&#39;up&#39;</span><span class="o">:</span> <span class="mi">38</span><span class="p">,</span>&#x000A;	<span class="s1">&#39;down&#39;</span><span class="o">:</span> <span class="mi">40</span><span class="p">,</span>&#x000A;	<span class="s1">&#39;left&#39;</span><span class="o">:</span> <span class="mi">37</span><span class="p">,</span>&#x000A;	<span class="s1">&#39;right&#39;</span><span class="o">:</span> <span class="mi">39</span><span class="p">,</span>&#x000A;	<span class="s1">&#39;esc&#39;</span><span class="o">:</span> <span class="mi">27</span><span class="p">,</span>&#x000A;	<span class="s1">&#39;space&#39;</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>&#x000A;	<span class="s1">&#39;backspace&#39;</span><span class="o">:</span> <span class="mi">8</span><span class="p">,</span>&#x000A;	<span class="s1">&#39;tab&#39;</span><span class="o">:</span> <span class="mi">9</span><span class="p">,</span>&#x000A;	<span class="s1">&#39;delete&#39;</span><span class="o">:</span> <span class="mi">46</span>&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Event</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">stop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">().</span><span class="nx">preventDefault</span><span class="p">();</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">stopPropagation</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>&#x000A;		<span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">cancelBubble</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">preventDefault</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>&#x000A;		<span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">returnValue</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Class.js
      Contains the Class Function for easily creating, extending, and implementing reusable Classes.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>1002</li>
        <li>1003</li>
        <li>1004</li>
        <li>1005</li>
        <li>1006</li>
        <li>1007</li>
        <li>1008</li>
        <li>1009</li>
        <li>1010</li>
        <li>1011</li>
        <li>1012</li>
        <li>1013</li>
        <li>1014</li>
        <li>1015</li>
        <li>1016</li>
        <li>1017</li>
        <li>1018</li>
        <li>1019</li>
        <li>1020</li>
        <li>1021</li>
        <li>1022</li>
        <li>1023</li>
        <li>1024</li>
        <li>1025</li>
        <li>1026</li>
        <li>1027</li>
        <li>1028</li>
        <li>1029</li>
        <li>1030</li>
        <li>1031</li>
        <li>1032</li>
        <li>1033</li>
        <li>1034</li>
        <li>1035</li>
        <li>1036</li>
        <li>1037</li>
        <li>1038</li>
        <li>1039</li>
        <li>1040</li>
        <li>1041</li>
        <li>1042</li>
        <li>1043</li>
        <li>1044</li>
        <li>1045</li>
        <li>1046</li>
        <li>1047</li>
        <li>1048</li>
        <li>1049</li>
        <li>1050</li>
        <li>1051</li>
        <li>1052</li>
        <li>1053</li>
        <li>1054</li>
        <li>1055</li>
        <li>1056</li>
        <li>1057</li>
        <li>1058</li>
        <li>1059</li>
        <li>1060</li>
        <li>1061</li>
        <li>1062</li>
        <li>1063</li>
        <li>1064</li>
        <li>1065</li>
      </ol>
      <code><div class="highlight"><pre><span class="kd">var</span> <span class="nx">Class</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Native</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Class&#39;</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">properties</span><span class="p">){</span>&#x000A;		<span class="nx">properties</span> <span class="o">=</span> <span class="nx">properties</span> <span class="o">||</span> <span class="p">{};</span>&#x000A;		<span class="kd">var</span> <span class="nx">klass</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">empty</span><span class="p">){</span>&#x000A;			<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">)</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">$unlink</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>&#x000A;			<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">mutator</span> <span class="k">in</span> <span class="nx">Class</span><span class="p">.</span><span class="nx">Mutators</span><span class="p">){</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">[</span><span class="nx">mutator</span><span class="p">])</span> <span class="k">continue</span><span class="p">;</span>&#x000A;				<span class="nx">Class</span><span class="p">.</span><span class="nx">Mutators</span><span class="p">[</span><span class="nx">mutator</span><span class="p">](</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="nx">mutator</span><span class="p">]);</span>&#x000A;				<span class="k">delete</span> <span class="k">this</span><span class="p">[</span><span class="nx">mutator</span><span class="p">];</span>&#x000A;			<span class="p">}</span>&#x000A;&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">klass</span><span class="p">;</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">empty</span> <span class="o">===</span> <span class="nx">$empty</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;			&#x000A;			<span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">initialize</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">initialize</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">;</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">initialize</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">initialize</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>&#x000A;			<span class="k">return</span> <span class="nx">self</span><span class="p">;</span>&#x000A;		<span class="p">};</span>&#x000A;&#x000A;		<span class="nx">$extend</span><span class="p">(</span><span class="nx">klass</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="nx">klass</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Class</span><span class="p">;</span>&#x000A;		<span class="nx">klass</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">properties</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="nx">klass</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Class</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">implement</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="nx">Class</span><span class="p">.</span><span class="nx">Mutators</span><span class="p">.</span><span class="nx">Implements</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">arguments</span><span class="p">));</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Class</span><span class="p">.</span><span class="nx">Mutators</span> <span class="o">=</span> <span class="p">{</span>&#x000A;  &#x000A;  <span class="nx">Implements</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">klasses</span><span class="p">){</span>&#x000A;  	<span class="nx">$splat</span><span class="p">(</span><span class="nx">klasses</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">klass</span><span class="p">){</span>&#x000A;  		<span class="nx">$extend</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">klass</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;class&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="k">new</span> <span class="nx">klass</span><span class="p">(</span><span class="nx">$empty</span><span class="p">)</span> <span class="o">:</span> <span class="nx">klass</span><span class="p">);</span>&#x000A;  	<span class="p">});</span>&#x000A;  <span class="p">},</span>&#x000A;  &#x000A;  <span class="nx">Extends</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">klass</span><span class="p">){</span>&#x000A;  	<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">klass</span><span class="p">(</span><span class="nx">$empty</span><span class="p">);</span>&#x000A;  	<span class="k">delete</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>&#x000A;  	<span class="k">delete</span> <span class="nx">instance</span><span class="p">.</span><span class="nx">parentOf</span><span class="p">;</span>&#x000A;&#x000A;  	<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">instance</span><span class="p">){</span>&#x000A;  		<span class="kd">var</span> <span class="nx">current</span> <span class="o">=</span> <span class="nx">self</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span> <span class="nx">previous</span> <span class="o">=</span> <span class="nx">instance</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>&#x000A;  		<span class="k">if</span> <span class="p">(</span><span class="nx">current</span> <span class="o">==</span> <span class="kc">undefined</span><span class="p">){</span>&#x000A;  			<span class="nx">self</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">previous</span><span class="p">;</span>&#x000A;  			<span class="k">continue</span><span class="p">;</span>&#x000A;  		<span class="p">}</span>&#x000A;&#x000A;  		<span class="kd">var</span> <span class="nx">ctype</span> <span class="o">=</span> <span class="nx">$type</span><span class="p">(</span><span class="nx">current</span><span class="p">),</span> <span class="nx">ptype</span> <span class="o">=</span> <span class="nx">$type</span><span class="p">(</span><span class="nx">previous</span><span class="p">);</span>&#x000A;  		<span class="k">if</span> <span class="p">(</span><span class="nx">ctype</span> <span class="o">!=</span> <span class="nx">ptype</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>&#x000A;&#x000A;  		<span class="k">switch</span> <span class="p">(</span><span class="nx">ctype</span><span class="p">){</span>&#x000A;  			<span class="k">case</span> <span class="s1">&#39;function&#39;</span><span class="o">:</span> &#x000A;</pre></div></code>
    </figure>
    <section>
      <p>this code will be only executed if the current browser does not support function.caller (currently only opera).
      we replace the function code with brute force. Not pretty, but it will only be executed if function.caller is not supported.</p>
    </section>
    <figure>
      <ol>
        <li>1069</li>
        <li>1070</li>
        <li>1071</li>
      </ol>
      <code><div class="highlight"><pre>  				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">caller</span><span class="p">)</span> <span class="nx">self</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nb">String</span><span class="p">(</span><span class="nx">current</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\bthis\.parent\(\s*(\))?/g</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">full</span><span class="p">,</span> <span class="nx">close</span><span class="p">){</span>&#x000A;  					<span class="k">return</span> <span class="s1">&#39;arguments.callee._parent_.call(this&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">close</span> <span class="o">||</span> <span class="s1">&#39;, &#39;</span><span class="p">);</span>&#x000A;  				<span class="p">})</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">);</span>&#x000A;</pre></div></code>
    </figure>
    <section><p>end &ldquo;opera&rdquo; code</p></section>
    <figure>
      <ol>
        <li>1074</li>
        <li>1075</li>
        <li>1076</li>
        <li>1077</li>
        <li>1078</li>
        <li>1079</li>
        <li>1080</li>
        <li>1081</li>
        <li>1082</li>
        <li>1083</li>
        <li>1084</li>
        <li>1085</li>
        <li>1086</li>
        <li>1087</li>
        <li>1088</li>
        <li>1089</li>
        <li>1090</li>
      </ol>
      <code><div class="highlight"><pre>  				<span class="nx">self</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">_parent_</span> <span class="o">=</span> <span class="nx">previous</span><span class="p">;</span>&#x000A;  			  <span class="k">break</span><span class="p">;</span>&#x000A;  			<span class="k">case</span> <span class="s1">&#39;object&#39;</span><span class="o">:</span> <span class="nx">self</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">$merge</span><span class="p">(</span><span class="nx">previous</span><span class="p">,</span> <span class="nx">current</span><span class="p">);</span>&#x000A;  		<span class="p">}</span>&#x000A;&#x000A;  	<span class="p">}</span>&#x000A;&#x000A;  	<span class="nx">self</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;  		<span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">caller</span><span class="p">.</span><span class="nx">_parent_</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>&#x000A;  	<span class="p">};</span>&#x000A;&#x000A;  	<span class="nx">self</span><span class="p">.</span><span class="nx">parentOf</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">descendant</span><span class="p">){</span>&#x000A;  		<span class="k">return</span> <span class="nx">descendant</span><span class="p">.</span><span class="nx">_parent_</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>&#x000A;  	<span class="p">};</span>&#x000A;  <span class="p">}</span>&#x000A;  &#x000A;<span class="p">};</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Class.Extras.js
      Contains Utility Classes that can be implemented into your own Classes to ease the execution of many common tasks.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>1101</li>
        <li>1102</li>
        <li>1103</li>
        <li>1104</li>
        <li>1105</li>
        <li>1106</li>
        <li>1107</li>
        <li>1108</li>
        <li>1109</li>
        <li>1110</li>
        <li>1111</li>
        <li>1112</li>
        <li>1113</li>
        <li>1114</li>
        <li>1115</li>
        <li>1116</li>
        <li>1117</li>
        <li>1118</li>
        <li>1119</li>
        <li>1120</li>
        <li>1121</li>
        <li>1122</li>
        <li>1123</li>
        <li>1124</li>
        <li>1125</li>
        <li>1126</li>
        <li>1127</li>
        <li>1128</li>
        <li>1129</li>
        <li>1130</li>
        <li>1131</li>
        <li>1132</li>
        <li>1133</li>
        <li>1134</li>
        <li>1135</li>
        <li>1136</li>
        <li>1137</li>
        <li>1138</li>
        <li>1139</li>
        <li>1140</li>
        <li>1141</li>
        <li>1142</li>
        <li>1143</li>
        <li>1144</li>
        <li>1145</li>
        <li>1146</li>
        <li>1147</li>
        <li>1148</li>
        <li>1149</li>
        <li>1150</li>
        <li>1151</li>
        <li>1152</li>
        <li>1153</li>
        <li>1154</li>
        <li>1155</li>
        <li>1156</li>
        <li>1157</li>
        <li>1158</li>
        <li>1159</li>
        <li>1160</li>
        <li>1161</li>
        <li>1162</li>
        <li>1163</li>
        <li>1164</li>
        <li>1165</li>
        <li>1166</li>
        <li>1167</li>
        <li>1168</li>
        <li>1169</li>
        <li>1170</li>
        <li>1171</li>
        <li>1172</li>
        <li>1173</li>
        <li>1174</li>
        <li>1175</li>
        <li>1176</li>
        <li>1177</li>
        <li>1178</li>
        <li>1179</li>
        <li>1180</li>
        <li>1181</li>
        <li>1182</li>
        <li>1183</li>
      </ol>
      <code><div class="highlight"><pre><span class="kd">var</span> <span class="nx">Chain</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">chain</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">$chain</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$chain</span> <span class="o">||</span> <span class="p">[]).</span><span class="nx">extend</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">callChain</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$chain</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">$chain</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">$chain</span><span class="p">.</span><span class="nx">shift</span><span class="p">().</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">clearChain</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$chain</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">$chain</span><span class="p">.</span><span class="nx">empty</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="kd">var</span> <span class="nx">Events</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">addEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">internal</span><span class="p">){</span>&#x000A;		<span class="nx">type</span> <span class="o">=</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">removeOn</span><span class="p">(</span><span class="nx">type</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">fn</span> <span class="o">!=</span> <span class="nx">$empty</span><span class="p">){</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">$events</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$events</span> <span class="o">||</span> <span class="p">{};</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span> <span class="o">||</span> <span class="p">[];</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">include</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">internal</span><span class="p">)</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">internal</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">addEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">events</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">events</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">]);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">fireEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">delay</span><span class="p">){</span>&#x000A;		<span class="nx">type</span> <span class="o">=</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">removeOn</span><span class="p">(</span><span class="nx">type</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">$events</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">type</span><span class="p">])</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>&#x000A;			<span class="nx">fn</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="s1">&#39;bind&#39;</span><span class="o">:</span> <span class="k">this</span><span class="p">,</span> <span class="s1">&#39;delay&#39;</span><span class="o">:</span> <span class="nx">delay</span><span class="p">,</span> <span class="s1">&#39;arguments&#39;</span><span class="o">:</span> <span class="nx">args</span><span class="p">})();</span>&#x000A;		<span class="p">},</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">removeEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>&#x000A;		<span class="nx">type</span> <span class="o">=</span> <span class="nx">Events</span><span class="p">.</span><span class="nx">removeOn</span><span class="p">(</span><span class="nx">type</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">$events</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">type</span><span class="p">])</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">fn</span><span class="p">.</span><span class="nx">internal</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">erase</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">removeEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">e</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">!=</span> <span class="nx">e</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>&#x000A;			<span class="kd">var</span> <span class="nx">fns</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">e</span><span class="p">];</span>&#x000A;			<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">fns</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;</span> <span class="nx">i</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeEvent</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">fns</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Events</span><span class="p">.</span><span class="nx">removeOn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">string</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^on([A-Z])/</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">full</span><span class="p">,</span> <span class="nx">first</span><span class="p">)</span> <span class="p">{</span>&#x000A;		<span class="k">return</span> <span class="nx">first</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>&#x000A;	<span class="p">});</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">var</span> <span class="nx">Options</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">setOptions</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">$merge</span><span class="p">.</span><span class="nx">run</span><span class="p">([</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">].</span><span class="nx">extend</span><span class="p">(</span><span class="nx">arguments</span><span class="p">));</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">option</span> <span class="k">in</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">option</span><span class="p">])</span> <span class="o">!=</span> <span class="s1">&#39;function&#39;</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="sr">/^on[A-Z]/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">option</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">(</span><span class="nx">option</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">option</span><span class="p">]);</span>&#x000A;			<span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">option</span><span class="p">];</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Element.js
      One of the most important items in MooTools. Contains the dollar function, the dollars function, and an handful of cross-browser,
      time-saver methods to let you easily work with HTML Elements.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>1194</li>
        <li>1195</li>
        <li>1196</li>
        <li>1197</li>
        <li>1198</li>
        <li>1199</li>
        <li>1200</li>
        <li>1201</li>
        <li>1202</li>
        <li>1203</li>
        <li>1204</li>
        <li>1205</li>
        <li>1206</li>
        <li>1207</li>
        <li>1208</li>
        <li>1209</li>
        <li>1210</li>
        <li>1211</li>
        <li>1212</li>
        <li>1213</li>
        <li>1214</li>
        <li>1215</li>
        <li>1216</li>
        <li>1217</li>
        <li>1218</li>
        <li>1219</li>
        <li>1220</li>
        <li>1221</li>
        <li>1222</li>
        <li>1223</li>
        <li>1224</li>
        <li>1225</li>
        <li>1226</li>
        <li>1227</li>
        <li>1228</li>
        <li>1229</li>
        <li>1230</li>
        <li>1231</li>
        <li>1232</li>
        <li>1233</li>
        <li>1234</li>
        <li>1235</li>
        <li>1236</li>
        <li>1237</li>
        <li>1238</li>
        <li>1239</li>
        <li>1240</li>
        <li>1241</li>
        <li>1242</li>
        <li>1243</li>
        <li>1244</li>
        <li>1245</li>
        <li>1246</li>
        <li>1247</li>
        <li>1248</li>
        <li>1249</li>
        <li>1250</li>
        <li>1251</li>
        <li>1252</li>
        <li>1253</li>
        <li>1254</li>
        <li>1255</li>
        <li>1256</li>
        <li>1257</li>
        <li>1258</li>
        <li>1259</li>
        <li>1260</li>
        <li>1261</li>
        <li>1262</li>
        <li>1263</li>
        <li>1264</li>
        <li>1265</li>
        <li>1266</li>
        <li>1267</li>
        <li>1268</li>
        <li>1269</li>
        <li>1270</li>
        <li>1271</li>
        <li>1272</li>
        <li>1273</li>
        <li>1274</li>
        <li>1275</li>
        <li>1276</li>
        <li>1277</li>
        <li>1278</li>
        <li>1279</li>
        <li>1280</li>
        <li>1281</li>
        <li>1282</li>
        <li>1283</li>
        <li>1284</li>
        <li>1285</li>
        <li>1286</li>
        <li>1287</li>
        <li>1288</li>
        <li>1289</li>
        <li>1290</li>
        <li>1291</li>
        <li>1292</li>
        <li>1293</li>
        <li>1294</li>
        <li>1295</li>
        <li>1296</li>
        <li>1297</li>
        <li>1298</li>
        <li>1299</li>
        <li>1300</li>
        <li>1301</li>
        <li>1302</li>
        <li>1303</li>
        <li>1304</li>
        <li>1305</li>
        <li>1306</li>
        <li>1307</li>
        <li>1308</li>
        <li>1309</li>
        <li>1310</li>
        <li>1311</li>
        <li>1312</li>
        <li>1313</li>
        <li>1314</li>
        <li>1315</li>
        <li>1316</li>
        <li>1317</li>
        <li>1318</li>
        <li>1319</li>
        <li>1320</li>
        <li>1321</li>
        <li>1322</li>
        <li>1323</li>
        <li>1324</li>
        <li>1325</li>
        <li>1326</li>
        <li>1327</li>
        <li>1328</li>
        <li>1329</li>
        <li>1330</li>
        <li>1331</li>
        <li>1332</li>
        <li>1333</li>
        <li>1334</li>
        <li>1335</li>
        <li>1336</li>
        <li>1337</li>
        <li>1338</li>
        <li>1339</li>
        <li>1340</li>
        <li>1341</li>
        <li>1342</li>
        <li>1343</li>
        <li>1344</li>
        <li>1345</li>
        <li>1346</li>
        <li>1347</li>
        <li>1348</li>
        <li>1349</li>
        <li>1350</li>
        <li>1351</li>
        <li>1352</li>
        <li>1353</li>
        <li>1354</li>
        <li>1355</li>
        <li>1356</li>
        <li>1357</li>
        <li>1358</li>
        <li>1359</li>
        <li>1360</li>
        <li>1361</li>
        <li>1362</li>
        <li>1363</li>
        <li>1364</li>
        <li>1365</li>
        <li>1366</li>
        <li>1367</li>
        <li>1368</li>
        <li>1369</li>
        <li>1370</li>
        <li>1371</li>
        <li>1372</li>
        <li>1373</li>
        <li>1374</li>
        <li>1375</li>
        <li>1376</li>
        <li>1377</li>
        <li>1378</li>
        <li>1379</li>
        <li>1380</li>
        <li>1381</li>
        <li>1382</li>
        <li>1383</li>
        <li>1384</li>
        <li>1385</li>
        <li>1386</li>
        <li>1387</li>
        <li>1388</li>
        <li>1389</li>
        <li>1390</li>
        <li>1391</li>
        <li>1392</li>
        <li>1393</li>
        <li>1394</li>
        <li>1395</li>
        <li>1396</li>
        <li>1397</li>
        <li>1398</li>
        <li>1399</li>
        <li>1400</li>
        <li>1401</li>
        <li>1402</li>
        <li>1403</li>
        <li>1404</li>
        <li>1405</li>
        <li>1406</li>
        <li>1407</li>
        <li>1408</li>
        <li>1409</li>
        <li>1410</li>
        <li>1411</li>
        <li>1412</li>
        <li>1413</li>
        <li>1414</li>
        <li>1415</li>
        <li>1416</li>
        <li>1417</li>
        <li>1418</li>
        <li>1419</li>
        <li>1420</li>
        <li>1421</li>
        <li>1422</li>
        <li>1423</li>
        <li>1424</li>
        <li>1425</li>
        <li>1426</li>
        <li>1427</li>
        <li>1428</li>
        <li>1429</li>
        <li>1430</li>
        <li>1431</li>
        <li>1432</li>
        <li>1433</li>
        <li>1434</li>
        <li>1435</li>
        <li>1436</li>
        <li>1437</li>
        <li>1438</li>
        <li>1439</li>
        <li>1440</li>
        <li>1441</li>
        <li>1442</li>
        <li>1443</li>
        <li>1444</li>
        <li>1445</li>
        <li>1446</li>
        <li>1447</li>
        <li>1448</li>
        <li>1449</li>
        <li>1450</li>
        <li>1451</li>
        <li>1452</li>
        <li>1453</li>
        <li>1454</li>
        <li>1455</li>
        <li>1456</li>
        <li>1457</li>
        <li>1458</li>
        <li>1459</li>
        <li>1460</li>
        <li>1461</li>
        <li>1462</li>
        <li>1463</li>
        <li>1464</li>
        <li>1465</li>
        <li>1466</li>
        <li>1467</li>
        <li>1468</li>
        <li>1469</li>
        <li>1470</li>
        <li>1471</li>
        <li>1472</li>
        <li>1473</li>
        <li>1474</li>
        <li>1475</li>
        <li>1476</li>
        <li>1477</li>
        <li>1478</li>
        <li>1479</li>
        <li>1480</li>
        <li>1481</li>
        <li>1482</li>
        <li>1483</li>
        <li>1484</li>
        <li>1485</li>
        <li>1486</li>
        <li>1487</li>
        <li>1488</li>
        <li>1489</li>
        <li>1490</li>
        <li>1491</li>
        <li>1492</li>
        <li>1493</li>
        <li>1494</li>
        <li>1495</li>
        <li>1496</li>
        <li>1497</li>
        <li>1498</li>
        <li>1499</li>
        <li>1500</li>
        <li>1501</li>
        <li>1502</li>
        <li>1503</li>
        <li>1504</li>
        <li>1505</li>
        <li>1506</li>
        <li>1507</li>
        <li>1508</li>
        <li>1509</li>
        <li>1510</li>
        <li>1511</li>
        <li>1512</li>
        <li>1513</li>
        <li>1514</li>
        <li>1515</li>
        <li>1516</li>
        <li>1517</li>
        <li>1518</li>
        <li>1519</li>
        <li>1520</li>
        <li>1521</li>
        <li>1522</li>
        <li>1523</li>
        <li>1524</li>
        <li>1525</li>
        <li>1526</li>
        <li>1527</li>
        <li>1528</li>
        <li>1529</li>
        <li>1530</li>
        <li>1531</li>
        <li>1532</li>
        <li>1533</li>
        <li>1534</li>
        <li>1535</li>
        <li>1536</li>
        <li>1537</li>
        <li>1538</li>
        <li>1539</li>
        <li>1540</li>
        <li>1541</li>
        <li>1542</li>
        <li>1543</li>
        <li>1544</li>
        <li>1545</li>
        <li>1546</li>
        <li>1547</li>
        <li>1548</li>
        <li>1549</li>
        <li>1550</li>
        <li>1551</li>
        <li>1552</li>
        <li>1553</li>
        <li>1554</li>
        <li>1555</li>
        <li>1556</li>
        <li>1557</li>
        <li>1558</li>
        <li>1559</li>
        <li>1560</li>
        <li>1561</li>
        <li>1562</li>
        <li>1563</li>
        <li>1564</li>
        <li>1565</li>
        <li>1566</li>
        <li>1567</li>
        <li>1568</li>
        <li>1569</li>
        <li>1570</li>
        <li>1571</li>
        <li>1572</li>
        <li>1573</li>
        <li>1574</li>
        <li>1575</li>
        <li>1576</li>
        <li>1577</li>
        <li>1578</li>
        <li>1579</li>
        <li>1580</li>
        <li>1581</li>
        <li>1582</li>
        <li>1583</li>
        <li>1584</li>
        <li>1585</li>
        <li>1586</li>
        <li>1587</li>
        <li>1588</li>
        <li>1589</li>
        <li>1590</li>
        <li>1591</li>
        <li>1592</li>
        <li>1593</li>
        <li>1594</li>
        <li>1595</li>
        <li>1596</li>
        <li>1597</li>
        <li>1598</li>
        <li>1599</li>
        <li>1600</li>
        <li>1601</li>
        <li>1602</li>
        <li>1603</li>
        <li>1604</li>
        <li>1605</li>
        <li>1606</li>
        <li>1607</li>
        <li>1608</li>
        <li>1609</li>
        <li>1610</li>
        <li>1611</li>
        <li>1612</li>
        <li>1613</li>
        <li>1614</li>
        <li>1615</li>
        <li>1616</li>
        <li>1617</li>
        <li>1618</li>
        <li>1619</li>
        <li>1620</li>
        <li>1621</li>
        <li>1622</li>
        <li>1623</li>
        <li>1624</li>
        <li>1625</li>
        <li>1626</li>
        <li>1627</li>
        <li>1628</li>
        <li>1629</li>
        <li>1630</li>
        <li>1631</li>
        <li>1632</li>
        <li>1633</li>
        <li>1634</li>
        <li>1635</li>
        <li>1636</li>
        <li>1637</li>
        <li>1638</li>
        <li>1639</li>
        <li>1640</li>
        <li>1641</li>
        <li>1642</li>
        <li>1643</li>
        <li>1644</li>
        <li>1645</li>
        <li>1646</li>
        <li>1647</li>
        <li>1648</li>
        <li>1649</li>
        <li>1650</li>
        <li>1651</li>
        <li>1652</li>
        <li>1653</li>
        <li>1654</li>
        <li>1655</li>
        <li>1656</li>
        <li>1657</li>
        <li>1658</li>
        <li>1659</li>
        <li>1660</li>
        <li>1661</li>
        <li>1662</li>
        <li>1663</li>
        <li>1664</li>
        <li>1665</li>
        <li>1666</li>
        <li>1667</li>
        <li>1668</li>
        <li>1669</li>
        <li>1670</li>
        <li>1671</li>
        <li>1672</li>
        <li>1673</li>
        <li>1674</li>
        <li>1675</li>
        <li>1676</li>
        <li>1677</li>
        <li>1678</li>
        <li>1679</li>
        <li>1680</li>
        <li>1681</li>
        <li>1682</li>
        <li>1683</li>
        <li>1684</li>
        <li>1685</li>
        <li>1686</li>
        <li>1687</li>
        <li>1688</li>
        <li>1689</li>
        <li>1690</li>
        <li>1691</li>
        <li>1692</li>
        <li>1693</li>
        <li>1694</li>
        <li>1695</li>
        <li>1696</li>
        <li>1697</li>
        <li>1698</li>
        <li>1699</li>
        <li>1700</li>
        <li>1701</li>
        <li>1702</li>
        <li>1703</li>
        <li>1704</li>
        <li>1705</li>
        <li>1706</li>
        <li>1707</li>
        <li>1708</li>
        <li>1709</li>
        <li>1710</li>
        <li>1711</li>
        <li>1712</li>
        <li>1713</li>
        <li>1714</li>
        <li>1715</li>
        <li>1716</li>
        <li>1717</li>
        <li>1718</li>
        <li>1719</li>
        <li>1720</li>
        <li>1721</li>
        <li>1722</li>
        <li>1723</li>
        <li>1724</li>
        <li>1725</li>
        <li>1726</li>
        <li>1727</li>
        <li>1728</li>
        <li>1729</li>
        <li>1730</li>
        <li>1731</li>
        <li>1732</li>
        <li>1733</li>
        <li>1734</li>
        <li>1735</li>
        <li>1736</li>
        <li>1737</li>
        <li>1738</li>
        <li>1739</li>
        <li>1740</li>
        <li>1741</li>
        <li>1742</li>
        <li>1743</li>
        <li>1744</li>
        <li>1745</li>
        <li>1746</li>
        <li>1747</li>
        <li>1748</li>
        <li>1749</li>
        <li>1750</li>
        <li>1751</li>
        <li>1752</li>
        <li>1753</li>
        <li>1754</li>
        <li>1755</li>
        <li>1756</li>
        <li>1757</li>
        <li>1758</li>
        <li>1759</li>
        <li>1760</li>
        <li>1761</li>
        <li>1762</li>
        <li>1763</li>
        <li>1764</li>
        <li>1765</li>
        <li>1766</li>
        <li>1767</li>
        <li>1768</li>
        <li>1769</li>
        <li>1770</li>
        <li>1771</li>
        <li>1772</li>
        <li>1773</li>
        <li>1774</li>
        <li>1775</li>
        <li>1776</li>
        <li>1777</li>
        <li>1778</li>
        <li>1779</li>
        <li>1780</li>
        <li>1781</li>
        <li>1782</li>
        <li>1783</li>
        <li>1784</li>
        <li>1785</li>
        <li>1786</li>
        <li>1787</li>
        <li>1788</li>
        <li>1789</li>
        <li>1790</li>
        <li>1791</li>
        <li>1792</li>
        <li>1793</li>
        <li>1794</li>
        <li>1795</li>
        <li>1796</li>
        <li>1797</li>
        <li>1798</li>
        <li>1799</li>
        <li>1800</li>
        <li>1801</li>
        <li>1802</li>
        <li>1803</li>
        <li>1804</li>
        <li>1805</li>
        <li>1806</li>
        <li>1807</li>
        <li>1808</li>
        <li>1809</li>
        <li>1810</li>
        <li>1811</li>
        <li>1812</li>
        <li>1813</li>
        <li>1814</li>
      </ol>
      <code><div class="highlight"><pre><span class="nx">Document</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">newElement</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tag</span><span class="p">,</span> <span class="nx">props</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span> <span class="o">&amp;&amp;</span> <span class="nx">props</span><span class="p">){</span>&#x000A;			<span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;checked&#39;</span><span class="p">].</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">attribute</span><span class="p">){</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">props</span><span class="p">[</span><span class="nx">attribute</span><span class="p">])</span> <span class="k">return</span><span class="p">;</span>&#x000A;				<span class="nx">tag</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">attribute</span> <span class="o">+</span> <span class="s1">&#39;=&quot;&#39;</span> <span class="o">+</span> <span class="nx">props</span><span class="p">[</span><span class="nx">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">;</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">attribute</span> <span class="o">!=</span> <span class="s1">&#39;checked&#39;</span><span class="p">)</span> <span class="k">delete</span> <span class="nx">props</span><span class="p">[</span><span class="nx">attribute</span><span class="p">];</span>&#x000A;			<span class="p">});</span>&#x000A;			<span class="nx">tag</span> <span class="o">=</span> <span class="s1">&#39;&lt;&#39;</span> <span class="o">+</span> <span class="nx">tag</span> <span class="o">+</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">tag</span><span class="p">)).</span><span class="nx">set</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">newTextNode</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getDocument</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getWindow</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">defaultView</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentWindow</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">purge</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">);</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">Browser</span><span class="p">.</span><span class="nx">freeMem</span><span class="p">(</span><span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="kd">var</span> <span class="nx">Element</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Native</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Element&#39;</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">legacy</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">Element</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tag</span><span class="p">,</span> <span class="nx">props</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">konstructor</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Constructors</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">tag</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">konstructor</span><span class="p">)</span> <span class="k">return</span> <span class="nx">konstructor</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">tag</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="nb">document</span><span class="p">.</span><span class="nx">newElement</span><span class="p">(</span><span class="nx">tag</span><span class="p">,</span> <span class="nx">props</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="nx">tag</span><span class="p">).</span><span class="nx">set</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">afterImplement</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span> <span class="nx">Elements</span><span class="p">.</span><span class="nx">implement</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">Elements</span><span class="p">.</span><span class="nx">multi</span><span class="p">(</span><span class="nx">key</span><span class="p">));</span>&#x000A;		<span class="nx">Element</span><span class="p">.</span><span class="nx">Prototype</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Prototype</span> <span class="o">=</span> <span class="p">{</span><span class="nx">$family</span><span class="o">:</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;element&#39;</span><span class="p">}};</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Constructors</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">;</span>&#x000A;&#x000A;<span class="kd">var</span> <span class="nx">IFrame</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Native</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;IFrame&#39;</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">generics</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">link</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="p">{</span><span class="nx">properties</span><span class="o">:</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="nx">iframe</span><span class="o">:</span> <span class="nx">$defined</span><span class="p">});</span>&#x000A;		<span class="kd">var</span> <span class="nx">props</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">properties</span> <span class="o">||</span> <span class="p">{};</span>&#x000A;		<span class="kd">var</span> <span class="nx">iframe</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">params</span><span class="p">.</span><span class="nx">iframe</span><span class="p">)</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">onload</span> <span class="o">=</span> <span class="nx">props</span><span class="p">.</span><span class="nx">onload</span> <span class="o">||</span> <span class="nx">$empty</span><span class="p">;</span>&#x000A;		<span class="k">delete</span> <span class="nx">props</span><span class="p">.</span><span class="nx">onload</span><span class="p">;</span>&#x000A;		<span class="nx">props</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">props</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">$pick</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">iframe</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">iframe</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="s1">&#39;IFrame_&#39;</span> <span class="o">+</span> <span class="nx">$time</span><span class="p">());</span>&#x000A;		<span class="nx">iframe</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="nx">iframe</span> <span class="o">||</span> <span class="s1">&#39;iframe&#39;</span><span class="p">,</span> <span class="nx">props</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">onFrameLoad</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;			<span class="kd">var</span> <span class="nx">host</span> <span class="o">=</span> <span class="nx">$try</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;				<span class="k">return</span> <span class="nx">iframe</span><span class="p">.</span><span class="nx">contentWindow</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">host</span><span class="p">;</span>&#x000A;			<span class="p">});</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">host</span> <span class="o">&amp;&amp;</span> <span class="nx">host</span> <span class="o">==</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">host</span><span class="p">){</span>&#x000A;				<span class="kd">var</span> <span class="nx">win</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Window</span><span class="p">(</span><span class="nx">iframe</span><span class="p">.</span><span class="nx">contentWindow</span><span class="p">);</span>&#x000A;				<span class="kd">var</span> <span class="nx">doc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Document</span><span class="p">(</span><span class="nx">iframe</span><span class="p">.</span><span class="nx">contentWindow</span><span class="p">.</span><span class="nb">document</span><span class="p">);</span>&#x000A;				<span class="nx">$extend</span><span class="p">(</span><span class="nx">win</span><span class="p">.</span><span class="nx">Element</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Prototype</span><span class="p">);</span>&#x000A;			<span class="p">}</span>&#x000A;			<span class="nx">onload</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">iframe</span><span class="p">.</span><span class="nx">contentWindow</span><span class="p">,</span> <span class="nx">iframe</span><span class="p">.</span><span class="nx">contentWindow</span><span class="p">.</span><span class="nb">document</span><span class="p">);</span>&#x000A;		<span class="p">};</span>&#x000A;		<span class="p">(</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">frames</span><span class="p">[</span><span class="nx">props</span><span class="p">.</span><span class="nx">id</span><span class="p">])</span> <span class="o">?</span> <span class="nx">iframe</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="nx">onFrameLoad</span><span class="p">)</span> <span class="o">:</span> <span class="nx">onFrameLoad</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="nx">iframe</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="kd">var</span> <span class="nx">Elements</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Native</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">elements</span><span class="p">,</span> <span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="nx">options</span> <span class="o">=</span> <span class="nx">$extend</span><span class="p">({</span><span class="nx">ddup</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">cash</span><span class="o">:</span> <span class="kc">true</span><span class="p">},</span> <span class="nx">options</span><span class="p">);</span>&#x000A;		<span class="nx">elements</span> <span class="o">=</span> <span class="nx">elements</span> <span class="o">||</span> <span class="p">[];</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">ddup</span> <span class="o">||</span> <span class="nx">options</span><span class="p">.</span><span class="nx">cash</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">uniques</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">returned</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;			<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;				<span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="o">!</span><span class="nx">options</span><span class="p">.</span><span class="nx">cash</span><span class="p">);</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">ddup</span><span class="p">){</span>&#x000A;					<span class="k">if</span> <span class="p">(</span><span class="nx">uniques</span><span class="p">[</span><span class="nx">el</span><span class="p">.</span><span class="nx">uid</span><span class="p">])</span> <span class="k">continue</span><span class="p">;</span>&#x000A;					<span class="nx">uniques</span><span class="p">[</span><span class="nx">el</span><span class="p">.</span><span class="nx">uid</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>&#x000A;				<span class="p">}</span>&#x000A;				<span class="nx">returned</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>&#x000A;			<span class="p">}</span>&#x000A;			<span class="nx">elements</span> <span class="o">=</span> <span class="nx">returned</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">cash</span><span class="p">)</span> <span class="o">?</span> <span class="nx">$extend</span><span class="p">(</span><span class="nx">elements</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span> <span class="o">:</span> <span class="nx">elements</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Elements</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">filter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">filter</span><span class="p">,</span> <span class="nx">bind</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">filter</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="k">new</span> <span class="nx">Elements</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">filter</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>&#x000A;			<span class="k">return</span> <span class="nx">item</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">filter</span><span class="p">);</span>&#x000A;		<span class="p">}</span> <span class="o">:</span> <span class="nx">filter</span><span class="p">,</span> <span class="nx">bind</span><span class="p">));</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Elements</span><span class="p">.</span><span class="nx">multi</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">property</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		<span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">returns</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">property</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">arguments</span><span class="p">);</span>&#x000A;			<span class="nx">items</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">returns</span><span class="p">);</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">elements</span><span class="p">)</span> <span class="nx">elements</span> <span class="o">=</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">returns</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;element&#39;</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">elements</span><span class="p">)</span> <span class="o">?</span> <span class="k">new</span> <span class="nx">Elements</span><span class="p">(</span><span class="nx">items</span><span class="p">)</span> <span class="o">:</span> <span class="nx">items</span><span class="p">;</span>&#x000A;	<span class="p">};</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Window</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">$</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">el</span> <span class="o">&amp;&amp;</span> <span class="nx">el</span><span class="p">.</span><span class="nx">$family</span> <span class="o">&amp;&amp;</span> <span class="nx">el</span><span class="p">.</span><span class="nx">uid</span><span class="p">)</span> <span class="k">return</span> <span class="nx">el</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">$type</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">$</span><span class="p">[</span><span class="nx">type</span><span class="p">])</span> <span class="o">?</span> <span class="nx">$</span><span class="p">[</span><span class="nx">type</span><span class="p">](</span><span class="nx">el</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nb">document</span><span class="p">)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">$$</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElements</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		<span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">flatten</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>&#x000A;			<span class="k">switch</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">item</span><span class="p">)){</span>&#x000A;				<span class="k">case</span> <span class="s1">&#39;element&#39;</span><span class="o">:</span> <span class="nx">item</span> <span class="o">=</span> <span class="p">[</span><span class="nx">item</span><span class="p">];</span> <span class="k">break</span><span class="p">;</span>&#x000A;				<span class="k">case</span> <span class="s1">&#39;string&#39;</span><span class="o">:</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElements</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>&#x000A;				<span class="k">default</span><span class="o">:</span> <span class="nx">item</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>&#x000A;			<span class="p">}</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">new</span> <span class="nx">Elements</span><span class="p">(</span><span class="nx">elements</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getDocument</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nb">document</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getWindow</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">$</span><span class="p">.</span><span class="nx">string</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">,</span> <span class="nx">doc</span><span class="p">){</span>&#x000A;	<span class="nx">id</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>&#x000A;	<span class="k">return</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">?</span> <span class="nx">$</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">$</span><span class="p">.</span><span class="nx">element</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;	<span class="nx">$uid</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">nocash</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">el</span><span class="p">.</span><span class="nx">$family</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="sr">/^object|embed$/i</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">tagName</span><span class="p">)){</span>&#x000A;		<span class="kd">var</span> <span class="nx">proto</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Prototype</span><span class="p">;</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">proto</span><span class="p">)</span> <span class="nx">el</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span> <span class="o">=</span> <span class="nx">proto</span><span class="p">[</span><span class="nx">p</span><span class="p">];</span>&#x000A;	<span class="p">};</span>&#x000A;	<span class="k">return</span> <span class="nx">el</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">$</span><span class="p">.</span><span class="nx">object</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">,</span> <span class="nx">doc</span><span class="p">){</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">toElement</span><span class="p">)</span> <span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">toElement</span><span class="p">(</span><span class="nx">doc</span><span class="p">),</span> <span class="nx">nocash</span><span class="p">);</span>&#x000A;	<span class="k">return</span> <span class="kc">null</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">$</span><span class="p">.</span><span class="nx">textnode</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">whitespace</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nb">window</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nb">document</span> <span class="o">=</span> <span class="nx">$arguments</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>&#x000A;&#x000A;<span class="nx">Native</span><span class="p">.</span><span class="nx">implement</span><span class="p">([</span><span class="nx">Element</span><span class="p">,</span> <span class="nx">Document</span><span class="p">],</span> <span class="p">{</span>&#x000A;&#x000A;	<span class="nx">getElement</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getElements</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="kc">true</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getElements</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tags</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;		<span class="nx">tags</span> <span class="o">=</span> <span class="nx">tags</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		<span class="kd">var</span> <span class="nx">ddup</span> <span class="o">=</span> <span class="p">(</span><span class="nx">tags</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">);</span>&#x000A;		<span class="nx">tags</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">tag</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">partial</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">tag</span><span class="p">.</span><span class="nx">trim</span><span class="p">());</span>&#x000A;			<span class="p">(</span><span class="nx">ddup</span><span class="p">)</span> <span class="o">?</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">partial</span><span class="p">)</span> <span class="o">:</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nx">partial</span><span class="p">;</span>&#x000A;		<span class="p">},</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">new</span> <span class="nx">Elements</span><span class="p">(</span><span class="nx">elements</span><span class="p">,</span> <span class="p">{</span><span class="nx">ddup</span><span class="o">:</span> <span class="nx">ddup</span><span class="p">,</span> <span class="nx">cash</span><span class="o">:</span> <span class="o">!</span><span class="nx">nocash</span><span class="p">});</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Storage</span> <span class="o">=</span> <span class="p">{</span>&#x000A;&#x000A;	<span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">uid</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">uid</span><span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">uid</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}));</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Inserters</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">before</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">element</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="nx">element</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">element</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">after</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">element</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">element</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">;</span>&#x000A;		<span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="o">?</span> <span class="nx">element</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="o">:</span> <span class="nx">element</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">bottom</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">element</span><span class="p">){</span>&#x000A;		<span class="nx">element</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">top</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">element</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">first</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>&#x000A;		<span class="p">(</span><span class="nx">first</span><span class="p">)</span> <span class="o">?</span> <span class="nx">element</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">first</span><span class="p">)</span> <span class="o">:</span> <span class="nx">element</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">context</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Inserters</span><span class="p">.</span><span class="nx">inside</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Inserters</span><span class="p">.</span><span class="nx">bottom</span><span class="p">;</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Inserters</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>&#x000A;&#x000A;	<span class="kd">var</span> <span class="nx">Key</span> <span class="o">=</span> <span class="nx">key</span><span class="p">.</span><span class="nx">capitalize</span><span class="p">();</span>&#x000A;&#x000A;	<span class="nx">Element</span><span class="p">.</span><span class="nx">implement</span><span class="p">(</span><span class="s1">&#39;inject&#39;</span> <span class="o">+</span> <span class="nx">Key</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>&#x000A;		<span class="nx">value</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="kc">true</span><span class="p">));</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">});</span>&#x000A;&#x000A;	<span class="nx">Element</span><span class="p">.</span><span class="nx">implement</span><span class="p">(</span><span class="s1">&#39;grab&#39;</span> <span class="o">+</span> <span class="nx">Key</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>&#x000A;		<span class="nx">value</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="kc">true</span><span class="p">),</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">});</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">getDocument</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getWindow</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">getWindow</span><span class="p">();</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getElementById</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">el</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">el</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span> <span class="nx">parent</span> <span class="o">!=</span> <span class="k">this</span><span class="p">;</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">parent</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">$</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">prop</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="k">switch</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">prop</span><span class="p">)){</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;object&#39;</span><span class="o">:</span>&#x000A;				<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">prop</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">prop</span><span class="p">[</span><span class="nx">p</span><span class="p">]);</span>&#x000A;				<span class="k">break</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;string&#39;</span><span class="o">:</span>&#x000A;				<span class="kd">var</span> <span class="nx">property</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">prop</span><span class="p">);</span>&#x000A;				<span class="p">(</span><span class="nx">property</span> <span class="o">&amp;&amp;</span> <span class="nx">property</span><span class="p">.</span><span class="nx">set</span><span class="p">)</span> <span class="o">?</span> <span class="nx">property</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">setProperty</span><span class="p">(</span><span class="nx">prop</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">prop</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">property</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">prop</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">property</span> <span class="o">&amp;&amp;</span> <span class="nx">property</span><span class="p">.</span><span class="nx">get</span><span class="p">)</span> <span class="o">?</span> <span class="nx">property</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">getProperty</span><span class="p">(</span><span class="nx">prop</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">erase</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">prop</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">property</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">prop</span><span class="p">);</span>&#x000A;		<span class="p">(</span><span class="nx">property</span> <span class="o">&amp;&amp;</span> <span class="nx">property</span><span class="p">.</span><span class="nx">erase</span><span class="p">)</span> <span class="o">?</span> <span class="nx">property</span><span class="p">.</span><span class="nx">erase</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeProperty</span><span class="p">(</span><span class="nx">prop</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">match</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tag</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="o">!</span><span class="nx">tag</span> <span class="o">||</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;tag&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="nx">tag</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">inject</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">where</span><span class="p">){</span>&#x000A;		<span class="nx">Element</span><span class="p">.</span><span class="nx">Inserters</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">where</span> <span class="o">||</span> <span class="s1">&#39;bottom&#39;</span><span class="p">)(</span><span class="k">this</span><span class="p">,</span> <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="kc">true</span><span class="p">));</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">wraps</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">where</span><span class="p">){</span>&#x000A;		<span class="nx">el</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">replaces</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">grab</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">where</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">grab</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">where</span><span class="p">){</span>&#x000A;		<span class="nx">Element</span><span class="p">.</span><span class="nx">Inserters</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">where</span> <span class="o">||</span> <span class="s1">&#39;bottom&#39;</span><span class="p">)(</span><span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="kc">true</span><span class="p">),</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">appendText</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">where</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">grab</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getDocument</span><span class="p">().</span><span class="nx">newTextNode</span><span class="p">(</span><span class="nx">text</span><span class="p">),</span> <span class="nx">where</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">adopt</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="nb">Array</span><span class="p">.</span><span class="nx">flatten</span><span class="p">(</span><span class="nx">arguments</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">){</span>&#x000A;			<span class="nx">element</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>&#x000A;		<span class="p">},</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">dispose</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">clone</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">contents</span><span class="p">,</span> <span class="nx">keepid</span><span class="p">){</span>&#x000A;		<span class="k">switch</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="k">this</span><span class="p">)){</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;element&#39;</span><span class="o">:</span>&#x000A;				<span class="kd">var</span> <span class="nx">attributes</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;				<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">){</span>&#x000A;					<span class="kd">var</span> <span class="nx">attribute</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">attribute</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>&#x000A;					<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="sr">/input/i</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tagName</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="sr">/width|height/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>&#x000A;					<span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="p">(</span><span class="nx">key</span> <span class="o">==</span> <span class="s1">&#39;style&#39;</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">:</span> <span class="nx">attribute</span><span class="p">.</span><span class="nx">nodeValue</span><span class="p">;</span>&#x000A;					<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$chk</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">||</span> <span class="nx">key</span> <span class="o">==</span> <span class="s1">&#39;uid&#39;</span> <span class="o">||</span> <span class="p">(</span><span class="nx">key</span> <span class="o">==</span> <span class="s1">&#39;id&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">keepid</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>&#x000A;					<span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">!=</span> <span class="s1">&#39;inherit&#39;</span> <span class="o">&amp;&amp;</span> <span class="p">[</span><span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;number&#39;</span><span class="p">].</span><span class="nx">contains</span><span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">value</span><span class="p">)))</span> <span class="nx">attributes</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>&#x000A;				<span class="p">}</span>&#x000A;				<span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">(),</span> <span class="nx">attributes</span><span class="p">);</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">contents</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">){</span>&#x000A;					<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">k</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">k</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;						<span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">keepid</span><span class="p">);</span>&#x000A;						<span class="k">if</span> <span class="p">(</span><span class="nx">child</span><span class="p">)</span> <span class="nx">element</span><span class="p">.</span><span class="nx">grab</span><span class="p">(</span><span class="nx">child</span><span class="p">);</span>&#x000A;					<span class="p">}</span>&#x000A;				<span class="p">}</span>&#x000A;				<span class="k">return</span> <span class="nx">element</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;textnode&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="nb">document</span><span class="p">.</span><span class="nx">newTextNode</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">nodeValue</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="kc">null</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">replaces</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>&#x000A;		<span class="nx">el</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>&#x000A;		<span class="nx">el</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">replaceChild</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">el</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">hasClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">className</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">className</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">addClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">className</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">))</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">className</span><span class="p">).</span><span class="nx">clean</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">removeClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">className</span><span class="p">){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;(^|\\s)&#39;</span> <span class="o">+</span> <span class="nx">className</span> <span class="o">+</span> <span class="s1">&#39;(?:\\s|$)&#39;</span><span class="p">),</span> <span class="s1">&#39;$1&#39;</span><span class="p">).</span><span class="nx">clean</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">toggleClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">className</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">className</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">className</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">className</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getComputedStyle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">property</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">[</span><span class="nx">property</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">()];</span>&#x000A;		<span class="kd">var</span> <span class="nx">computed</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getWindow</span><span class="p">().</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">computed</span><span class="p">)</span> <span class="o">?</span> <span class="nx">computed</span><span class="p">.</span><span class="nx">getPropertyValue</span><span class="p">([</span><span class="nx">property</span><span class="p">.</span><span class="nx">hyphenate</span><span class="p">()])</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">empty</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="nx">$A</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">){</span>&#x000A;			<span class="nx">Browser</span><span class="p">.</span><span class="nx">freeMem</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>&#x000A;			<span class="nx">Element</span><span class="p">.</span><span class="nx">empty</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>&#x000A;			<span class="nx">Element</span><span class="p">.</span><span class="nx">dispose</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>&#x000A;		<span class="p">},</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="nx">Browser</span><span class="p">.</span><span class="nx">freeMem</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">dispose</span><span class="p">());</span>&#x000A;		<span class="k">return</span> <span class="kc">null</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getSelected</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">new</span> <span class="nx">Elements</span><span class="p">(</span><span class="nx">$A</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">option</span><span class="p">){</span>&#x000A;			<span class="k">return</span> <span class="nx">option</span><span class="p">.</span><span class="nx">selected</span><span class="p">;</span>&#x000A;		<span class="p">}));</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">toQueryString</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">queryString</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">getElements</span><span class="p">(</span><span class="s1">&#39;input, select, textarea&#39;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">el</span><span class="p">.</span><span class="nx">name</span> <span class="o">||</span> <span class="nx">el</span><span class="p">.</span><span class="nx">disabled</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>&#x000A;			<span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">tagName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;select&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">getSelected</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">opt</span><span class="p">){</span>&#x000A;				<span class="k">return</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>&#x000A;			<span class="p">})</span> <span class="o">:</span> <span class="p">((</span><span class="nx">el</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;radio&#39;</span> <span class="o">||</span> <span class="nx">el</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;checkbox&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">el</span><span class="p">.</span><span class="nx">checked</span><span class="p">)</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">el</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>&#x000A;			<span class="nx">$splat</span><span class="p">(</span><span class="nx">value</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">){</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="nx">queryString</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;=&#39;</span> <span class="o">+</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">val</span><span class="p">));</span>&#x000A;			<span class="p">});</span>&#x000A;		<span class="p">});</span>&#x000A;		<span class="k">return</span> <span class="nx">queryString</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getProperty</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attribute</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">EA</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Attributes</span><span class="p">,</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">EA</span><span class="p">.</span><span class="nx">Props</span><span class="p">[</span><span class="nx">attribute</span><span class="p">];</span>&#x000A;		<span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="nx">attribute</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">EA</span><span class="p">.</span><span class="nx">Bools</span><span class="p">[</span><span class="nx">attribute</span><span class="p">])</span> <span class="o">?</span> <span class="o">!!</span><span class="nx">value</span> <span class="o">:</span> <span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">?</span> <span class="nx">value</span> <span class="o">:</span> <span class="nx">value</span> <span class="o">||</span> <span class="kc">null</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getProperties</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">$A</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="nx">args</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">attr</span><span class="p">){</span>&#x000A;			<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getProperty</span><span class="p">(</span><span class="nx">attr</span><span class="p">);</span>&#x000A;		<span class="p">},</span> <span class="k">this</span><span class="p">).</span><span class="nx">associate</span><span class="p">(</span><span class="nx">args</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">setProperty</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attribute</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">EA</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Attributes</span><span class="p">,</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">EA</span><span class="p">.</span><span class="nx">Props</span><span class="p">[</span><span class="nx">attribute</span><span class="p">],</span> <span class="nx">hasValue</span> <span class="o">=</span> <span class="nx">$defined</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">key</span> <span class="o">&amp;&amp;</span> <span class="nx">EA</span><span class="p">.</span><span class="nx">Bools</span><span class="p">[</span><span class="nx">attribute</span><span class="p">])</span> <span class="nx">value</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span> <span class="o">||</span> <span class="o">!</span><span class="nx">hasValue</span><span class="p">)</span> <span class="o">?</span> <span class="kc">true</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hasValue</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeProperty</span><span class="p">(</span><span class="nx">attribute</span><span class="p">);</span>&#x000A;		<span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="nx">attribute</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">setProperties</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attributes</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">attribute</span> <span class="k">in</span> <span class="nx">attributes</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">setProperty</span><span class="p">(</span><span class="nx">attribute</span><span class="p">,</span> <span class="nx">attributes</span><span class="p">[</span><span class="nx">attribute</span><span class="p">]);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">removeProperty</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attribute</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">EA</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Attributes</span><span class="p">,</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">EA</span><span class="p">.</span><span class="nx">Props</span><span class="p">[</span><span class="nx">attribute</span><span class="p">],</span> <span class="nx">isBool</span> <span class="o">=</span> <span class="p">(</span><span class="nx">key</span> <span class="o">&amp;&amp;</span> <span class="nx">EA</span><span class="p">.</span><span class="nx">Bools</span><span class="p">[</span><span class="nx">attribute</span><span class="p">]);</span>&#x000A;		<span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">isBool</span><span class="p">)</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="nx">attribute</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">removeProperties</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="nb">Array</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeProperty</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;&#x000A;<span class="kd">var</span> <span class="nx">walk</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">walk</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">all</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;	<span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="nx">start</span> <span class="o">||</span> <span class="nx">walk</span><span class="p">];</span>&#x000A;	<span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;	<span class="k">while</span> <span class="p">(</span><span class="nx">el</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">match</span> <span class="o">||</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">match</span><span class="p">))){</span>&#x000A;			<span class="nx">elements</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">all</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="nx">el</span> <span class="o">=</span> <span class="nx">el</span><span class="p">[</span><span class="nx">walk</span><span class="p">];</span>&#x000A;	<span class="p">}</span>&#x000A;	<span class="k">return</span> <span class="p">(</span><span class="nx">all</span><span class="p">)</span> <span class="o">?</span> <span class="k">new</span> <span class="nx">Elements</span><span class="p">(</span><span class="nx">elements</span><span class="p">,</span> <span class="p">{</span><span class="nx">ddup</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">cash</span><span class="o">:</span> <span class="o">!</span><span class="nx">nocash</span><span class="p">})</span> <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="nx">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">nocash</span><span class="p">);</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">getPrevious</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">walk</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;previousSibling&#39;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getAllPrevious</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">walk</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;previousSibling&#39;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getNext</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">walk</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;nextSibling&#39;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getAllNext</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">walk</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;nextSibling&#39;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getFirst</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">walk</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;nextSibling&#39;</span><span class="p">,</span> <span class="s1">&#39;firstChild&#39;</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getLast</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">walk</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;previousSibling&#39;</span><span class="p">,</span> <span class="s1">&#39;lastChild&#39;</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getParent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">walk</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;parentNode&#39;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getParents</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">walk</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;parentNode&#39;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getChildren</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">walk</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;nextSibling&#39;</span><span class="p">,</span> <span class="s1">&#39;firstChild&#39;</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">hasChild</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>&#x000A;		<span class="nx">el</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="o">!!</span><span class="nx">el</span> <span class="o">&amp;&amp;</span> <span class="nx">$A</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">tagName</span><span class="p">)).</span><span class="nx">contains</span><span class="p">(</span><span class="nx">el</span><span class="p">));</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="p">})();</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Properties</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">;</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">style</span> <span class="o">=</span> <span class="p">{</span>&#x000A;&#x000A;	<span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">style</span><span class="p">){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="nx">style</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">erase</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">tag</span> <span class="o">=</span> <span class="p">{</span><span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;	<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">tagName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>&#x000A;<span class="p">}};</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="p">{</span><span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;	<span class="k">return</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">href</span><span class="p">)</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;^&#39;</span> <span class="o">+</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">protocol</span> <span class="o">+</span> <span class="s1">&#39;\/\/&#39;</span> <span class="o">+</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">host</span><span class="p">),</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>&#x000A;<span class="p">}};</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">html</span> <span class="o">=</span> <span class="p">{</span><span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;	<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">flatten</span><span class="p">(</span><span class="nx">arguments</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>&#x000A;<span class="p">}};</span>&#x000A;&#x000A;<span class="nx">Native</span><span class="p">.</span><span class="nx">implement</span><span class="p">([</span><span class="nx">Element</span><span class="p">,</span> <span class="nx">Window</span><span class="p">,</span> <span class="nx">Document</span><span class="p">],</span> <span class="p">{</span>&#x000A;&#x000A;	<span class="nx">addListener</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>&#x000A;		<span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span><span class="s1">&#39;on&#39;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">removeListener</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>&#x000A;		<span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">(</span><span class="s1">&#39;on&#39;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">retrieve</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">property</span><span class="p">,</span> <span class="nx">dflt</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">storage</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Storage</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">uid</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">prop</span> <span class="o">=</span> <span class="nx">storage</span><span class="p">[</span><span class="nx">property</span><span class="p">];</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">$defined</span><span class="p">(</span><span class="nx">dflt</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">$defined</span><span class="p">(</span><span class="nx">prop</span><span class="p">))</span> <span class="nx">prop</span> <span class="o">=</span> <span class="nx">storage</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">=</span> <span class="nx">dflt</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="nx">$pick</span><span class="p">(</span><span class="nx">prop</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">store</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">property</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">storage</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Storage</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">uid</span><span class="p">);</span>&#x000A;		<span class="nx">storage</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">eliminate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">property</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">storage</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Storage</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">uid</span><span class="p">);</span>&#x000A;		<span class="k">delete</span> <span class="nx">storage</span><span class="p">[</span><span class="nx">property</span><span class="p">];</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Attributes</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">({</span>&#x000A;	<span class="nx">Props</span><span class="o">:</span> <span class="p">{</span><span class="s1">&#39;html&#39;</span><span class="o">:</span> <span class="s1">&#39;innerHTML&#39;</span><span class="p">,</span> <span class="s1">&#39;class&#39;</span><span class="o">:</span> <span class="s1">&#39;className&#39;</span><span class="p">,</span> <span class="s1">&#39;for&#39;</span><span class="o">:</span> <span class="s1">&#39;htmlFor&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="o">:</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;innerText&#39;</span> <span class="o">:</span> <span class="s1">&#39;textContent&#39;</span><span class="p">},</span>&#x000A;	<span class="nx">Bools</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;compact&#39;</span><span class="p">,</span> <span class="s1">&#39;nowrap&#39;</span><span class="p">,</span> <span class="s1">&#39;ismap&#39;</span><span class="p">,</span> <span class="s1">&#39;declare&#39;</span><span class="p">,</span> <span class="s1">&#39;noshade&#39;</span><span class="p">,</span> <span class="s1">&#39;checked&#39;</span><span class="p">,</span> <span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="s1">&#39;readonly&#39;</span><span class="p">,</span> <span class="s1">&#39;multiple&#39;</span><span class="p">,</span> <span class="s1">&#39;selected&#39;</span><span class="p">,</span> <span class="s1">&#39;noresize&#39;</span><span class="p">,</span> <span class="s1">&#39;defer&#39;</span><span class="p">],</span>&#x000A;	<span class="nx">Camels</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;accessKey&#39;</span><span class="p">,</span> <span class="s1">&#39;cellPadding&#39;</span><span class="p">,</span> <span class="s1">&#39;cellSpacing&#39;</span><span class="p">,</span> <span class="s1">&#39;colSpan&#39;</span><span class="p">,</span> <span class="s1">&#39;frameBorder&#39;</span><span class="p">,</span> <span class="s1">&#39;maxLength&#39;</span><span class="p">,</span> <span class="s1">&#39;readOnly&#39;</span><span class="p">,</span> <span class="s1">&#39;rowSpan&#39;</span><span class="p">,</span> <span class="s1">&#39;tabIndex&#39;</span><span class="p">,</span> <span class="s1">&#39;useMap&#39;</span><span class="p">]</span>&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Browser</span><span class="p">.</span><span class="nx">freeMem</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="sr">/object/i</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">tagName</span><span class="p">)){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">item</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">item</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="nx">item</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span> <span class="o">=</span> <span class="nx">$empty</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="nx">Element</span><span class="p">.</span><span class="nx">dispose</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">uid</span> <span class="o">&amp;&amp;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">removeEvents</span><span class="p">)</span> <span class="nx">item</span><span class="p">.</span><span class="nx">removeEvents</span><span class="p">();</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">EA</span><span class="p">){</span>&#x000A;&#x000A;	<span class="kd">var</span> <span class="nx">EAB</span> <span class="o">=</span> <span class="nx">EA</span><span class="p">.</span><span class="nx">Bools</span><span class="p">,</span> <span class="nx">EAC</span> <span class="o">=</span> <span class="nx">EA</span><span class="p">.</span><span class="nx">Camels</span><span class="p">;</span>&#x000A;	<span class="nx">EA</span><span class="p">.</span><span class="nx">Bools</span> <span class="o">=</span> <span class="nx">EAB</span> <span class="o">=</span> <span class="nx">EAB</span><span class="p">.</span><span class="nx">associate</span><span class="p">(</span><span class="nx">EAB</span><span class="p">);</span>&#x000A;	<span class="nx">Hash</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Hash</span><span class="p">.</span><span class="nx">combine</span><span class="p">(</span><span class="nx">EA</span><span class="p">.</span><span class="nx">Props</span><span class="p">,</span> <span class="nx">EAB</span><span class="p">),</span> <span class="nx">EAC</span><span class="p">.</span><span class="nx">associate</span><span class="p">(</span><span class="nx">EAC</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">v</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>&#x000A;	<span class="p">})));</span>&#x000A;	<span class="nx">EA</span><span class="p">.</span><span class="nx">erase</span><span class="p">(</span><span class="s1">&#39;Camels&#39;</span><span class="p">);</span>&#x000A;&#x000A;<span class="p">})(</span><span class="nx">Element</span><span class="p">.</span><span class="nx">Attributes</span><span class="p">);</span>&#x000A;&#x000A;<span class="nb">window</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s1">&#39;unload&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;	<span class="nb">window</span><span class="p">.</span><span class="nx">removeListener</span><span class="p">(</span><span class="s1">&#39;unload&#39;</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">);</span>&#x000A;	<span class="nb">document</span><span class="p">.</span><span class="nx">purge</span><span class="p">();</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span><span class="p">)</span> <span class="nx">CollectGarbage</span><span class="p">();</span>&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Element.Event.js
      Contains Element methods for dealing with events, and custom Events.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>1824</li>
        <li>1825</li>
        <li>1826</li>
        <li>1827</li>
        <li>1828</li>
        <li>1829</li>
        <li>1830</li>
        <li>1831</li>
        <li>1832</li>
        <li>1833</li>
        <li>1834</li>
        <li>1835</li>
        <li>1836</li>
        <li>1837</li>
        <li>1838</li>
        <li>1839</li>
        <li>1840</li>
        <li>1841</li>
        <li>1842</li>
        <li>1843</li>
        <li>1844</li>
        <li>1845</li>
        <li>1846</li>
        <li>1847</li>
        <li>1848</li>
        <li>1849</li>
        <li>1850</li>
        <li>1851</li>
        <li>1852</li>
        <li>1853</li>
        <li>1854</li>
        <li>1855</li>
        <li>1856</li>
        <li>1857</li>
        <li>1858</li>
        <li>1859</li>
        <li>1860</li>
        <li>1861</li>
        <li>1862</li>
        <li>1863</li>
        <li>1864</li>
        <li>1865</li>
        <li>1866</li>
        <li>1867</li>
        <li>1868</li>
        <li>1869</li>
        <li>1870</li>
        <li>1871</li>
        <li>1872</li>
        <li>1873</li>
        <li>1874</li>
        <li>1875</li>
        <li>1876</li>
        <li>1877</li>
        <li>1878</li>
        <li>1879</li>
        <li>1880</li>
        <li>1881</li>
        <li>1882</li>
        <li>1883</li>
        <li>1884</li>
        <li>1885</li>
        <li>1886</li>
        <li>1887</li>
        <li>1888</li>
        <li>1889</li>
        <li>1890</li>
        <li>1891</li>
        <li>1892</li>
        <li>1893</li>
        <li>1894</li>
        <li>1895</li>
        <li>1896</li>
        <li>1897</li>
        <li>1898</li>
        <li>1899</li>
        <li>1900</li>
        <li>1901</li>
        <li>1902</li>
        <li>1903</li>
        <li>1904</li>
        <li>1905</li>
        <li>1906</li>
        <li>1907</li>
        <li>1908</li>
        <li>1909</li>
        <li>1910</li>
        <li>1911</li>
        <li>1912</li>
        <li>1913</li>
        <li>1914</li>
        <li>1915</li>
        <li>1916</li>
        <li>1917</li>
        <li>1918</li>
        <li>1919</li>
        <li>1920</li>
        <li>1921</li>
        <li>1922</li>
        <li>1923</li>
        <li>1924</li>
        <li>1925</li>
        <li>1926</li>
        <li>1927</li>
        <li>1928</li>
        <li>1929</li>
        <li>1930</li>
        <li>1931</li>
        <li>1932</li>
        <li>1933</li>
        <li>1934</li>
        <li>1935</li>
        <li>1936</li>
        <li>1937</li>
        <li>1938</li>
        <li>1939</li>
        <li>1940</li>
        <li>1941</li>
        <li>1942</li>
        <li>1943</li>
        <li>1944</li>
        <li>1945</li>
        <li>1946</li>
        <li>1947</li>
        <li>1948</li>
        <li>1949</li>
        <li>1950</li>
        <li>1951</li>
        <li>1952</li>
        <li>1953</li>
        <li>1954</li>
        <li>1955</li>
        <li>1956</li>
        <li>1957</li>
        <li>1958</li>
      </ol>
      <code><div class="highlight"><pre><span class="nx">Element</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">events</span> <span class="o">=</span> <span class="p">{</span><span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">events</span><span class="p">){</span>&#x000A;	<span class="k">this</span><span class="p">.</span><span class="nx">addEvents</span><span class="p">(</span><span class="nx">events</span><span class="p">);</span>&#x000A;<span class="p">}};</span>&#x000A;&#x000A;<span class="nx">Native</span><span class="p">.</span><span class="nx">implement</span><span class="p">([</span><span class="nx">Element</span><span class="p">,</span> <span class="nx">Window</span><span class="p">,</span> <span class="nx">Document</span><span class="p">],</span> <span class="p">{</span>&#x000A;&#x000A;	<span class="nx">addEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">events</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;events&#39;</span><span class="p">,</span> <span class="p">{});</span>&#x000A;		<span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span> <span class="o">||</span> <span class="p">{</span><span class="s1">&#39;keys&#39;</span><span class="o">:</span> <span class="p">[],</span> <span class="s1">&#39;values&#39;</span><span class="o">:</span> <span class="p">[]};</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">keys</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">fn</span><span class="p">))</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">keys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">realType</span> <span class="o">=</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">custom</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Events</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">type</span><span class="p">),</span> <span class="nx">condition</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">custom</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">custom</span><span class="p">.</span><span class="nx">onAdd</span><span class="p">)</span> <span class="nx">custom</span><span class="p">.</span><span class="nx">onAdd</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">custom</span><span class="p">.</span><span class="nx">condition</span><span class="p">){</span>&#x000A;				<span class="nx">condition</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>&#x000A;					<span class="k">if</span> <span class="p">(</span><span class="nx">custom</span><span class="p">.</span><span class="nx">condition</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">event</span><span class="p">))</span> <span class="k">return</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">event</span><span class="p">);</span>&#x000A;					<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;				<span class="p">};</span>&#x000A;			<span class="p">}</span>&#x000A;			<span class="nx">realType</span> <span class="o">=</span> <span class="nx">custom</span><span class="p">.</span><span class="nx">base</span> <span class="o">||</span> <span class="nx">realType</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="kd">var</span> <span class="nx">defn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;			<span class="k">return</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">self</span><span class="p">);</span>&#x000A;		<span class="p">};</span>&#x000A;		<span class="kd">var</span> <span class="nx">nativeEvent</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">NativeEvents</span><span class="p">[</span><span class="nx">realType</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">nativeEvent</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">nativeEvent</span> <span class="o">==</span> <span class="mi">2</span><span class="p">){</span>&#x000A;				<span class="nx">defn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>&#x000A;					<span class="nx">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Event</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getWindow</span><span class="p">());</span>&#x000A;					<span class="k">if</span> <span class="p">(</span><span class="nx">condition</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">event</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="nx">event</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>&#x000A;				<span class="p">};</span>&#x000A;			<span class="p">}</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="nx">realType</span><span class="p">,</span> <span class="nx">defn</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">values</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">defn</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">removeEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">events</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;events&#39;</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">events</span> <span class="o">||</span> <span class="o">!</span><span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">])</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">pos</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">keys</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">pos</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">keys</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">pos</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>&#x000A;		<span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">values</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">pos</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>&#x000A;		<span class="kd">var</span> <span class="nx">custom</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Events</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">type</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">custom</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">custom</span><span class="p">.</span><span class="nx">onRemove</span><span class="p">)</span> <span class="nx">custom</span><span class="p">.</span><span class="nx">onRemove</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>&#x000A;			<span class="nx">type</span> <span class="o">=</span> <span class="nx">custom</span><span class="p">.</span><span class="nx">base</span> <span class="o">||</span> <span class="nx">type</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">Element</span><span class="p">.</span><span class="nx">NativeEvents</span><span class="p">[</span><span class="nx">type</span><span class="p">])</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeListener</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">addEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">events</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">event</span> <span class="k">in</span> <span class="nx">events</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">events</span><span class="p">[</span><span class="nx">event</span><span class="p">]);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">removeEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">events</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;events&#39;</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">events</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">type</span><span class="p">){</span>&#x000A;			<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">evType</span> <span class="k">in</span> <span class="nx">events</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeEvents</span><span class="p">(</span><span class="nx">evType</span><span class="p">);</span>&#x000A;			<span class="nx">events</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>&#x000A;		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">]){</span>&#x000A;			<span class="k">while</span> <span class="p">(</span><span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">keys</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeEvent</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>&#x000A;			<span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">fireEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">delay</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">events</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;events&#39;</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">events</span> <span class="o">||</span> <span class="o">!</span><span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">])</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="nx">events</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">keys</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>&#x000A;			<span class="nx">fn</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="s1">&#39;bind&#39;</span><span class="o">:</span> <span class="k">this</span><span class="p">,</span> <span class="s1">&#39;delay&#39;</span><span class="o">:</span> <span class="nx">delay</span><span class="p">,</span> <span class="s1">&#39;arguments&#39;</span><span class="o">:</span> <span class="nx">args</span><span class="p">})();</span>&#x000A;		<span class="p">},</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">cloneEvents</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">type</span><span class="p">){</span>&#x000A;		<span class="nx">from</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">from</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">fevents</span> <span class="o">=</span> <span class="nx">from</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;events&#39;</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">fevents</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">type</span><span class="p">){</span>&#x000A;			<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">evType</span> <span class="k">in</span> <span class="nx">fevents</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">cloneEvents</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">evType</span><span class="p">);</span>&#x000A;		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">fevents</span><span class="p">[</span><span class="nx">type</span><span class="p">]){</span>&#x000A;			<span class="nx">fevents</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">keys</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>&#x000A;				<span class="k">this</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>&#x000A;			<span class="p">},</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">NativeEvents</span> <span class="o">=</span> <span class="p">{</span>&#x000A;	<span class="nx">click</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">dblclick</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">mouseup</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">mousedown</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">contextmenu</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">//mouse buttons</span>&#x000A;	<span class="nx">mousewheel</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">DOMMouseScroll</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">//mouse wheel</span>&#x000A;	<span class="nx">mouseover</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">mouseout</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">mousemove</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">selectstart</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">selectend</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">//mouse movement</span>&#x000A;	<span class="nx">keydown</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">keypress</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">keyup</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">//keyboard</span>&#x000A;	<span class="nx">focus</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">blur</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">change</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">reset</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">select</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">submit</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">//form elements</span>&#x000A;	<span class="nx">load</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">unload</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">beforeunload</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">resize</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">move</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">DOMContentLoaded</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">readystatechange</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">//window</span>&#x000A;	<span class="nx">error</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">abort</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">scroll</span><span class="o">:</span> <span class="mi">1</span> <span class="c1">//misc</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;&#x000A;<span class="kd">var</span> <span class="nx">$check</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>&#x000A;	<span class="kd">var</span> <span class="nx">related</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span><span class="p">;</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="nx">related</span> <span class="o">==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;	<span class="k">if</span> <span class="p">(</span><span class="nx">related</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;	<span class="k">return</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;document&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">related</span> <span class="o">!=</span> <span class="k">this</span> <span class="o">&amp;&amp;</span> <span class="nx">related</span><span class="p">.</span><span class="nx">prefix</span> <span class="o">!=</span> <span class="s1">&#39;xul&#39;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">hasChild</span><span class="p">(</span><span class="nx">related</span><span class="p">));</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Events</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">mouseenter</span><span class="o">:</span> <span class="p">{</span>&#x000A;		<span class="nx">base</span><span class="o">:</span> <span class="s1">&#39;mouseover&#39;</span><span class="p">,</span>&#x000A;		<span class="nx">condition</span><span class="o">:</span> <span class="nx">$check</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">mouseleave</span><span class="o">:</span> <span class="p">{</span>&#x000A;		<span class="nx">base</span><span class="o">:</span> <span class="s1">&#39;mouseout&#39;</span><span class="p">,</span>&#x000A;		<span class="nx">condition</span><span class="o">:</span> <span class="nx">$check</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">mousewheel</span><span class="o">:</span> <span class="p">{</span>&#x000A;		<span class="nx">base</span><span class="o">:</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">gecko</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;DOMMouseScroll&#39;</span> <span class="o">:</span> <span class="s1">&#39;mousewheel&#39;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="p">})();</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Element.Style.js
      Contains methods for interacting with the styles of Elements in a fashionable way.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>1968</li>
        <li>1969</li>
        <li>1970</li>
        <li>1971</li>
        <li>1972</li>
        <li>1973</li>
        <li>1974</li>
        <li>1975</li>
        <li>1976</li>
        <li>1977</li>
        <li>1978</li>
        <li>1979</li>
        <li>1980</li>
        <li>1981</li>
        <li>1982</li>
        <li>1983</li>
        <li>1984</li>
        <li>1985</li>
        <li>1986</li>
        <li>1987</li>
        <li>1988</li>
        <li>1989</li>
        <li>1990</li>
        <li>1991</li>
        <li>1992</li>
        <li>1993</li>
        <li>1994</li>
        <li>1995</li>
        <li>1996</li>
        <li>1997</li>
        <li>1998</li>
        <li>1999</li>
        <li>2000</li>
        <li>2001</li>
        <li>2002</li>
        <li>2003</li>
        <li>2004</li>
        <li>2005</li>
        <li>2006</li>
        <li>2007</li>
        <li>2008</li>
        <li>2009</li>
        <li>2010</li>
        <li>2011</li>
        <li>2012</li>
        <li>2013</li>
        <li>2014</li>
        <li>2015</li>
        <li>2016</li>
        <li>2017</li>
        <li>2018</li>
        <li>2019</li>
        <li>2020</li>
        <li>2021</li>
        <li>2022</li>
        <li>2023</li>
        <li>2024</li>
        <li>2025</li>
        <li>2026</li>
        <li>2027</li>
        <li>2028</li>
        <li>2029</li>
        <li>2030</li>
        <li>2031</li>
        <li>2032</li>
        <li>2033</li>
        <li>2034</li>
        <li>2035</li>
        <li>2036</li>
        <li>2037</li>
        <li>2038</li>
        <li>2039</li>
        <li>2040</li>
        <li>2041</li>
        <li>2042</li>
        <li>2043</li>
        <li>2044</li>
        <li>2045</li>
        <li>2046</li>
        <li>2047</li>
        <li>2048</li>
        <li>2049</li>
        <li>2050</li>
        <li>2051</li>
        <li>2052</li>
        <li>2053</li>
        <li>2054</li>
        <li>2055</li>
        <li>2056</li>
        <li>2057</li>
        <li>2058</li>
        <li>2059</li>
        <li>2060</li>
        <li>2061</li>
        <li>2062</li>
        <li>2063</li>
        <li>2064</li>
        <li>2065</li>
        <li>2066</li>
        <li>2067</li>
        <li>2068</li>
        <li>2069</li>
        <li>2070</li>
        <li>2071</li>
        <li>2072</li>
        <li>2073</li>
        <li>2074</li>
        <li>2075</li>
        <li>2076</li>
        <li>2077</li>
        <li>2078</li>
        <li>2079</li>
        <li>2080</li>
        <li>2081</li>
        <li>2082</li>
        <li>2083</li>
        <li>2084</li>
        <li>2085</li>
        <li>2086</li>
        <li>2087</li>
        <li>2088</li>
        <li>2089</li>
        <li>2090</li>
        <li>2091</li>
        <li>2092</li>
        <li>2093</li>
        <li>2094</li>
        <li>2095</li>
        <li>2096</li>
        <li>2097</li>
        <li>2098</li>
        <li>2099</li>
      </ol>
      <code><div class="highlight"><pre><span class="nx">Element</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">styles</span> <span class="o">=</span> <span class="p">{</span><span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">styles</span><span class="p">){</span>&#x000A;	<span class="k">this</span><span class="p">.</span><span class="nx">setStyles</span><span class="p">(</span><span class="nx">styles</span><span class="p">);</span>&#x000A;<span class="p">}};</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">opacity</span> <span class="o">=</span> <span class="p">{</span>&#x000A;&#x000A;	<span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">opacity</span><span class="p">,</span> <span class="nx">novisibility</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">novisibility</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">opacity</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">visibility</span> <span class="o">!=</span> <span class="s1">&#39;hidden&#39;</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">visibility</span> <span class="o">=</span> <span class="s1">&#39;hidden&#39;</span><span class="p">;</span>&#x000A;			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">visibility</span> <span class="o">!=</span> <span class="s1">&#39;visible&#39;</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">visibility</span> <span class="o">=</span> <span class="s1">&#39;visible&#39;</span><span class="p">;</span>&#x000A;			<span class="p">}</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">currentStyle</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">.</span><span class="nx">hasLayout</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">zoom</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">filter</span> <span class="o">=</span> <span class="p">(</span><span class="nx">opacity</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;&#39;</span> <span class="o">:</span> <span class="s1">&#39;alpha(opacity=&#39;</span> <span class="o">+</span> <span class="nx">opacity</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span> <span class="o">=</span> <span class="nx">opacity</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="nx">opacity</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;	&#x000A;	<span class="nx">setOpacity</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">getOpacity</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">setStyle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">property</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="k">switch</span> <span class="p">(</span><span class="nx">property</span><span class="p">){</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;opacity&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">value</span><span class="p">));</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;float&#39;</span><span class="o">:</span> <span class="nx">property</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;styleFloat&#39;</span> <span class="o">:</span> <span class="s1">&#39;cssFloat&#39;</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="nx">property</span> <span class="o">=</span> <span class="nx">property</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">();</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;string&#39;</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Element</span><span class="p">.</span><span class="nx">Styles</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">property</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;@&#39;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>&#x000A;			<span class="nx">value</span> <span class="o">=</span> <span class="nx">$splat</span><span class="p">(</span><span class="nx">value</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">map</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>&#x000A;				<span class="k">return</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">map</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">val</span><span class="p">))</span> <span class="o">:</span> <span class="nx">val</span><span class="p">;</span>&#x000A;			<span class="p">}).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>&#x000A;		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">==</span> <span class="nb">String</span><span class="p">(</span><span class="nb">Number</span><span class="p">(</span><span class="nx">value</span><span class="p">))){</span>&#x000A;			<span class="nx">value</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getStyle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">property</span><span class="p">){</span>&#x000A;		<span class="k">switch</span> <span class="p">(</span><span class="nx">property</span><span class="p">){</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;opacity&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">);</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;float&#39;</span><span class="o">:</span> <span class="nx">property</span> <span class="o">=</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;styleFloat&#39;</span> <span class="o">:</span> <span class="s1">&#39;cssFloat&#39;</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="nx">property</span> <span class="o">=</span> <span class="nx">property</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">();</span>&#x000A;		<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">property</span><span class="p">];</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$chk</span><span class="p">(</span><span class="nx">result</span><span class="p">)){</span>&#x000A;			<span class="nx">result</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;			<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">style</span> <span class="k">in</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">ShortStyles</span><span class="p">){</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">property</span> <span class="o">!=</span> <span class="nx">style</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>&#x000A;				<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">s</span> <span class="k">in</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">ShortStyles</span><span class="p">[</span><span class="nx">style</span><span class="p">])</span> <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getStyle</span><span class="p">(</span><span class="nx">s</span><span class="p">));</span>&#x000A;				<span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>&#x000A;			<span class="p">}</span>&#x000A;			<span class="nx">result</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">property</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">){</span>&#x000A;			<span class="nx">result</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>&#x000A;			<span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/rgba?\([\d\s,]+\)/</span><span class="p">);</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">color</span><span class="p">)</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">color</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">color</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">rgbToHex</span><span class="p">());</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">presto</span> <span class="o">||</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">$chk</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">result</span><span class="p">)))){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">property</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="sr">/^(height|width)$/</span><span class="p">)){</span>&#x000A;				<span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="p">(</span><span class="nx">property</span> <span class="o">==</span> <span class="s1">&#39;width&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]</span> <span class="o">:</span> <span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">],</span> <span class="nx">size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>&#x000A;				<span class="nx">values</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>&#x000A;					<span class="nx">size</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getStyle</span><span class="p">(</span><span class="s1">&#39;border-&#39;</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="s1">&#39;-width&#39;</span><span class="p">).</span><span class="nx">toInt</span><span class="p">()</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">getStyle</span><span class="p">(</span><span class="s1">&#39;padding-&#39;</span> <span class="o">+</span> <span class="nx">value</span><span class="p">).</span><span class="nx">toInt</span><span class="p">();</span>&#x000A;				<span class="p">},</span> <span class="k">this</span><span class="p">);</span>&#x000A;				<span class="k">return</span> <span class="k">this</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span> <span class="o">+</span> <span class="nx">property</span><span class="p">.</span><span class="nx">capitalize</span><span class="p">()]</span> <span class="o">-</span> <span class="nx">size</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>&#x000A;			<span class="p">}</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">presto</span> <span class="o">&amp;&amp;</span> <span class="nb">String</span><span class="p">(</span><span class="nx">result</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;px&#39;</span><span class="p">))</span> <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">property</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="sr">/(border(.+)Width|margin|padding)/</span><span class="p">))</span> <span class="k">return</span> <span class="s1">&#39;0px&#39;</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">result</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">setStyles</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">styles</span><span class="p">){</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">style</span> <span class="k">in</span> <span class="nx">styles</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="nx">style</span><span class="p">,</span> <span class="nx">styles</span><span class="p">[</span><span class="nx">style</span><span class="p">]);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getStyles</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;		<span class="nb">Array</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">){</span>&#x000A;			<span class="nx">result</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getStyle</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>&#x000A;		<span class="p">},</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="nx">result</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Styles</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">({</span>&#x000A;	<span class="nx">left</span><span class="o">:</span> <span class="s1">&#39;@px&#39;</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="s1">&#39;@px&#39;</span><span class="p">,</span> <span class="nx">bottom</span><span class="o">:</span> <span class="s1">&#39;@px&#39;</span><span class="p">,</span> <span class="nx">right</span><span class="o">:</span> <span class="s1">&#39;@px&#39;</span><span class="p">,</span>&#x000A;	<span class="nx">width</span><span class="o">:</span> <span class="s1">&#39;@px&#39;</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="s1">&#39;@px&#39;</span><span class="p">,</span> <span class="nx">maxWidth</span><span class="o">:</span> <span class="s1">&#39;@px&#39;</span><span class="p">,</span> <span class="nx">maxHeight</span><span class="o">:</span> <span class="s1">&#39;@px&#39;</span><span class="p">,</span> <span class="nx">minWidth</span><span class="o">:</span> <span class="s1">&#39;@px&#39;</span><span class="p">,</span> <span class="nx">minHeight</span><span class="o">:</span> <span class="s1">&#39;@px&#39;</span><span class="p">,</span>&#x000A;	<span class="nx">backgroundColor</span><span class="o">:</span> <span class="s1">&#39;rgb(@, @, @)&#39;</span><span class="p">,</span> <span class="nx">backgroundPosition</span><span class="o">:</span> <span class="s1">&#39;@px @px&#39;</span><span class="p">,</span> <span class="nx">color</span><span class="o">:</span> <span class="s1">&#39;rgb(@, @, @)&#39;</span><span class="p">,</span>&#x000A;	<span class="nx">fontSize</span><span class="o">:</span> <span class="s1">&#39;@px&#39;</span><span class="p">,</span> <span class="nx">letterSpacing</span><span class="o">:</span> <span class="s1">&#39;@px&#39;</span><span class="p">,</span> <span class="nx">lineHeight</span><span class="o">:</span> <span class="s1">&#39;@px&#39;</span><span class="p">,</span> <span class="nx">clip</span><span class="o">:</span> <span class="s1">&#39;rect(@px @px @px @px)&#39;</span><span class="p">,</span>&#x000A;	<span class="nx">margin</span><span class="o">:</span> <span class="s1">&#39;@px @px @px @px&#39;</span><span class="p">,</span> <span class="nx">padding</span><span class="o">:</span> <span class="s1">&#39;@px @px @px @px&#39;</span><span class="p">,</span> <span class="nx">border</span><span class="o">:</span> <span class="s1">&#39;@px @ rgb(@, @, @) @px @ rgb(@, @, @) @px @ rgb(@, @, @)&#39;</span><span class="p">,</span>&#x000A;	<span class="nx">borderWidth</span><span class="o">:</span> <span class="s1">&#39;@px @px @px @px&#39;</span><span class="p">,</span> <span class="nx">borderStyle</span><span class="o">:</span> <span class="s1">&#39;@ @ @ @&#39;</span><span class="p">,</span> <span class="nx">borderColor</span><span class="o">:</span> <span class="s1">&#39;rgb(@, @, @) rgb(@, @, @) rgb(@, @, @) rgb(@, @, @)&#39;</span><span class="p">,</span>&#x000A;	<span class="nx">zIndex</span><span class="o">:</span> <span class="s1">&#39;@&#39;</span><span class="p">,</span> <span class="s1">&#39;zoom&#39;</span><span class="o">:</span> <span class="s1">&#39;@&#39;</span><span class="p">,</span> <span class="nx">fontWeight</span><span class="o">:</span> <span class="s1">&#39;@&#39;</span><span class="p">,</span> <span class="nx">textIndent</span><span class="o">:</span> <span class="s1">&#39;@px&#39;</span><span class="p">,</span> <span class="nx">opacity</span><span class="o">:</span> <span class="s1">&#39;@&#39;</span>&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">ShortStyles</span> <span class="o">=</span> <span class="p">{</span><span class="nx">margin</span><span class="o">:</span> <span class="p">{},</span> <span class="nx">padding</span><span class="o">:</span> <span class="p">{},</span> <span class="nx">border</span><span class="o">:</span> <span class="p">{},</span> <span class="nx">borderWidth</span><span class="o">:</span> <span class="p">{},</span> <span class="nx">borderStyle</span><span class="o">:</span> <span class="p">{},</span> <span class="nx">borderColor</span><span class="o">:</span> <span class="p">{}};</span>&#x000A;&#x000A;<span class="p">[</span><span class="s1">&#39;Top&#39;</span><span class="p">,</span> <span class="s1">&#39;Right&#39;</span><span class="p">,</span> <span class="s1">&#39;Bottom&#39;</span><span class="p">,</span> <span class="s1">&#39;Left&#39;</span><span class="p">].</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">direction</span><span class="p">){</span>&#x000A;	<span class="kd">var</span> <span class="nx">Short</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">ShortStyles</span><span class="p">;</span>&#x000A;	<span class="kd">var</span> <span class="nx">All</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">Styles</span><span class="p">;</span>&#x000A;	<span class="p">[</span><span class="s1">&#39;margin&#39;</span><span class="p">,</span> <span class="s1">&#39;padding&#39;</span><span class="p">].</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">style</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">sd</span> <span class="o">=</span> <span class="nx">style</span> <span class="o">+</span> <span class="nx">direction</span><span class="p">;</span>&#x000A;		<span class="nx">Short</span><span class="p">[</span><span class="nx">style</span><span class="p">][</span><span class="nx">sd</span><span class="p">]</span> <span class="o">=</span> <span class="nx">All</span><span class="p">[</span><span class="nx">sd</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;@px&#39;</span><span class="p">;</span>&#x000A;	<span class="p">});</span>&#x000A;	<span class="kd">var</span> <span class="nx">bd</span> <span class="o">=</span> <span class="s1">&#39;border&#39;</span> <span class="o">+</span> <span class="nx">direction</span><span class="p">;</span>&#x000A;	<span class="nx">Short</span><span class="p">.</span><span class="nx">border</span><span class="p">[</span><span class="nx">bd</span><span class="p">]</span> <span class="o">=</span> <span class="nx">All</span><span class="p">[</span><span class="nx">bd</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;@px @ rgb(@, @, @)&#39;</span><span class="p">;</span>&#x000A;	<span class="kd">var</span> <span class="nx">bdw</span> <span class="o">=</span> <span class="nx">bd</span> <span class="o">+</span> <span class="s1">&#39;Width&#39;</span><span class="p">,</span> <span class="nx">bds</span> <span class="o">=</span> <span class="nx">bd</span> <span class="o">+</span> <span class="s1">&#39;Style&#39;</span><span class="p">,</span> <span class="nx">bdc</span> <span class="o">=</span> <span class="nx">bd</span> <span class="o">+</span> <span class="s1">&#39;Color&#39;</span><span class="p">;</span>&#x000A;	<span class="nx">Short</span><span class="p">[</span><span class="nx">bd</span><span class="p">]</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;	<span class="nx">Short</span><span class="p">.</span><span class="nx">borderWidth</span><span class="p">[</span><span class="nx">bdw</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Short</span><span class="p">[</span><span class="nx">bd</span><span class="p">][</span><span class="nx">bdw</span><span class="p">]</span> <span class="o">=</span> <span class="nx">All</span><span class="p">[</span><span class="nx">bdw</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;@px&#39;</span><span class="p">;</span>&#x000A;	<span class="nx">Short</span><span class="p">.</span><span class="nx">borderStyle</span><span class="p">[</span><span class="nx">bds</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Short</span><span class="p">[</span><span class="nx">bd</span><span class="p">][</span><span class="nx">bds</span><span class="p">]</span> <span class="o">=</span> <span class="nx">All</span><span class="p">[</span><span class="nx">bds</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;@&#39;</span><span class="p">;</span>&#x000A;	<span class="nx">Short</span><span class="p">.</span><span class="nx">borderColor</span><span class="p">[</span><span class="nx">bdc</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Short</span><span class="p">[</span><span class="nx">bd</span><span class="p">][</span><span class="nx">bdc</span><span class="p">]</span> <span class="o">=</span> <span class="nx">All</span><span class="p">[</span><span class="nx">bdc</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;rgb(@, @, @)&#39;</span><span class="p">;</span>&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Element.Dimensions.js
      Contains methods to work with size, scroll, or positioning of Elements and the window object.</p>
      
      <p>License:
      MIT-style license.</p>
      
      <p>Credits:
      &ndash; Element positioning based on the <a href="http://qooxdoo.org/">qooxdoo</a> code and smart browser fixes, <a href="http://www.gnu.org/licenses/lgpl.html">LGPL License</a>.
      &ndash; Viewport dimensions based on <a href="http://developer.yahoo.com/yui/">YUI</a> code, <a href="http://developer.yahoo.com/yui/license.html">BSD License</a>.</p>
    </section>
    <figure>
      <ol>
        <li>2114</li>
        <li>2115</li>
        <li>2116</li>
        <li>2117</li>
        <li>2118</li>
        <li>2119</li>
        <li>2120</li>
        <li>2121</li>
        <li>2122</li>
        <li>2123</li>
        <li>2124</li>
        <li>2125</li>
        <li>2126</li>
        <li>2127</li>
        <li>2128</li>
        <li>2129</li>
        <li>2130</li>
        <li>2131</li>
        <li>2132</li>
        <li>2133</li>
        <li>2134</li>
        <li>2135</li>
        <li>2136</li>
        <li>2137</li>
        <li>2138</li>
        <li>2139</li>
        <li>2140</li>
        <li>2141</li>
        <li>2142</li>
        <li>2143</li>
        <li>2144</li>
        <li>2145</li>
        <li>2146</li>
        <li>2147</li>
        <li>2148</li>
        <li>2149</li>
        <li>2150</li>
        <li>2151</li>
        <li>2152</li>
        <li>2153</li>
        <li>2154</li>
        <li>2155</li>
        <li>2156</li>
        <li>2157</li>
        <li>2158</li>
        <li>2159</li>
        <li>2160</li>
        <li>2161</li>
        <li>2162</li>
        <li>2163</li>
        <li>2164</li>
        <li>2165</li>
        <li>2166</li>
        <li>2167</li>
        <li>2168</li>
        <li>2169</li>
        <li>2170</li>
        <li>2171</li>
        <li>2172</li>
        <li>2173</li>
        <li>2174</li>
        <li>2175</li>
        <li>2176</li>
        <li>2177</li>
        <li>2178</li>
        <li>2179</li>
        <li>2180</li>
        <li>2181</li>
        <li>2182</li>
        <li>2183</li>
        <li>2184</li>
        <li>2185</li>
        <li>2186</li>
        <li>2187</li>
        <li>2188</li>
        <li>2189</li>
        <li>2190</li>
        <li>2191</li>
        <li>2192</li>
        <li>2193</li>
        <li>2194</li>
        <li>2195</li>
        <li>2196</li>
        <li>2197</li>
        <li>2198</li>
        <li>2199</li>
        <li>2200</li>
        <li>2201</li>
        <li>2202</li>
        <li>2203</li>
        <li>2204</li>
        <li>2205</li>
        <li>2206</li>
        <li>2207</li>
        <li>2208</li>
        <li>2209</li>
        <li>2210</li>
        <li>2211</li>
        <li>2212</li>
        <li>2213</li>
        <li>2214</li>
        <li>2215</li>
        <li>2216</li>
        <li>2217</li>
        <li>2218</li>
        <li>2219</li>
        <li>2220</li>
        <li>2221</li>
        <li>2222</li>
        <li>2223</li>
        <li>2224</li>
        <li>2225</li>
        <li>2226</li>
        <li>2227</li>
        <li>2228</li>
        <li>2229</li>
        <li>2230</li>
        <li>2231</li>
        <li>2232</li>
        <li>2233</li>
        <li>2234</li>
        <li>2235</li>
        <li>2236</li>
        <li>2237</li>
        <li>2238</li>
        <li>2239</li>
        <li>2240</li>
        <li>2241</li>
        <li>2242</li>
        <li>2243</li>
        <li>2244</li>
        <li>2245</li>
        <li>2246</li>
        <li>2247</li>
        <li>2248</li>
        <li>2249</li>
        <li>2250</li>
        <li>2251</li>
        <li>2252</li>
        <li>2253</li>
        <li>2254</li>
        <li>2255</li>
      </ol>
      <code><div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">scrollTo</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">isBody</span><span class="p">(</span><span class="k">this</span><span class="p">)){</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">getWindow</span><span class="p">().</span><span class="nx">scrollTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>&#x000A;		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">isBody</span><span class="p">(</span><span class="k">this</span><span class="p">))</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getWindow</span><span class="p">().</span><span class="nx">getSize</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">};</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getScrollSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">isBody</span><span class="p">(</span><span class="k">this</span><span class="p">))</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getWindow</span><span class="p">().</span><span class="nx">getScrollSize</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">scrollWidth</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="p">};</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getScroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">isBody</span><span class="p">(</span><span class="k">this</span><span class="p">))</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getWindow</span><span class="p">().</span><span class="nx">getScroll</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">};</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getScrolls</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">position</span> <span class="o">=</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">};</span>&#x000A;		<span class="k">while</span> <span class="p">(</span><span class="nx">element</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isBody</span><span class="p">(</span><span class="nx">element</span><span class="p">)){</span>&#x000A;			<span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">;</span>&#x000A;			<span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">;</span>&#x000A;			<span class="nx">element</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">position</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">getOffsetParent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">isBody</span><span class="p">(</span><span class="nx">element</span><span class="p">))</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span> &#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span><span class="p">)</span> <span class="k">return</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">;</span>&#x000A;		<span class="k">while</span> <span class="p">((</span><span class="nx">element</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isBody</span><span class="p">(</span><span class="nx">element</span><span class="p">)){</span> &#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">styleString</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="s1">&#39;position&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;static&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="nx">element</span><span class="p">;</span>&#x000A;		<span class="p">}</span> &#x000A;		<span class="k">return</span> <span class="kc">null</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getOffsets</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">position</span> <span class="o">=</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">};</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">isBody</span><span class="p">(</span><span class="k">this</span><span class="p">))</span> <span class="k">return</span> <span class="nx">position</span><span class="p">;</span>&#x000A;&#x000A;		<span class="k">while</span> <span class="p">(</span><span class="nx">element</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isBody</span><span class="p">(</span><span class="nx">element</span><span class="p">)){</span>&#x000A;			<span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offsetLeft</span><span class="p">;</span>&#x000A;			<span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">;</span>&#x000A;&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">gecko</span><span class="p">){</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">borderBox</span><span class="p">(</span><span class="nx">element</span><span class="p">)){</span>&#x000A;					<span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nx">leftBorder</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>&#x000A;					<span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nx">topBorder</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>&#x000A;				<span class="p">}</span>&#x000A;				<span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">styleString</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="s1">&#39;overflow&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;visible&#39;</span><span class="p">){</span>&#x000A;					<span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nx">leftBorder</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span>&#x000A;					<span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nx">topBorder</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span>&#x000A;				<span class="p">}</span>&#x000A;			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">element</span> <span class="o">!=</span> <span class="k">this</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span> <span class="o">||</span> <span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">webkit</span><span class="p">)){</span>&#x000A;				<span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nx">leftBorder</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>&#x000A;				<span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nx">topBorder</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>&#x000A;			<span class="p">}</span>&#x000A;&#x000A;			<span class="nx">element</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">;</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span><span class="p">){</span>&#x000A;				<span class="k">while</span> <span class="p">(</span><span class="nx">element</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">element</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">.</span><span class="nx">hasLayout</span><span class="p">)</span> <span class="nx">element</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">;</span>&#x000A;			<span class="p">}</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">gecko</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">borderBox</span><span class="p">(</span><span class="k">this</span><span class="p">)){</span>&#x000A;			<span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">-=</span> <span class="nx">leftBorder</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>&#x000A;			<span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">-=</span> <span class="nx">topBorder</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">position</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getPosition</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">relative</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">isBody</span><span class="p">(</span><span class="k">this</span><span class="p">))</span> <span class="k">return</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">};</span>&#x000A;		<span class="kd">var</span> <span class="nx">offset</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getOffsets</span><span class="p">(),</span> <span class="nx">scroll</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getScrolls</span><span class="p">();</span>&#x000A;		<span class="kd">var</span> <span class="nx">position</span> <span class="o">=</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="nx">offset</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">scroll</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="nx">offset</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">scroll</span><span class="p">.</span><span class="nx">y</span><span class="p">};</span>&#x000A;		<span class="kd">var</span> <span class="nx">relativePosition</span> <span class="o">=</span> <span class="p">(</span><span class="nx">relative</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">relative</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">relative</span><span class="p">)))</span> <span class="o">?</span> <span class="nx">relative</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">()</span> <span class="o">:</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">};</span>&#x000A;		<span class="k">return</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="nx">position</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">relativePosition</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="nx">position</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">relativePosition</span><span class="p">.</span><span class="nx">y</span><span class="p">};</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getCoordinates</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">isBody</span><span class="p">(</span><span class="k">this</span><span class="p">))</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getWindow</span><span class="p">().</span><span class="nx">getCoordinates</span><span class="p">();</span>&#x000A;		<span class="kd">var</span> <span class="nx">position</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">(</span><span class="nx">element</span><span class="p">),</span> <span class="nx">size</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getSize</span><span class="p">();</span>&#x000A;		<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="o">:</span> <span class="nx">size</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="nx">size</span><span class="p">.</span><span class="nx">y</span><span class="p">};</span>&#x000A;		<span class="nx">obj</span><span class="p">.</span><span class="nx">right</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>&#x000A;		<span class="nx">obj</span><span class="p">.</span><span class="nx">bottom</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">computePosition</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">styleNumber</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;margin-left&#39;</span><span class="p">),</span> <span class="nx">top</span><span class="o">:</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">styleNumber</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;margin-top&#39;</span><span class="p">)};</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">position</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setStyles</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">computePosition</span><span class="p">(</span><span class="nx">obj</span><span class="p">));</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Native</span><span class="p">.</span><span class="nx">implement</span><span class="p">([</span><span class="nx">Document</span><span class="p">,</span> <span class="nx">Window</span><span class="p">],</span> <span class="p">{</span>&#x000A;&#x000A;	<span class="nx">getSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">win</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getWindow</span><span class="p">();</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">presto</span> <span class="o">||</span> <span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">webkit</span><span class="p">)</span> <span class="k">return</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="nx">win</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="nx">win</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">};</span>&#x000A;		<span class="kd">var</span> <span class="nx">doc</span> <span class="o">=</span> <span class="nx">getCompatElement</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">clientWidth</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">clientHeight</span><span class="p">};</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getScroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">win</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getWindow</span><span class="p">();</span>&#x000A;		<span class="kd">var</span> <span class="nx">doc</span> <span class="o">=</span> <span class="nx">getCompatElement</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="nx">win</span><span class="p">.</span><span class="nx">pageXOffset</span> <span class="o">||</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="nx">win</span><span class="p">.</span><span class="nx">pageYOffset</span> <span class="o">||</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">};</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getScrollSize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">doc</span> <span class="o">=</span> <span class="nx">getCompatElement</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">min</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getSize</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">scrollWidth</span><span class="p">,</span> <span class="nx">min</span><span class="p">.</span><span class="nx">x</span><span class="p">),</span> <span class="nx">y</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="p">,</span> <span class="nx">min</span><span class="p">.</span><span class="nx">y</span><span class="p">)};</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getPosition</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">};</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getCoordinates</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">size</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getSize</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="p">{</span><span class="nx">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">bottom</span><span class="o">:</span> <span class="nx">size</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">right</span><span class="o">:</span> <span class="nx">size</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="nx">size</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">width</span><span class="o">:</span> <span class="nx">size</span><span class="p">.</span><span class="nx">x</span><span class="p">};</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section><p>private methods</p></section>
    <figure>
      <ol>
        <li>2259</li>
        <li>2260</li>
        <li>2261</li>
        <li>2262</li>
        <li>2263</li>
        <li>2264</li>
        <li>2265</li>
        <li>2266</li>
        <li>2267</li>
        <li>2268</li>
        <li>2269</li>
        <li>2270</li>
        <li>2271</li>
        <li>2272</li>
        <li>2273</li>
        <li>2274</li>
        <li>2275</li>
        <li>2276</li>
        <li>2277</li>
        <li>2278</li>
        <li>2279</li>
        <li>2280</li>
        <li>2281</li>
        <li>2282</li>
        <li>2283</li>
        <li>2284</li>
        <li>2285</li>
        <li>2286</li>
      </ol>
      <code><div class="highlight"><pre><span class="kd">var</span> <span class="nx">styleString</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">;</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">styleNumber</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">style</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="nx">styleString</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">style</span><span class="p">).</span><span class="nx">toInt</span><span class="p">()</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">borderBox</span><span class="p">(</span><span class="nx">element</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="nx">styleString</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="s1">&#39;-moz-box-sizing&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;border-box&#39;</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">topBorder</span><span class="p">(</span><span class="nx">element</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="nx">styleNumber</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="s1">&#39;border-top-width&#39;</span><span class="p">);</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">leftBorder</span><span class="p">(</span><span class="nx">element</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="nx">styleNumber</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="s1">&#39;border-left-width&#39;</span><span class="p">);</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">isBody</span><span class="p">(</span><span class="nx">element</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="p">(</span><span class="sr">/^(?:body|html)$/i</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">tagName</span><span class="p">);</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="kd">function</span> <span class="nx">getCompatElement</span><span class="p">(</span><span class="nx">element</span><span class="p">){</span>&#x000A;	<span class="kd">var</span> <span class="nx">doc</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">getDocument</span><span class="p">();</span>&#x000A;	<span class="k">return</span> <span class="p">(</span><span class="o">!</span><span class="nx">doc</span><span class="p">.</span><span class="nx">compatMode</span> <span class="o">||</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">compatMode</span> <span class="o">==</span> <span class="s1">&#39;CSS1Compat&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">html</span> <span class="o">:</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="p">})();</span>&#x000A;</pre></div></code>
    </figure>
    <section><p>aliases</p></section>
    <figure>
      <ol>
        <li>2290</li>
        <li>2291</li>
        <li>2292</li>
        <li>2293</li>
        <li>2294</li>
        <li>2295</li>
        <li>2296</li>
        <li>2297</li>
        <li>2298</li>
        <li>2299</li>
        <li>2300</li>
        <li>2301</li>
        <li>2302</li>
        <li>2303</li>
        <li>2304</li>
        <li>2305</li>
        <li>2306</li>
        <li>2307</li>
        <li>2308</li>
        <li>2309</li>
        <li>2310</li>
        <li>2311</li>
        <li>2312</li>
        <li>2313</li>
        <li>2314</li>
        <li>2315</li>
        <li>2316</li>
        <li>2317</li>
        <li>2318</li>
        <li>2319</li>
        <li>2320</li>
        <li>2321</li>
        <li>2322</li>
        <li>2323</li>
        <li>2324</li>
      </ol>
      <code><div class="highlight"><pre><span class="nx">Native</span><span class="p">.</span><span class="nx">implement</span><span class="p">([</span><span class="nx">Window</span><span class="p">,</span> <span class="nx">Document</span><span class="p">,</span> <span class="nx">Element</span><span class="p">],</span> <span class="p">{</span>&#x000A;&#x000A;	<span class="nx">getHeight</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getSize</span><span class="p">().</span><span class="nx">y</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getWidth</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getSize</span><span class="p">().</span><span class="nx">x</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getScrollTop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getScroll</span><span class="p">().</span><span class="nx">y</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getScrollLeft</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getScroll</span><span class="p">().</span><span class="nx">x</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getScrollHeight</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getScrollSize</span><span class="p">().</span><span class="nx">y</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getScrollWidth</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getScrollSize</span><span class="p">().</span><span class="nx">x</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getTop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">().</span><span class="nx">y</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getLeft</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">().</span><span class="nx">x</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Selectors.js
      Adds advanced CSS Querying capabilities for targeting elements. Also includes pseudoselectors support.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>2334</li>
        <li>2335</li>
        <li>2336</li>
        <li>2337</li>
        <li>2338</li>
        <li>2339</li>
        <li>2340</li>
        <li>2341</li>
        <li>2342</li>
        <li>2343</li>
        <li>2344</li>
        <li>2345</li>
        <li>2346</li>
        <li>2347</li>
        <li>2348</li>
        <li>2349</li>
        <li>2350</li>
        <li>2351</li>
        <li>2352</li>
        <li>2353</li>
        <li>2354</li>
        <li>2355</li>
        <li>2356</li>
        <li>2357</li>
        <li>2358</li>
        <li>2359</li>
        <li>2360</li>
        <li>2361</li>
        <li>2362</li>
        <li>2363</li>
        <li>2364</li>
        <li>2365</li>
        <li>2366</li>
        <li>2367</li>
        <li>2368</li>
        <li>2369</li>
        <li>2370</li>
        <li>2371</li>
        <li>2372</li>
        <li>2373</li>
        <li>2374</li>
        <li>2375</li>
        <li>2376</li>
        <li>2377</li>
        <li>2378</li>
        <li>2379</li>
        <li>2380</li>
        <li>2381</li>
        <li>2382</li>
        <li>2383</li>
        <li>2384</li>
        <li>2385</li>
        <li>2386</li>
        <li>2387</li>
        <li>2388</li>
        <li>2389</li>
        <li>2390</li>
        <li>2391</li>
        <li>2392</li>
        <li>2393</li>
        <li>2394</li>
        <li>2395</li>
        <li>2396</li>
        <li>2397</li>
        <li>2398</li>
        <li>2399</li>
        <li>2400</li>
        <li>2401</li>
        <li>2402</li>
        <li>2403</li>
        <li>2404</li>
        <li>2405</li>
        <li>2406</li>
        <li>2407</li>
        <li>2408</li>
        <li>2409</li>
        <li>2410</li>
        <li>2411</li>
        <li>2412</li>
        <li>2413</li>
        <li>2414</li>
        <li>2415</li>
        <li>2416</li>
        <li>2417</li>
        <li>2418</li>
        <li>2419</li>
        <li>2420</li>
        <li>2421</li>
        <li>2422</li>
        <li>2423</li>
        <li>2424</li>
        <li>2425</li>
        <li>2426</li>
        <li>2427</li>
        <li>2428</li>
        <li>2429</li>
        <li>2430</li>
        <li>2431</li>
        <li>2432</li>
        <li>2433</li>
        <li>2434</li>
        <li>2435</li>
        <li>2436</li>
        <li>2437</li>
        <li>2438</li>
        <li>2439</li>
        <li>2440</li>
        <li>2441</li>
        <li>2442</li>
        <li>2443</li>
        <li>2444</li>
        <li>2445</li>
        <li>2446</li>
        <li>2447</li>
        <li>2448</li>
        <li>2449</li>
        <li>2450</li>
        <li>2451</li>
        <li>2452</li>
        <li>2453</li>
        <li>2454</li>
        <li>2455</li>
        <li>2456</li>
        <li>2457</li>
        <li>2458</li>
        <li>2459</li>
        <li>2460</li>
        <li>2461</li>
        <li>2462</li>
        <li>2463</li>
        <li>2464</li>
        <li>2465</li>
        <li>2466</li>
        <li>2467</li>
        <li>2468</li>
        <li>2469</li>
        <li>2470</li>
        <li>2471</li>
        <li>2472</li>
        <li>2473</li>
        <li>2474</li>
        <li>2475</li>
        <li>2476</li>
        <li>2477</li>
        <li>2478</li>
        <li>2479</li>
        <li>2480</li>
        <li>2481</li>
        <li>2482</li>
        <li>2483</li>
        <li>2484</li>
        <li>2485</li>
        <li>2486</li>
        <li>2487</li>
        <li>2488</li>
        <li>2489</li>
        <li>2490</li>
        <li>2491</li>
        <li>2492</li>
        <li>2493</li>
        <li>2494</li>
        <li>2495</li>
        <li>2496</li>
        <li>2497</li>
        <li>2498</li>
        <li>2499</li>
        <li>2500</li>
        <li>2501</li>
        <li>2502</li>
        <li>2503</li>
        <li>2504</li>
        <li>2505</li>
        <li>2506</li>
        <li>2507</li>
        <li>2508</li>
        <li>2509</li>
        <li>2510</li>
        <li>2511</li>
        <li>2512</li>
        <li>2513</li>
        <li>2514</li>
        <li>2515</li>
        <li>2516</li>
        <li>2517</li>
        <li>2518</li>
        <li>2519</li>
        <li>2520</li>
        <li>2521</li>
        <li>2522</li>
        <li>2523</li>
        <li>2524</li>
        <li>2525</li>
        <li>2526</li>
        <li>2527</li>
        <li>2528</li>
        <li>2529</li>
        <li>2530</li>
        <li>2531</li>
        <li>2532</li>
        <li>2533</li>
        <li>2534</li>
        <li>2535</li>
        <li>2536</li>
        <li>2537</li>
        <li>2538</li>
        <li>2539</li>
        <li>2540</li>
        <li>2541</li>
        <li>2542</li>
        <li>2543</li>
        <li>2544</li>
        <li>2545</li>
        <li>2546</li>
        <li>2547</li>
        <li>2548</li>
        <li>2549</li>
        <li>2550</li>
        <li>2551</li>
        <li>2552</li>
        <li>2553</li>
        <li>2554</li>
        <li>2555</li>
        <li>2556</li>
        <li>2557</li>
        <li>2558</li>
        <li>2559</li>
        <li>2560</li>
        <li>2561</li>
        <li>2562</li>
        <li>2563</li>
        <li>2564</li>
        <li>2565</li>
        <li>2566</li>
        <li>2567</li>
        <li>2568</li>
        <li>2569</li>
        <li>2570</li>
        <li>2571</li>
        <li>2572</li>
        <li>2573</li>
        <li>2574</li>
        <li>2575</li>
        <li>2576</li>
        <li>2577</li>
        <li>2578</li>
        <li>2579</li>
        <li>2580</li>
        <li>2581</li>
        <li>2582</li>
        <li>2583</li>
        <li>2584</li>
        <li>2585</li>
        <li>2586</li>
        <li>2587</li>
        <li>2588</li>
        <li>2589</li>
        <li>2590</li>
        <li>2591</li>
        <li>2592</li>
        <li>2593</li>
        <li>2594</li>
        <li>2595</li>
        <li>2596</li>
        <li>2597</li>
        <li>2598</li>
        <li>2599</li>
        <li>2600</li>
      </ol>
      <code><div class="highlight"><pre><span class="nx">Native</span><span class="p">.</span><span class="nx">implement</span><span class="p">([</span><span class="nx">Document</span><span class="p">,</span> <span class="nx">Element</span><span class="p">],</span> <span class="p">{</span>&#x000A;	&#x000A;	<span class="nx">getElements</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expression</span><span class="p">,</span> <span class="nx">nocash</span><span class="p">){</span>&#x000A;		<span class="nx">expression</span> <span class="o">=</span> <span class="nx">expression</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">items</span><span class="p">,</span> <span class="nx">local</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">expression</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">selector</span> <span class="o">=</span> <span class="nx">expression</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">local</span><span class="p">);</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">item</span><span class="p">)</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nx">$A</span><span class="p">(</span><span class="nx">elements</span><span class="p">);</span>&#x000A;			<span class="nx">items</span> <span class="o">=</span> <span class="p">(</span><span class="nx">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">elements</span> <span class="o">:</span> <span class="p">(</span><span class="nx">items</span><span class="p">.</span><span class="nx">item</span><span class="p">)</span> <span class="o">?</span> <span class="nx">$A</span><span class="p">(</span><span class="nx">items</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">elements</span><span class="p">)</span> <span class="o">:</span> <span class="nx">items</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">elements</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">new</span> <span class="nx">Elements</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="p">{</span><span class="nx">ddup</span><span class="o">:</span> <span class="p">(</span><span class="nx">expression</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">),</span> <span class="nx">cash</span><span class="o">:</span> <span class="o">!</span><span class="nx">nocash</span><span class="p">});</span>&#x000A;	<span class="p">}</span>&#x000A;	&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;	&#x000A;	<span class="nx">match</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">selector</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">tagid</span> <span class="o">=</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">parseTagAndID</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">tag</span> <span class="o">=</span> <span class="nx">tagid</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">tagid</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">Selectors</span><span class="p">.</span><span class="nx">Filters</span><span class="p">.</span><span class="nx">byID</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nx">Selectors</span><span class="p">.</span><span class="nx">Filters</span><span class="p">.</span><span class="nx">byTag</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">tag</span><span class="p">))</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">parseSelector</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">parsed</span><span class="p">)</span> <span class="o">?</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">parsed</span><span class="p">,</span> <span class="p">{})</span> <span class="o">:</span> <span class="kc">true</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;	&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="kd">var</span> <span class="nx">Selectors</span> <span class="o">=</span> <span class="p">{</span><span class="nx">Cache</span><span class="o">:</span> <span class="p">{</span><span class="nx">nth</span><span class="o">:</span> <span class="p">{},</span> <span class="nx">parsed</span><span class="o">:</span> <span class="p">{}}};</span>&#x000A;&#x000A;<span class="nx">Selectors</span><span class="p">.</span><span class="nx">RegExps</span> <span class="o">=</span> <span class="p">{</span>&#x000A;	<span class="nx">id</span><span class="o">:</span> <span class="p">(</span><span class="sr">/#([\w-]+)/</span><span class="p">),</span>&#x000A;	<span class="nx">tag</span><span class="o">:</span> <span class="p">(</span><span class="sr">/^(\w+|\*)/</span><span class="p">),</span>&#x000A;	<span class="nx">quick</span><span class="o">:</span> <span class="p">(</span><span class="sr">/^(\w+|\*)$/</span><span class="p">),</span>&#x000A;	<span class="nx">splitter</span><span class="o">:</span> <span class="p">(</span><span class="sr">/\s*([+&gt;~\s])\s*([a-zA-Z#.*:\[])/g</span><span class="p">),</span>&#x000A;	<span class="nx">combined</span><span class="o">:</span> <span class="p">(</span><span class="sr">/\.([\w-]+)|\[(\w+)(?:([!*^$~|]?=)[&quot;&#39;]?(.*?)[&quot;&#39;]?)?\]|:([\w-]+)(?:\([&quot;&#39;]?(.*?)?[&quot;&#39;]?\)|$)/g</span><span class="p">)</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span> <span class="o">=</span> <span class="p">{</span>&#x000A;	&#x000A;	<span class="nx">chk</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">uniques</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">uniques</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">uid</span> <span class="o">=</span> <span class="nx">$uid</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">uniques</span><span class="p">[</span><span class="nx">uid</span><span class="p">])</span> <span class="k">return</span> <span class="nx">uniques</span><span class="p">[</span><span class="nx">uid</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">parseNthArgument</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">argument</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">Selectors</span><span class="p">.</span><span class="nx">Cache</span><span class="p">.</span><span class="nx">nth</span><span class="p">[</span><span class="nx">argument</span><span class="p">])</span> <span class="k">return</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Cache</span><span class="p">.</span><span class="nx">nth</span><span class="p">[</span><span class="nx">argument</span><span class="p">];</span>&#x000A;		<span class="kd">var</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">argument</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^([+-]?\d*)?([a-z]+)?([+-]?\d*)?$/</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">parsed</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">inta</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">parsed</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>&#x000A;		<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">(</span><span class="nx">inta</span> <span class="o">||</span> <span class="nx">inta</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="nx">inta</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">special</span> <span class="o">=</span> <span class="nx">parsed</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">parsed</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">){</span>&#x000A;			<span class="nx">b</span><span class="o">--</span><span class="p">;</span>&#x000A;			<span class="k">while</span> <span class="p">(</span><span class="nx">b</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">b</span> <span class="o">+=</span> <span class="nx">a</span><span class="p">;</span>&#x000A;			<span class="k">while</span> <span class="p">(</span><span class="nx">b</span> <span class="o">&gt;=</span> <span class="nx">a</span><span class="p">)</span> <span class="nx">b</span> <span class="o">-=</span> <span class="nx">a</span><span class="p">;</span>&#x000A;		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>&#x000A;			<span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>&#x000A;			<span class="nx">special</span> <span class="o">=</span> <span class="s1">&#39;index&#39;</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">switch</span> <span class="p">(</span><span class="nx">special</span><span class="p">){</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;n&#39;</span><span class="o">:</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">special</span><span class="o">:</span> <span class="s1">&#39;n&#39;</span><span class="p">};</span> <span class="k">break</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;odd&#39;</span><span class="o">:</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">special</span><span class="o">:</span> <span class="s1">&#39;n&#39;</span><span class="p">};</span> <span class="k">break</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;even&#39;</span><span class="o">:</span> <span class="nx">parsed</span> <span class="o">=</span>  <span class="p">{</span><span class="nx">a</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">special</span><span class="o">:</span> <span class="s1">&#39;n&#39;</span><span class="p">};</span> <span class="k">break</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;first&#39;</span><span class="o">:</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">special</span><span class="o">:</span> <span class="s1">&#39;index&#39;</span><span class="p">};</span> <span class="k">break</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;last&#39;</span><span class="o">:</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="p">{</span><span class="nx">special</span><span class="o">:</span> <span class="s1">&#39;last-child&#39;</span><span class="p">};</span> <span class="k">break</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;only&#39;</span><span class="o">:</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="p">{</span><span class="nx">special</span><span class="o">:</span> <span class="s1">&#39;only-child&#39;</span><span class="p">};</span> <span class="k">break</span><span class="p">;</span>&#x000A;			<span class="k">default</span><span class="o">:</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span> <span class="p">(</span><span class="nx">a</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="nx">special</span><span class="o">:</span> <span class="s1">&#39;index&#39;</span><span class="p">};</span>&#x000A;		<span class="p">}</span>&#x000A;		&#x000A;		<span class="k">return</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Cache</span><span class="p">.</span><span class="nx">nth</span><span class="p">[</span><span class="nx">argument</span><span class="p">]</span> <span class="o">=</span> <span class="nx">parsed</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">parseSelector</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">Selectors</span><span class="p">.</span><span class="nx">Cache</span><span class="p">.</span><span class="nx">parsed</span><span class="p">[</span><span class="nx">selector</span><span class="p">])</span> <span class="k">return</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Cache</span><span class="p">.</span><span class="nx">parsed</span><span class="p">[</span><span class="nx">selector</span><span class="p">];</span>&#x000A;		<span class="kd">var</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="p">{</span><span class="nx">classes</span><span class="o">:</span> <span class="p">[],</span> <span class="nx">pseudos</span><span class="o">:</span> <span class="p">[],</span> <span class="nx">attributes</span><span class="o">:</span> <span class="p">[]};</span>&#x000A;		<span class="k">while</span> <span class="p">((</span><span class="nx">m</span> <span class="o">=</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">RegExps</span><span class="p">.</span><span class="nx">combined</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">selector</span><span class="p">))){</span>&#x000A;			<span class="kd">var</span> <span class="nx">cn</span> <span class="o">=</span> <span class="nx">m</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">an</span> <span class="o">=</span> <span class="nx">m</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">ao</span> <span class="o">=</span> <span class="nx">m</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="nx">av</span> <span class="o">=</span> <span class="nx">m</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nx">pn</span> <span class="o">=</span> <span class="nx">m</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="nx">pa</span> <span class="o">=</span> <span class="nx">m</span><span class="p">[</span><span class="mi">6</span><span class="p">];</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">cn</span><span class="p">){</span>&#x000A;				<span class="nx">parsed</span><span class="p">.</span><span class="nx">classes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">cn</span><span class="p">);</span>&#x000A;			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">pn</span><span class="p">){</span>&#x000A;				<span class="kd">var</span> <span class="nx">parser</span> <span class="o">=</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Pseudo</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">pn</span><span class="p">);</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">parser</span><span class="p">)</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">pseudos</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">parser</span><span class="o">:</span> <span class="nx">parser</span><span class="p">,</span> <span class="nx">argument</span><span class="o">:</span> <span class="nx">pa</span><span class="p">});</span>&#x000A;				<span class="k">else</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span> <span class="nx">pn</span><span class="p">,</span> <span class="nx">operator</span><span class="o">:</span> <span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="nx">pa</span><span class="p">});</span>&#x000A;			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">an</span><span class="p">){</span>&#x000A;				<span class="nx">parsed</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span> <span class="nx">an</span><span class="p">,</span> <span class="nx">operator</span><span class="o">:</span> <span class="nx">ao</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="nx">av</span><span class="p">});</span>&#x000A;			<span class="p">}</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">classes</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">delete</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">classes</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">delete</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">attributes</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">pseudos</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">delete</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">pseudos</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">classes</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">attributes</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">pseudos</span><span class="p">)</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Cache</span><span class="p">.</span><span class="nx">parsed</span><span class="p">[</span><span class="nx">selector</span><span class="p">]</span> <span class="o">=</span> <span class="nx">parsed</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">parseTagAndID</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">tag</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">Selectors</span><span class="p">.</span><span class="nx">RegExps</span><span class="p">.</span><span class="nx">tag</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">Selectors</span><span class="p">.</span><span class="nx">RegExps</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="p">[(</span><span class="nx">tag</span><span class="p">)</span> <span class="o">?</span> <span class="nx">tag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">?</span> <span class="nx">id</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="kc">false</span><span class="p">];</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">filter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">parsed</span><span class="p">,</span> <span class="nx">local</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">classes</span><span class="p">){</span>&#x000A;			<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">classes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;</span> <span class="nx">i</span><span class="p">){</span>&#x000A;				<span class="kd">var</span> <span class="nx">cn</span> <span class="o">=</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">classes</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">Selectors</span><span class="p">.</span><span class="nx">Filters</span><span class="p">.</span><span class="nx">byClass</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">cn</span><span class="p">))</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;			<span class="p">}</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">attributes</span><span class="p">){</span>&#x000A;			<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;</span> <span class="nx">i</span><span class="p">){</span>&#x000A;				<span class="kd">var</span> <span class="nx">att</span> <span class="o">=</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">attributes</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">Selectors</span><span class="p">.</span><span class="nx">Filters</span><span class="p">.</span><span class="nx">byAttribute</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">att</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">att</span><span class="p">.</span><span class="nx">operator</span><span class="p">,</span> <span class="nx">att</span><span class="p">.</span><span class="nx">value</span><span class="p">))</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;			<span class="p">}</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">pseudos</span><span class="p">){</span>&#x000A;			<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">pseudos</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;</span> <span class="nx">i</span><span class="p">){</span>&#x000A;				<span class="kd">var</span> <span class="nx">psd</span> <span class="o">=</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">pseudos</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">Selectors</span><span class="p">.</span><span class="nx">Filters</span><span class="p">.</span><span class="nx">byPseudo</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">psd</span><span class="p">.</span><span class="nx">parser</span><span class="p">,</span> <span class="nx">psd</span><span class="p">.</span><span class="nx">argument</span><span class="p">,</span> <span class="nx">local</span><span class="p">))</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;			<span class="p">}</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">getByTagAndID</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">tag</span><span class="p">,</span> <span class="nx">id</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">id</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">)</span> <span class="o">?</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span> <span class="o">:</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>&#x000A;			<span class="k">return</span> <span class="p">(</span><span class="nx">item</span> <span class="o">&amp;&amp;</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Filters</span><span class="p">.</span><span class="nx">byTag</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">tag</span><span class="p">))</span> <span class="o">?</span> <span class="p">[</span><span class="nx">item</span><span class="p">]</span> <span class="o">:</span> <span class="p">[];</span>&#x000A;		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>&#x000A;			<span class="k">return</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">tag</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">search</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">expression</span><span class="p">,</span> <span class="nx">local</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">splitters</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		&#x000A;		<span class="kd">var</span> <span class="nx">selectors</span> <span class="o">=</span> <span class="nx">expression</span><span class="p">.</span><span class="nx">trim</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="nx">Selectors</span><span class="p">.</span><span class="nx">RegExps</span><span class="p">.</span><span class="nx">splitter</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">m0</span><span class="p">,</span> <span class="nx">m1</span><span class="p">,</span> <span class="nx">m2</span><span class="p">){</span>&#x000A;			<span class="nx">splitters</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">m1</span><span class="p">);</span>&#x000A;			<span class="k">return</span> <span class="s1">&#39;:)&#39;</span> <span class="o">+</span> <span class="nx">m2</span><span class="p">;</span>&#x000A;		<span class="p">}).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;:)&#39;</span><span class="p">);</span>&#x000A;		&#x000A;		<span class="kd">var</span> <span class="nx">items</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">filtered</span><span class="p">,</span> <span class="nx">item</span><span class="p">;</span>&#x000A;		&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">selectors</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;			&#x000A;			<span class="kd">var</span> <span class="nx">selector</span> <span class="o">=</span> <span class="nx">selectors</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>&#x000A;			&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">RegExps</span><span class="p">.</span><span class="nx">quick</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">selector</span><span class="p">)){</span>&#x000A;				<span class="nx">items</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>&#x000A;				<span class="k">continue</span><span class="p">;</span>&#x000A;			<span class="p">}</span>&#x000A;			&#x000A;			<span class="kd">var</span> <span class="nx">splitter</span> <span class="o">=</span> <span class="nx">splitters</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>&#x000A;			&#x000A;			<span class="kd">var</span> <span class="nx">tagid</span> <span class="o">=</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">parseTagAndID</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>&#x000A;			<span class="kd">var</span> <span class="nx">tag</span> <span class="o">=</span> <span class="nx">tagid</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">tagid</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>&#x000A;&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>&#x000A;				<span class="nx">items</span> <span class="o">=</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">getByTagAndID</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">tag</span><span class="p">,</span> <span class="nx">id</span><span class="p">);</span>&#x000A;			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>&#x000A;				<span class="kd">var</span> <span class="nx">uniques</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">found</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;				<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">k</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="nx">found</span> <span class="o">=</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Getters</span><span class="p">[</span><span class="nx">splitter</span><span class="p">](</span><span class="nx">found</span><span class="p">,</span> <span class="nx">items</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">tag</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">uniques</span><span class="p">);</span>&#x000A;				<span class="nx">items</span> <span class="o">=</span> <span class="nx">found</span><span class="p">;</span>&#x000A;			<span class="p">}</span>&#x000A;			&#x000A;			<span class="kd">var</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">parseSelector</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>&#x000A;			&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">parsed</span><span class="p">){</span>&#x000A;				<span class="nx">filtered</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;				<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">m</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">m</span><span class="o">++</span><span class="p">){</span>&#x000A;					<span class="nx">item</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="nx">m</span><span class="p">];</span>&#x000A;					<span class="k">if</span> <span class="p">(</span><span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">parsed</span><span class="p">,</span> <span class="nx">local</span><span class="p">))</span> <span class="nx">filtered</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>&#x000A;				<span class="p">}</span>&#x000A;				<span class="nx">items</span> <span class="o">=</span> <span class="nx">filtered</span><span class="p">;</span>&#x000A;			<span class="p">}</span>&#x000A;			&#x000A;		<span class="p">}</span>&#x000A;		&#x000A;		<span class="k">return</span> <span class="nx">items</span><span class="p">;</span>&#x000A;		&#x000A;	<span class="p">}</span>&#x000A;	&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Selectors</span><span class="p">.</span><span class="nx">Getters</span> <span class="o">=</span> <span class="p">{</span>&#x000A;	&#x000A;	<span class="s1">&#39; &#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">found</span><span class="p">,</span> <span class="nx">self</span><span class="p">,</span> <span class="nx">tag</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">uniques</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">getByTagAndID</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">tag</span><span class="p">,</span> <span class="nx">id</span><span class="p">);</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">chk</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">uniques</span><span class="p">))</span> <span class="nx">found</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">found</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="s1">&#39;&gt;&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">found</span><span class="p">,</span> <span class="nx">self</span><span class="p">,</span> <span class="nx">tag</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">uniques</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">getByTagAndID</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">tag</span><span class="p">,</span> <span class="nx">id</span><span class="p">);</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">child</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">==</span> <span class="nx">self</span> <span class="o">&amp;&amp;</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">chk</span><span class="p">(</span><span class="nx">child</span><span class="p">,</span> <span class="nx">uniques</span><span class="p">))</span> <span class="nx">found</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">child</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">found</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="s1">&#39;+&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">found</span><span class="p">,</span> <span class="nx">self</span><span class="p">,</span> <span class="nx">tag</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">uniques</span><span class="p">){</span>&#x000A;		<span class="k">while</span> <span class="p">((</span><span class="nx">self</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">)){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">==</span> <span class="mi">1</span><span class="p">){</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">chk</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">uniques</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Filters</span><span class="p">.</span><span class="nx">byTag</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">tag</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Filters</span><span class="p">.</span><span class="nx">byID</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">id</span><span class="p">))</span> <span class="nx">found</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">self</span><span class="p">);</span>&#x000A;				<span class="k">break</span><span class="p">;</span>&#x000A;			<span class="p">}</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">found</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="s1">&#39;~&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">found</span><span class="p">,</span> <span class="nx">self</span><span class="p">,</span> <span class="nx">tag</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">uniques</span><span class="p">){</span>&#x000A;		&#x000A;		<span class="k">while</span> <span class="p">((</span><span class="nx">self</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">)){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">==</span> <span class="mi">1</span><span class="p">){</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">chk</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">uniques</span><span class="p">))</span> <span class="k">break</span><span class="p">;</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">Selectors</span><span class="p">.</span><span class="nx">Filters</span><span class="p">.</span><span class="nx">byTag</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">tag</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Filters</span><span class="p">.</span><span class="nx">byID</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">id</span><span class="p">))</span> <span class="nx">found</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">self</span><span class="p">);</span>&#x000A;			<span class="p">}</span> &#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">found</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;	&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Selectors</span><span class="p">.</span><span class="nx">Filters</span> <span class="o">=</span> <span class="p">{</span>&#x000A;	&#x000A;	<span class="nx">byTag</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">tag</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">tag</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span> <span class="o">||</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">tagName</span> <span class="o">&amp;&amp;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">tagName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">==</span> <span class="nx">tag</span><span class="p">));</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">byID</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">id</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="o">!</span><span class="nx">id</span> <span class="o">||</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">id</span> <span class="o">&amp;&amp;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">id</span> <span class="o">==</span> <span class="nx">id</span><span class="p">));</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">byClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">klass</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">className</span> <span class="o">&amp;&amp;</span> <span class="nx">self</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">klass</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">));</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">byPseudo</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">parser</span><span class="p">,</span> <span class="nx">argument</span><span class="p">,</span> <span class="nx">local</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">parser</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">argument</span><span class="p">,</span> <span class="nx">local</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">byAttribute</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">operator</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">result</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">operator</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;		<span class="k">switch</span> <span class="p">(</span><span class="nx">operator</span><span class="p">){</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;=&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="p">(</span><span class="nx">result</span> <span class="o">==</span> <span class="nx">value</span><span class="p">);</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;*=&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">value</span><span class="p">));</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;^=&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">==</span> <span class="nx">value</span><span class="p">);</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;$=&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">==</span> <span class="nx">value</span><span class="p">);</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;!=&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="p">(</span><span class="nx">result</span> <span class="o">!=</span> <span class="nx">value</span><span class="p">);</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;~=&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">);</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;|=&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;	&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Selectors</span><span class="p">.</span><span class="nx">Pseudo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">({</span>&#x000A;</pre></div></code>
    </figure>
    <section><p>w3c pseudo selectors</p></section>
    <figure>
      <ol>
        <li>2604</li>
        <li>2605</li>
        <li>2606</li>
        <li>2607</li>
        <li>2608</li>
        <li>2609</li>
        <li>2610</li>
        <li>2611</li>
        <li>2612</li>
        <li>2613</li>
        <li>2614</li>
        <li>2615</li>
        <li>2616</li>
        <li>2617</li>
        <li>2618</li>
        <li>2619</li>
        <li>2620</li>
        <li>2621</li>
        <li>2622</li>
        <li>2623</li>
        <li>2624</li>
        <li>2625</li>
        <li>2626</li>
        <li>2627</li>
        <li>2628</li>
        <li>2629</li>
        <li>2630</li>
        <li>2631</li>
        <li>2632</li>
        <li>2633</li>
        <li>2634</li>
        <li>2635</li>
        <li>2636</li>
        <li>2637</li>
        <li>2638</li>
        <li>2639</li>
        <li>2640</li>
        <li>2641</li>
        <li>2642</li>
        <li>2643</li>
        <li>2644</li>
        <li>2645</li>
        <li>2646</li>
        <li>2647</li>
        <li>2648</li>
        <li>2649</li>
        <li>2650</li>
        <li>2651</li>
        <li>2652</li>
        <li>2653</li>
        <li>2654</li>
        <li>2655</li>
        <li>2656</li>
        <li>2657</li>
        <li>2658</li>
        <li>2659</li>
        <li>2660</li>
        <li>2661</li>
      </ol>
      <code><div class="highlight"><pre>	<span class="nx">empty</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">not</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="o">!</span><span class="nx">Element</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">selector</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">contains</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">contains</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="s1">&#39;first-child&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Pseudo</span><span class="p">.</span><span class="nx">index</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="s1">&#39;last-child&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">while</span> <span class="p">((</span><span class="nx">element</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">)){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="s1">&#39;only-child&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">prev</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">while</span> <span class="p">((</span><span class="nx">prev</span> <span class="o">=</span> <span class="nx">prev</span><span class="p">.</span><span class="nx">previousSibling</span><span class="p">)){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">prev</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="kd">var</span> <span class="nx">next</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">while</span> <span class="p">((</span><span class="nx">next</span> <span class="o">=</span> <span class="nx">next</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">)){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="s1">&#39;nth-child&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">argument</span><span class="p">,</span> <span class="nx">local</span><span class="p">){</span>&#x000A;		<span class="nx">argument</span> <span class="o">=</span> <span class="p">(</span><span class="nx">argument</span> <span class="o">==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;n&#39;</span> <span class="o">:</span> <span class="nx">argument</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Utils</span><span class="p">.</span><span class="nx">parseNthArgument</span><span class="p">(</span><span class="nx">argument</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">special</span> <span class="o">!=</span> <span class="s1">&#39;n&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Pseudo</span><span class="p">[</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">special</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">local</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>&#x000A;		<span class="nx">local</span><span class="p">.</span><span class="nx">positions</span> <span class="o">=</span> <span class="nx">local</span><span class="p">.</span><span class="nx">positions</span> <span class="o">||</span> <span class="p">{};</span>&#x000A;		<span class="kd">var</span> <span class="nx">uid</span> <span class="o">=</span> <span class="nx">$uid</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">local</span><span class="p">.</span><span class="nx">positions</span><span class="p">[</span><span class="nx">uid</span><span class="p">]){</span>&#x000A;			<span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>&#x000A;			<span class="k">while</span> <span class="p">((</span><span class="nx">self</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">previousSibling</span><span class="p">)){</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>&#x000A;				<span class="nx">count</span> <span class="o">++</span><span class="p">;</span>&#x000A;				<span class="kd">var</span> <span class="nx">position</span> <span class="o">=</span> <span class="nx">local</span><span class="p">.</span><span class="nx">positions</span><span class="p">[</span><span class="nx">$uid</span><span class="p">(</span><span class="nx">self</span><span class="p">)];</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">position</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">){</span>&#x000A;					<span class="nx">count</span> <span class="o">=</span> <span class="nx">position</span> <span class="o">+</span> <span class="nx">count</span><span class="p">;</span>&#x000A;					<span class="k">break</span><span class="p">;</span>&#x000A;				<span class="p">}</span>&#x000A;			<span class="p">}</span>&#x000A;			<span class="nx">local</span><span class="p">.</span><span class="nx">positions</span><span class="p">[</span><span class="nx">uid</span><span class="p">]</span> <span class="o">=</span> <span class="nx">count</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">local</span><span class="p">.</span><span class="nx">positions</span><span class="p">[</span><span class="nx">uid</span><span class="p">]</span> <span class="o">%</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">a</span> <span class="o">==</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">b</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;</pre></div></code>
    </figure>
    <section><p>custom pseudo selectors</p></section>
    <figure>
      <ol>
        <li>2665</li>
        <li>2666</li>
        <li>2667</li>
        <li>2668</li>
        <li>2669</li>
        <li>2670</li>
        <li>2671</li>
        <li>2672</li>
        <li>2673</li>
        <li>2674</li>
        <li>2675</li>
        <li>2676</li>
        <li>2677</li>
        <li>2678</li>
        <li>2679</li>
        <li>2680</li>
        <li>2681</li>
      </ol>
      <code><div class="highlight"><pre>	<span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">index</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>&#x000A;		<span class="k">while</span> <span class="p">((</span><span class="nx">element</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">previousSibling</span><span class="p">)){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">++</span><span class="nx">count</span> <span class="o">&gt;</span> <span class="nx">index</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">count</span> <span class="o">==</span> <span class="nx">index</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">even</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">argument</span><span class="p">,</span> <span class="nx">local</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Pseudo</span><span class="p">[</span><span class="s1">&#39;nth-child&#39;</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;2n+1&#39;</span><span class="p">,</span> <span class="nx">local</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">odd</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">argument</span><span class="p">,</span> <span class="nx">local</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">Selectors</span><span class="p">.</span><span class="nx">Pseudo</span><span class="p">[</span><span class="s1">&#39;nth-child&#39;</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;2n&#39;</span><span class="p">,</span> <span class="nx">local</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;	&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Domready.js
      Contains the domready custom event.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>2691</li>
        <li>2692</li>
        <li>2693</li>
        <li>2694</li>
        <li>2695</li>
        <li>2696</li>
        <li>2697</li>
        <li>2698</li>
        <li>2699</li>
        <li>2700</li>
        <li>2701</li>
        <li>2702</li>
        <li>2703</li>
        <li>2704</li>
        <li>2705</li>
        <li>2706</li>
        <li>2707</li>
        <li>2708</li>
        <li>2709</li>
        <li>2710</li>
        <li>2711</li>
        <li>2712</li>
        <li>2713</li>
        <li>2714</li>
        <li>2715</li>
        <li>2716</li>
        <li>2717</li>
        <li>2718</li>
        <li>2719</li>
        <li>2720</li>
        <li>2721</li>
        <li>2722</li>
        <li>2723</li>
        <li>2724</li>
        <li>2725</li>
        <li>2726</li>
        <li>2727</li>
        <li>2728</li>
        <li>2729</li>
        <li>2730</li>
      </ol>
      <code><div class="highlight"><pre><span class="nx">Element</span><span class="p">.</span><span class="nx">Events</span><span class="p">.</span><span class="nx">domready</span> <span class="o">=</span> <span class="p">{</span>&#x000A;&#x000A;	<span class="nx">onAdd</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">loaded</span><span class="p">)</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;	&#x000A;	<span class="kd">var</span> <span class="nx">domready</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">loaded</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>&#x000A;		<span class="nx">Browser</span><span class="p">.</span><span class="nx">loaded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>&#x000A;		<span class="nb">window</span><span class="p">.</span><span class="nx">fireEvent</span><span class="p">(</span><span class="s1">&#39;domready&#39;</span><span class="p">);</span>&#x000A;		<span class="nb">document</span><span class="p">.</span><span class="nx">fireEvent</span><span class="p">(</span><span class="s1">&#39;domready&#39;</span><span class="p">);</span>&#x000A;	<span class="p">};</span>&#x000A;	&#x000A;	<span class="k">switch</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">name</span><span class="p">){</span>&#x000A;&#x000A;		<span class="k">case</span> <span class="s1">&#39;webkit&#39;</span><span class="o">:</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;			<span class="p">([</span><span class="s1">&#39;loaded&#39;</span><span class="p">,</span> <span class="s1">&#39;complete&#39;</span><span class="p">].</span><span class="nx">contains</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">readyState</span><span class="p">))</span> <span class="o">?</span> <span class="nx">domready</span><span class="p">()</span> <span class="o">:</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">delay</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>&#x000A;		<span class="p">})();</span> <span class="k">break</span><span class="p">;</span>&#x000A;&#x000A;		<span class="k">case</span> <span class="s1">&#39;trident&#39;</span><span class="o">:</span>&#x000A;			<span class="kd">var</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>&#x000A;			<span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;				<span class="p">(</span><span class="nx">$try</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;					<span class="nx">temp</span><span class="p">.</span><span class="nx">doScroll</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">);</span>&#x000A;					<span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="nx">temp</span><span class="p">).</span><span class="nx">inject</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">).</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="s1">&#39;temp&#39;</span><span class="p">).</span><span class="nx">dispose</span><span class="p">();</span>&#x000A;				<span class="p">}))</span> <span class="o">?</span> <span class="nx">domready</span><span class="p">()</span> <span class="o">:</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">delay</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>&#x000A;			<span class="p">})();</span>&#x000A;		<span class="k">break</span><span class="p">;</span>&#x000A;		&#x000A;		<span class="k">default</span><span class="o">:</span>&#x000A;			<span class="nb">window</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="nx">domready</span><span class="p">);</span>&#x000A;			<span class="nb">document</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">(</span><span class="s1">&#39;DOMContentLoaded&#39;</span><span class="p">,</span> <span class="nx">domready</span><span class="p">);</span>&#x000A;&#x000A;	<span class="p">}</span>&#x000A;	&#x000A;<span class="p">})();</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: JSON.js
      JSON encoder and decoder.</p>
      
      <p>License:
      MIT-style license.</p>
      
      <p>See Also:
      <a href="http://www.json.org/">http://www.json.org/</a></p>
    </section>
    <figure>
      <ol>
        <li>2743</li>
        <li>2744</li>
        <li>2745</li>
        <li>2746</li>
        <li>2747</li>
        <li>2748</li>
        <li>2749</li>
        <li>2750</li>
        <li>2751</li>
        <li>2752</li>
        <li>2753</li>
        <li>2754</li>
        <li>2755</li>
        <li>2756</li>
        <li>2757</li>
        <li>2758</li>
        <li>2759</li>
        <li>2760</li>
        <li>2761</li>
        <li>2762</li>
        <li>2763</li>
        <li>2764</li>
        <li>2765</li>
        <li>2766</li>
        <li>2767</li>
        <li>2768</li>
        <li>2769</li>
        <li>2770</li>
        <li>2771</li>
        <li>2772</li>
        <li>2773</li>
        <li>2774</li>
        <li>2775</li>
        <li>2776</li>
        <li>2777</li>
        <li>2778</li>
        <li>2779</li>
        <li>2780</li>
        <li>2781</li>
        <li>2782</li>
        <li>2783</li>
        <li>2784</li>
      </ol>
      <code><div class="highlight"><pre><span class="kd">var</span> <span class="nx">JSON</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">encode</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">){</span>&#x000A;		<span class="k">switch</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">obj</span><span class="p">)){</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;string&#39;</span><span class="o">:</span>&#x000A;				<span class="k">return</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[\x00-\x1f\\&quot;]/g</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">$replaceChars</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;array&#39;</span><span class="o">:</span>&#x000A;				<span class="k">return</span> <span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="nb">String</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">encode</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="nx">$defined</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;object&#39;</span><span class="o">:</span> <span class="k">case</span> <span class="s1">&#39;hash&#39;</span><span class="o">:</span>&#x000A;				<span class="kd">var</span> <span class="nx">string</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;				<span class="nx">Hash</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>&#x000A;					<span class="kd">var</span> <span class="nx">json</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">encode</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>&#x000A;					<span class="k">if</span> <span class="p">(</span><span class="nx">json</span><span class="p">)</span> <span class="nx">string</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">encode</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="nx">json</span><span class="p">);</span>&#x000A;				<span class="p">});</span>&#x000A;				<span class="k">return</span> <span class="s1">&#39;{&#39;</span> <span class="o">+</span> <span class="nx">string</span> <span class="o">+</span> <span class="s1">&#39;}&#39;</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;number&#39;</span><span class="o">:</span> <span class="k">case</span> <span class="s1">&#39;boolean&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="nb">String</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>&#x000A;			<span class="k">case</span> <span class="kc">false</span><span class="o">:</span> <span class="k">return</span> <span class="s1">&#39;null&#39;</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="kc">null</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">$specialChars</span><span class="o">:</span> <span class="p">{</span><span class="s1">&#39;\b&#39;</span><span class="o">:</span> <span class="s1">&#39;\\b&#39;</span><span class="p">,</span> <span class="s1">&#39;\t&#39;</span><span class="o">:</span> <span class="s1">&#39;\\t&#39;</span><span class="p">,</span> <span class="s1">&#39;\n&#39;</span><span class="o">:</span> <span class="s1">&#39;\\n&#39;</span><span class="p">,</span> <span class="s1">&#39;\f&#39;</span><span class="o">:</span> <span class="s1">&#39;\\f&#39;</span><span class="p">,</span> <span class="s1">&#39;\r&#39;</span><span class="o">:</span> <span class="s1">&#39;\\r&#39;</span><span class="p">,</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">:</span> <span class="s1">&#39;\\&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;\\&#39;</span><span class="o">:</span> <span class="s1">&#39;\\\\&#39;</span><span class="p">},</span>&#x000A;&#x000A;	<span class="nx">$replaceChars</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">chr</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">$specialChars</span><span class="p">[</span><span class="nx">chr</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;\\u00&#39;</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">chr</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">()</span> <span class="o">/</span> <span class="mi">16</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">chr</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">()</span> <span class="o">%</span> <span class="mi">16</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">decode</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">secure</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;string&#39;</span> <span class="o">||</span> <span class="o">!</span><span class="nx">string</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">secure</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="sr">/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\\./g</span><span class="p">,</span> <span class="s1">&#39;@&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&quot;[^&quot;\\\n\r]*&quot;/g</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)))</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nx">string</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Native</span><span class="p">.</span><span class="nx">implement</span><span class="p">([</span><span class="nx">Hash</span><span class="p">,</span> <span class="nb">Array</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span> <span class="nb">Number</span><span class="p">],</span> <span class="p">{</span>&#x000A;&#x000A;	<span class="nx">toJSON</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">encode</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Cookie.js
      Class for creating, loading, and saving browser Cookies.</p>
      
      <p>License:
      MIT-style license.</p>
      
      <p>Credits:
      Based on the functions by Peter-Paul Koch (http://quirksmode.org).</p>
    </section>
    <figure>
      <ol>
        <li>2798</li>
        <li>2799</li>
        <li>2800</li>
        <li>2801</li>
        <li>2802</li>
        <li>2803</li>
        <li>2804</li>
        <li>2805</li>
        <li>2806</li>
        <li>2807</li>
        <li>2808</li>
        <li>2809</li>
        <li>2810</li>
        <li>2811</li>
        <li>2812</li>
        <li>2813</li>
        <li>2814</li>
        <li>2815</li>
        <li>2816</li>
        <li>2817</li>
        <li>2818</li>
        <li>2819</li>
        <li>2820</li>
        <li>2821</li>
        <li>2822</li>
        <li>2823</li>
        <li>2824</li>
        <li>2825</li>
        <li>2826</li>
        <li>2827</li>
        <li>2828</li>
        <li>2829</li>
        <li>2830</li>
        <li>2831</li>
        <li>2832</li>
        <li>2833</li>
        <li>2834</li>
        <li>2835</li>
        <li>2836</li>
        <li>2837</li>
        <li>2838</li>
        <li>2839</li>
        <li>2840</li>
        <li>2841</li>
        <li>2842</li>
        <li>2843</li>
        <li>2844</li>
        <li>2845</li>
        <li>2846</li>
        <li>2847</li>
        <li>2848</li>
        <li>2849</li>
        <li>2850</li>
        <li>2851</li>
      </ol>
      <code><div class="highlight"><pre><span class="kd">var</span> <span class="nx">Cookie</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">Implements</span><span class="o">:</span> <span class="nx">Options</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">options</span><span class="o">:</span> <span class="p">{</span>&#x000A;		<span class="nx">path</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>&#x000A;		<span class="nx">domain</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>&#x000A;		<span class="nx">duration</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>&#x000A;		<span class="nx">secure</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>&#x000A;		<span class="nb">document</span><span class="o">:</span> <span class="nb">document</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">key</span> <span class="o">=</span> <span class="nx">key</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">setOptions</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">write</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="nx">value</span> <span class="o">=</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">domain</span><span class="p">)</span> <span class="nx">value</span> <span class="o">+=</span> <span class="s1">&#39;; domain=&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">domain</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">path</span><span class="p">)</span> <span class="nx">value</span> <span class="o">+=</span> <span class="s1">&#39;; path=&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">path</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">duration</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>&#x000A;			<span class="nx">date</span><span class="p">.</span><span class="nx">setTime</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">duration</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span>&#x000A;			<span class="nx">value</span> <span class="o">+=</span> <span class="s1">&#39;; expires=&#39;</span> <span class="o">+</span> <span class="nx">date</span><span class="p">.</span><span class="nx">toGMTString</span><span class="p">();</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">secure</span><span class="p">)</span> <span class="nx">value</span> <span class="o">+=</span> <span class="s1">&#39;; secure&#39;</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">key</span> <span class="o">+</span> <span class="s1">&#39;=&#39;</span> <span class="o">+</span> <span class="nx">value</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">read</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">cookie</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="s1">&#39;(?:^|;)\\s*&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">key</span><span class="p">.</span><span class="nx">escapeRegExp</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;=([^;]*)&#39;</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">?</span> <span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">value</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">dispose</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">new</span> <span class="nx">Cookie</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">key</span><span class="p">,</span> <span class="nx">$merge</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span> <span class="p">{</span><span class="nx">duration</span><span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">})).</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Cookie</span><span class="p">.</span><span class="nx">write</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">options</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="k">new</span> <span class="nx">Cookie</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">options</span><span class="p">).</span><span class="nx">write</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Cookie</span><span class="p">.</span><span class="nx">read</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="k">new</span> <span class="nx">Cookie</span><span class="p">(</span><span class="nx">key</span><span class="p">).</span><span class="nx">read</span><span class="p">();</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Cookie</span><span class="p">.</span><span class="nx">dispose</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">options</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="k">new</span> <span class="nx">Cookie</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">options</span><span class="p">).</span><span class="nx">dispose</span><span class="p">();</span>&#x000A;<span class="p">};</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Swiff.js
      Wrapper for embedding SWF movies. Supports (and fixes) External Interface Communication.</p>
      
      <p>License:
      MIT-style license.</p>
      
      <p>Credits:
      Flash detection &amp; Internet Explorer + Flash Player 9 fix inspired by SWFObject.</p>
    </section>
    <figure>
      <ol>
        <li>2864</li>
        <li>2865</li>
        <li>2866</li>
        <li>2867</li>
        <li>2868</li>
        <li>2869</li>
        <li>2870</li>
        <li>2871</li>
        <li>2872</li>
        <li>2873</li>
        <li>2874</li>
        <li>2875</li>
        <li>2876</li>
        <li>2877</li>
        <li>2878</li>
        <li>2879</li>
        <li>2880</li>
        <li>2881</li>
        <li>2882</li>
        <li>2883</li>
        <li>2884</li>
        <li>2885</li>
        <li>2886</li>
        <li>2887</li>
        <li>2888</li>
        <li>2889</li>
        <li>2890</li>
        <li>2891</li>
        <li>2892</li>
        <li>2893</li>
        <li>2894</li>
        <li>2895</li>
        <li>2896</li>
        <li>2897</li>
        <li>2898</li>
        <li>2899</li>
        <li>2900</li>
        <li>2901</li>
        <li>2902</li>
        <li>2903</li>
        <li>2904</li>
        <li>2905</li>
        <li>2906</li>
        <li>2907</li>
        <li>2908</li>
        <li>2909</li>
        <li>2910</li>
        <li>2911</li>
        <li>2912</li>
        <li>2913</li>
        <li>2914</li>
        <li>2915</li>
        <li>2916</li>
        <li>2917</li>
        <li>2918</li>
        <li>2919</li>
        <li>2920</li>
        <li>2921</li>
        <li>2922</li>
        <li>2923</li>
        <li>2924</li>
        <li>2925</li>
        <li>2926</li>
        <li>2927</li>
        <li>2928</li>
        <li>2929</li>
        <li>2930</li>
        <li>2931</li>
        <li>2932</li>
        <li>2933</li>
        <li>2934</li>
        <li>2935</li>
        <li>2936</li>
        <li>2937</li>
        <li>2938</li>
        <li>2939</li>
        <li>2940</li>
        <li>2941</li>
        <li>2942</li>
        <li>2943</li>
        <li>2944</li>
        <li>2945</li>
        <li>2946</li>
        <li>2947</li>
        <li>2948</li>
        <li>2949</li>
        <li>2950</li>
        <li>2951</li>
        <li>2952</li>
      </ol>
      <code><div class="highlight"><pre><span class="kd">var</span> <span class="nx">Swiff</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">Implements</span><span class="o">:</span> <span class="p">[</span><span class="nx">Options</span><span class="p">],</span>&#x000A;&#x000A;	<span class="nx">options</span><span class="o">:</span> <span class="p">{</span>&#x000A;		<span class="nx">id</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>&#x000A;		<span class="nx">height</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>&#x000A;		<span class="nx">width</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>&#x000A;		<span class="nx">container</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>&#x000A;		<span class="nx">properties</span><span class="o">:</span> <span class="p">{},</span>&#x000A;		<span class="nx">params</span><span class="o">:</span> <span class="p">{</span>&#x000A;			<span class="nx">quality</span><span class="o">:</span> <span class="s1">&#39;high&#39;</span><span class="p">,</span>&#x000A;			<span class="nx">allowScriptAccess</span><span class="o">:</span> <span class="s1">&#39;always&#39;</span><span class="p">,</span>&#x000A;			<span class="nx">wMode</span><span class="o">:</span> <span class="s1">&#39;transparent&#39;</span><span class="p">,</span>&#x000A;			<span class="nx">swLiveConnect</span><span class="o">:</span> <span class="kc">true</span>&#x000A;		<span class="p">},</span>&#x000A;		<span class="nx">callBacks</span><span class="o">:</span> <span class="p">{},</span>&#x000A;		<span class="nx">vars</span><span class="o">:</span> <span class="p">{}</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">toElement</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">object</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">instance</span> <span class="o">=</span> <span class="s1">&#39;Swiff_&#39;</span> <span class="o">+</span> <span class="nx">$time</span><span class="p">();</span>&#x000A;&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">setOptions</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>&#x000A;		<span class="nx">options</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">id</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">instance</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">container</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">container</span><span class="p">);</span>&#x000A;&#x000A;		<span class="nx">Swiff</span><span class="p">.</span><span class="nx">CallBacks</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">instance</span><span class="p">]</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;&#x000A;		<span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">params</span><span class="p">,</span> <span class="nx">vars</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">vars</span><span class="p">,</span> <span class="nx">callBacks</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">callBacks</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">properties</span> <span class="o">=</span> <span class="nx">$extend</span><span class="p">({</span><span class="nx">height</span><span class="o">:</span> <span class="nx">options</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span> <span class="nx">width</span><span class="o">:</span> <span class="nx">options</span><span class="p">.</span><span class="nx">width</span><span class="p">},</span> <span class="nx">options</span><span class="p">.</span><span class="nx">properties</span><span class="p">);</span>&#x000A;&#x000A;		<span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>&#x000A;&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">callBack</span> <span class="k">in</span> <span class="nx">callBacks</span><span class="p">){</span>&#x000A;			<span class="nx">Swiff</span><span class="p">.</span><span class="nx">CallBacks</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">instance</span><span class="p">][</span><span class="nx">callBack</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">option</span><span class="p">){</span>&#x000A;				<span class="k">return</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;					<span class="k">return</span> <span class="nx">option</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">object</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>&#x000A;				<span class="p">};</span>&#x000A;			<span class="p">})(</span><span class="nx">callBacks</span><span class="p">[</span><span class="nx">callBack</span><span class="p">]);</span>&#x000A;			<span class="nx">vars</span><span class="p">[</span><span class="nx">callBack</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Swiff.CallBacks.&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">instance</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nx">callBack</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;&#x000A;		<span class="nx">params</span><span class="p">.</span><span class="nx">flashVars</span> <span class="o">=</span> <span class="nx">Hash</span><span class="p">.</span><span class="nx">toQueryString</span><span class="p">(</span><span class="nx">vars</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span><span class="p">){</span>&#x000A;			<span class="nx">properties</span><span class="p">.</span><span class="nx">classid</span> <span class="o">=</span> <span class="s1">&#39;clsid:D27CDB6E-AE6D-11cf-96B8-444553540000&#39;</span><span class="p">;</span>&#x000A;			<span class="nx">params</span><span class="p">.</span><span class="nx">movie</span> <span class="o">=</span> <span class="nx">path</span><span class="p">;</span>&#x000A;		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>&#x000A;			<span class="nx">properties</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">&#39;application/x-shockwave-flash&#39;</span><span class="p">;</span>&#x000A;			<span class="nx">properties</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">path</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="kd">var</span> <span class="nx">build</span> <span class="o">=</span> <span class="s1">&#39;&lt;object id=&quot;&#39;</span> <span class="o">+</span> <span class="nx">id</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">;</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">property</span> <span class="k">in</span> <span class="nx">properties</span><span class="p">)</span> <span class="nx">build</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">property</span> <span class="o">+</span> <span class="s1">&#39;=&quot;&#39;</span> <span class="o">+</span> <span class="nx">properties</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">;</span>&#x000A;		<span class="nx">build</span> <span class="o">+=</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">;</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">param</span> <span class="k">in</span> <span class="nx">params</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">params</span><span class="p">[</span><span class="nx">param</span><span class="p">])</span> <span class="nx">build</span> <span class="o">+=</span> <span class="s1">&#39;&lt;param name=&quot;&#39;</span> <span class="o">+</span> <span class="nx">param</span> <span class="o">+</span> <span class="s1">&#39;&quot; value=&quot;&#39;</span> <span class="o">+</span> <span class="nx">params</span><span class="p">[</span><span class="nx">param</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;&quot; /&gt;&#39;</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="nx">build</span> <span class="o">+=</span> <span class="s1">&#39;&lt;/object&gt;&#39;</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">object</span> <span class="o">=</span>  <span class="p">((</span><span class="nx">container</span><span class="p">)</span> <span class="o">?</span> <span class="nx">container</span><span class="p">.</span><span class="nx">empty</span><span class="p">()</span> <span class="o">:</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)).</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="nx">build</span><span class="p">).</span><span class="nx">firstChild</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">replaces</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">){</span>&#x000A;		<span class="nx">element</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>&#x000A;		<span class="nx">element</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">replaceChild</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">toElement</span><span class="p">(),</span> <span class="nx">element</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">inject</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">){</span>&#x000A;		<span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="kc">true</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">toElement</span><span class="p">());</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">remote</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="nx">Swiff</span><span class="p">.</span><span class="nx">remote</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">Swiff</span><span class="p">,</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">toElement</span><span class="p">()].</span><span class="nx">extend</span><span class="p">(</span><span class="nx">arguments</span><span class="p">));</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Swiff</span><span class="p">.</span><span class="nx">CallBacks</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;&#x000A;<span class="nx">Swiff</span><span class="p">.</span><span class="nx">remote</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>&#x000A;	<span class="kd">var</span> <span class="nx">rs</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">CallFunction</span><span class="p">(</span><span class="s1">&#39;&lt;invoke name=&quot;&#39;</span> <span class="o">+</span> <span class="nx">fn</span> <span class="o">+</span> <span class="s1">&#39;&quot; returntype=&quot;javascript&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">__flash__argumentsToXML</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;/invoke&gt;&#39;</span><span class="p">);</span>&#x000A;	<span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="nx">rs</span><span class="p">);</span>&#x000A;<span class="p">};</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Fx.js
      Contains the basic animation logic to be extended by all other Fx Classes.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>2962</li>
        <li>2963</li>
        <li>2964</li>
        <li>2965</li>
        <li>2966</li>
      </ol>
      <code><div class="highlight"><pre><span class="kd">var</span> <span class="nx">Fx</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">Implements</span><span class="o">:</span> <span class="p">[</span><span class="nx">Chain</span><span class="p">,</span> <span class="nx">Events</span><span class="p">,</span> <span class="nx">Options</span><span class="p">],</span>&#x000A;&#x000A;	<span class="nx">options</span><span class="o">:</span> <span class="p">{</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>onStart: $empty,
      onCancel: $empty,
      onComplete: $empty,</p>
    </section>
    <figure>
      <ol>
        <li>2972</li>
        <li>2973</li>
        <li>2974</li>
        <li>2975</li>
        <li>2976</li>
        <li>2977</li>
        <li>2978</li>
        <li>2979</li>
        <li>2980</li>
        <li>2981</li>
        <li>2982</li>
        <li>2983</li>
        <li>2984</li>
        <li>2985</li>
        <li>2986</li>
        <li>2987</li>
        <li>2988</li>
        <li>2989</li>
        <li>2990</li>
        <li>2991</li>
        <li>2992</li>
        <li>2993</li>
        <li>2994</li>
        <li>2995</li>
        <li>2996</li>
        <li>2997</li>
        <li>2998</li>
        <li>2999</li>
        <li>3000</li>
        <li>3001</li>
        <li>3002</li>
        <li>3003</li>
        <li>3004</li>
        <li>3005</li>
        <li>3006</li>
        <li>3007</li>
        <li>3008</li>
        <li>3009</li>
        <li>3010</li>
        <li>3011</li>
        <li>3012</li>
        <li>3013</li>
        <li>3014</li>
        <li>3015</li>
        <li>3016</li>
        <li>3017</li>
        <li>3018</li>
        <li>3019</li>
        <li>3020</li>
        <li>3021</li>
        <li>3022</li>
        <li>3023</li>
        <li>3024</li>
        <li>3025</li>
        <li>3026</li>
        <li>3027</li>
        <li>3028</li>
        <li>3029</li>
        <li>3030</li>
        <li>3031</li>
        <li>3032</li>
        <li>3033</li>
        <li>3034</li>
        <li>3035</li>
        <li>3036</li>
        <li>3037</li>
        <li>3038</li>
        <li>3039</li>
        <li>3040</li>
        <li>3041</li>
        <li>3042</li>
        <li>3043</li>
        <li>3044</li>
        <li>3045</li>
        <li>3046</li>
        <li>3047</li>
        <li>3048</li>
        <li>3049</li>
        <li>3050</li>
        <li>3051</li>
        <li>3052</li>
        <li>3053</li>
        <li>3054</li>
        <li>3055</li>
        <li>3056</li>
        <li>3057</li>
        <li>3058</li>
        <li>3059</li>
        <li>3060</li>
        <li>3061</li>
        <li>3062</li>
        <li>3063</li>
        <li>3064</li>
        <li>3065</li>
        <li>3066</li>
        <li>3067</li>
        <li>3068</li>
        <li>3069</li>
        <li>3070</li>
        <li>3071</li>
        <li>3072</li>
        <li>3073</li>
        <li>3074</li>
        <li>3075</li>
        <li>3076</li>
        <li>3077</li>
        <li>3078</li>
        <li>3079</li>
        <li>3080</li>
      </ol>
      <code><div class="highlight"><pre>		<span class="nx">fps</span><span class="o">:</span> <span class="mi">50</span><span class="p">,</span>&#x000A;		<span class="nx">unit</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>&#x000A;		<span class="nx">duration</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span>&#x000A;		<span class="nx">link</span><span class="o">:</span> <span class="s1">&#39;ignore&#39;</span><span class="p">,</span>&#x000A;		<span class="nx">transition</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">){</span>&#x000A;			<span class="k">return</span> <span class="o">-</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="nx">p</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">subject</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">subject</span> <span class="o">||</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">setOptions</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="nx">Fx</span><span class="p">.</span><span class="nx">Durations</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">duration</span><span class="p">]</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">duration</span><span class="p">.</span><span class="nx">toInt</span><span class="p">();</span>&#x000A;		<span class="kd">var</span> <span class="nx">wait</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">wait</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">wait</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">link</span> <span class="o">=</span> <span class="s1">&#39;cancel&#39;</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">step</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">time</span> <span class="o">=</span> <span class="nx">$time</span><span class="p">();</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">time</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">time</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">duration</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">delta</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">transition</span><span class="p">((</span><span class="nx">time</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">time</span><span class="p">)</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">duration</span><span class="p">);</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">compute</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span> <span class="nx">delta</span><span class="p">));</span>&#x000A;		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">compute</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">to</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">complete</span><span class="p">();</span>&#x000A;		<span class="p">}</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">now</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">now</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">compute</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">delta</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">Fx</span><span class="p">.</span><span class="nx">compute</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">delta</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">check</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">caller</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">timer</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;		<span class="k">switch</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">link</span><span class="p">){</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;cancel&#39;</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">cancel</span><span class="p">();</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;chain&#39;</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">chain</span><span class="p">(</span><span class="nx">caller</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">)));</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">start</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">,</span> <span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">))</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">from</span> <span class="o">=</span> <span class="nx">from</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">to</span> <span class="o">=</span> <span class="nx">to</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">time</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">startTimer</span><span class="p">();</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">onStart</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">complete</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stopTimer</span><span class="p">())</span> <span class="k">this</span><span class="p">.</span><span class="nx">onComplete</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">cancel</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">stopTimer</span><span class="p">())</span> <span class="k">this</span><span class="p">.</span><span class="nx">onCancel</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">onStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">fireEvent</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">subject</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">onComplete</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">fireEvent</span><span class="p">(</span><span class="s1">&#39;complete&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">subject</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">callChain</span><span class="p">())</span> <span class="k">this</span><span class="p">.</span><span class="nx">fireEvent</span><span class="p">(</span><span class="s1">&#39;chainComplete&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">subject</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">onCancel</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">fireEvent</span><span class="p">(</span><span class="s1">&#39;cancel&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">subject</span><span class="p">).</span><span class="nx">clearChain</span><span class="p">();</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">pause</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">stopTimer</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">resume</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">startTimer</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">stopTimer</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">timer</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">time</span> <span class="o">=</span> <span class="nx">$time</span><span class="p">()</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">time</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">$clear</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">startTimer</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timer</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">time</span> <span class="o">=</span> <span class="nx">$time</span><span class="p">()</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">time</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">step</span><span class="p">.</span><span class="nx">periodical</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">fps</span><span class="p">),</span> <span class="k">this</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Fx</span><span class="p">.</span><span class="nx">compute</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">delta</span><span class="p">){</span>&#x000A;	<span class="k">return</span> <span class="p">(</span><span class="nx">to</span> <span class="o">-</span> <span class="nx">from</span><span class="p">)</span> <span class="o">*</span> <span class="nx">delta</span> <span class="o">+</span> <span class="nx">from</span><span class="p">;</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Fx</span><span class="p">.</span><span class="nx">Durations</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;short&#39;</span><span class="o">:</span> <span class="mi">250</span><span class="p">,</span> <span class="s1">&#39;normal&#39;</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span> <span class="s1">&#39;long&#39;</span><span class="o">:</span> <span class="mi">1000</span><span class="p">};</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Fx.CSS.js
      Contains the CSS animation logic. Used by Fx.Tween, Fx.Morph, Fx.Elements.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>3091</li>
        <li>3092</li>
        <li>3093</li>
      </ol>
      <code><div class="highlight"><pre><span class="nx">Fx</span><span class="p">.</span><span class="nx">CSS</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">Extends</span><span class="o">:</span> <span class="nx">Fx</span><span class="p">,</span>&#x000A;</pre></div></code>
    </figure>
    <section><p>prepares the base from/to object</p></section>
    <figure>
      <ol>
        <li>3097</li>
        <li>3098</li>
        <li>3099</li>
        <li>3100</li>
        <li>3101</li>
        <li>3102</li>
        <li>3103</li>
        <li>3104</li>
        <li>3105</li>
        <li>3106</li>
      </ol>
      <code><div class="highlight"><pre>	<span class="nx">prepare</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">property</span><span class="p">,</span> <span class="nx">values</span><span class="p">){</span>&#x000A;		<span class="nx">values</span> <span class="o">=</span> <span class="nx">$splat</span><span class="p">(</span><span class="nx">values</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">values1</span> <span class="o">=</span> <span class="nx">values</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$chk</span><span class="p">(</span><span class="nx">values1</span><span class="p">)){</span>&#x000A;			<span class="nx">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">values</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>&#x000A;			<span class="nx">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">element</span><span class="p">.</span><span class="nx">getStyle</span><span class="p">(</span><span class="nx">property</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="kd">var</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parse</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="p">{</span><span class="nx">from</span><span class="o">:</span> <span class="nx">parsed</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">to</span><span class="o">:</span> <span class="nx">parsed</span><span class="p">[</span><span class="mi">1</span><span class="p">]};</span>&#x000A;	<span class="p">},</span>&#x000A;</pre></div></code>
    </figure>
    <section><p>parses a value into an array</p></section>
    <figure>
      <ol>
        <li>3110</li>
        <li>3111</li>
        <li>3112</li>
        <li>3113</li>
        <li>3114</li>
        <li>3115</li>
        <li>3116</li>
        <li>3117</li>
        <li>3118</li>
        <li>3119</li>
        <li>3120</li>
        <li>3121</li>
        <li>3122</li>
        <li>3123</li>
        <li>3124</li>
      </ol>
      <code><div class="highlight"><pre>	<span class="nx">parse</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="nx">value</span> <span class="o">=</span> <span class="nx">$lambda</span><span class="p">(</span><span class="nx">value</span><span class="p">)();</span>&#x000A;		<span class="nx">value</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">value</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="o">:</span> <span class="nx">$splat</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">){</span>&#x000A;			<span class="nx">val</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>&#x000A;			<span class="kd">var</span> <span class="nx">found</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>&#x000A;			<span class="nx">Fx</span><span class="p">.</span><span class="nx">CSS</span><span class="p">.</span><span class="nx">Parsers</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">parser</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">found</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>&#x000A;				<span class="kd">var</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">parser</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">$chk</span><span class="p">(</span><span class="nx">parsed</span><span class="p">))</span> <span class="nx">found</span> <span class="o">=</span> <span class="p">{</span><span class="nx">value</span><span class="o">:</span> <span class="nx">parsed</span><span class="p">,</span> <span class="nx">parser</span><span class="o">:</span> <span class="nx">parser</span><span class="p">};</span>&#x000A;			<span class="p">});</span>&#x000A;			<span class="nx">found</span> <span class="o">=</span> <span class="nx">found</span> <span class="o">||</span> <span class="p">{</span><span class="nx">value</span><span class="o">:</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">parser</span><span class="o">:</span> <span class="nx">Fx</span><span class="p">.</span><span class="nx">CSS</span><span class="p">.</span><span class="nx">Parsers</span><span class="p">.</span><span class="nb">String</span><span class="p">};</span>&#x000A;			<span class="k">return</span> <span class="nx">found</span><span class="p">;</span>&#x000A;		<span class="p">});</span>&#x000A;	<span class="p">},</span>&#x000A;</pre></div></code>
    </figure>
    <section><p>computes by a from and to prepared objects, using their parsers.</p></section>
    <figure>
      <ol>
        <li>3128</li>
        <li>3129</li>
        <li>3130</li>
        <li>3131</li>
        <li>3132</li>
        <li>3133</li>
        <li>3134</li>
        <li>3135</li>
      </ol>
      <code><div class="highlight"><pre>	<span class="nx">compute</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">delta</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">computed</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		<span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">from</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">to</span><span class="p">.</span><span class="nx">length</span><span class="p">)).</span><span class="nx">times</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">){</span>&#x000A;			<span class="nx">computed</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">value</span><span class="o">:</span> <span class="nx">from</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">parser</span><span class="p">.</span><span class="nx">compute</span><span class="p">(</span><span class="nx">from</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">value</span><span class="p">,</span> <span class="nx">to</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">value</span><span class="p">,</span> <span class="nx">delta</span><span class="p">),</span> <span class="nx">parser</span><span class="o">:</span> <span class="nx">from</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">parser</span><span class="p">});</span>&#x000A;		<span class="p">});</span>&#x000A;		<span class="nx">computed</span><span class="p">.</span><span class="nx">$family</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;fx:css:value&#39;</span><span class="p">};</span>&#x000A;		<span class="k">return</span> <span class="nx">computed</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;</pre></div></code>
    </figure>
    <section><p>serves the value as settable</p></section>
    <figure>
      <ol>
        <li>3139</li>
        <li>3140</li>
        <li>3141</li>
        <li>3142</li>
        <li>3143</li>
        <li>3144</li>
        <li>3145</li>
        <li>3146</li>
      </ol>
      <code><div class="highlight"><pre>	<span class="nx">serve</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">unit</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;fx:css:value&#39;</span><span class="p">)</span> <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">returned</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		<span class="nx">value</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">bit</span><span class="p">){</span>&#x000A;			<span class="nx">returned</span> <span class="o">=</span> <span class="nx">returned</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">bit</span><span class="p">.</span><span class="nx">parser</span><span class="p">.</span><span class="nx">serve</span><span class="p">(</span><span class="nx">bit</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="nx">unit</span><span class="p">));</span>&#x000A;		<span class="p">});</span>&#x000A;		<span class="k">return</span> <span class="nx">returned</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;</pre></div></code>
    </figure>
    <section><p>renders the change to an element</p></section>
    <figure>
      <ol>
        <li>3150</li>
        <li>3151</li>
        <li>3152</li>
      </ol>
      <code><div class="highlight"><pre>	<span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">property</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">unit</span><span class="p">){</span>&#x000A;		<span class="nx">element</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="nx">property</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">serve</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">unit</span><span class="p">));</span>&#x000A;	<span class="p">},</span>&#x000A;</pre></div></code>
    </figure>
    <section><p>searches inside the page css to find the values for a selector</p></section>
    <figure>
      <ol>
        <li>3156</li>
        <li>3157</li>
        <li>3158</li>
        <li>3159</li>
        <li>3160</li>
        <li>3161</li>
        <li>3162</li>
        <li>3163</li>
        <li>3164</li>
        <li>3165</li>
        <li>3166</li>
        <li>3167</li>
        <li>3168</li>
        <li>3169</li>
        <li>3170</li>
        <li>3171</li>
        <li>3172</li>
        <li>3173</li>
        <li>3174</li>
        <li>3175</li>
        <li>3176</li>
        <li>3177</li>
        <li>3178</li>
        <li>3179</li>
        <li>3180</li>
        <li>3181</li>
        <li>3182</li>
        <li>3183</li>
        <li>3184</li>
        <li>3185</li>
        <li>3186</li>
        <li>3187</li>
        <li>3188</li>
        <li>3189</li>
        <li>3190</li>
        <li>3191</li>
        <li>3192</li>
        <li>3193</li>
        <li>3194</li>
        <li>3195</li>
        <li>3196</li>
        <li>3197</li>
        <li>3198</li>
        <li>3199</li>
        <li>3200</li>
        <li>3201</li>
        <li>3202</li>
        <li>3203</li>
        <li>3204</li>
        <li>3205</li>
        <li>3206</li>
        <li>3207</li>
        <li>3208</li>
        <li>3209</li>
        <li>3210</li>
        <li>3211</li>
        <li>3212</li>
        <li>3213</li>
        <li>3214</li>
      </ol>
      <code><div class="highlight"><pre>	<span class="nx">search</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">Fx</span><span class="p">.</span><span class="nx">CSS</span><span class="p">.</span><span class="nx">Cache</span><span class="p">[</span><span class="nx">selector</span><span class="p">])</span> <span class="k">return</span> <span class="nx">Fx</span><span class="p">.</span><span class="nx">CSS</span><span class="p">.</span><span class="nx">Cache</span><span class="p">[</span><span class="nx">selector</span><span class="p">];</span>&#x000A;		<span class="kd">var</span> <span class="nx">to</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;		<span class="nb">Array</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">styleSheets</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">sheet</span><span class="p">,</span> <span class="nx">j</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">href</span> <span class="o">=</span> <span class="nx">sheet</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">href</span> <span class="o">&amp;&amp;</span> <span class="nx">href</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s1">&#39;://&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">href</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">domain</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>&#x000A;			<span class="kd">var</span> <span class="nx">rules</span> <span class="o">=</span> <span class="nx">sheet</span><span class="p">.</span><span class="nx">rules</span> <span class="o">||</span> <span class="nx">sheet</span><span class="p">.</span><span class="nx">cssRules</span><span class="p">;</span>&#x000A;			<span class="nb">Array</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">rules</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rule</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">rule</span><span class="p">.</span><span class="nx">style</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>&#x000A;				<span class="kd">var</span> <span class="nx">selectorText</span> <span class="o">=</span> <span class="p">(</span><span class="nx">rule</span><span class="p">.</span><span class="nx">selectorText</span><span class="p">)</span> <span class="o">?</span> <span class="nx">rule</span><span class="p">.</span><span class="nx">selectorText</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^\w+/</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">){</span>&#x000A;					<span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>&#x000A;				<span class="p">})</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">selectorText</span> <span class="o">||</span> <span class="o">!</span><span class="nx">selectorText</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="s1">&#39;^&#39;</span> <span class="o">+</span> <span class="nx">selector</span> <span class="o">+</span> <span class="s1">&#39;$&#39;</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>&#x000A;				<span class="nx">Element</span><span class="p">.</span><span class="nx">Styles</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">style</span><span class="p">){</span>&#x000A;					<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">rule</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">style</span><span class="p">]</span> <span class="o">||</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">ShortStyles</span><span class="p">[</span><span class="nx">style</span><span class="p">])</span> <span class="k">return</span><span class="p">;</span>&#x000A;					<span class="nx">value</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nx">rule</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">style</span><span class="p">]);</span>&#x000A;					<span class="nx">to</span><span class="p">[</span><span class="nx">style</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="sr">/^rgb/</span><span class="p">))</span> <span class="o">?</span> <span class="nx">value</span><span class="p">.</span><span class="nx">rgbToHex</span><span class="p">()</span> <span class="o">:</span> <span class="nx">value</span><span class="p">;</span>&#x000A;				<span class="p">});</span>&#x000A;			<span class="p">});</span>&#x000A;		<span class="p">});</span>&#x000A;		<span class="k">return</span> <span class="nx">Fx</span><span class="p">.</span><span class="nx">CSS</span><span class="p">.</span><span class="nx">Cache</span><span class="p">[</span><span class="nx">selector</span><span class="p">]</span> <span class="o">=</span> <span class="nx">to</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Fx</span><span class="p">.</span><span class="nx">CSS</span><span class="p">.</span><span class="nx">Cache</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;&#x000A;<span class="nx">Fx</span><span class="p">.</span><span class="nx">CSS</span><span class="p">.</span><span class="nx">Parsers</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">Color</span><span class="o">:</span> <span class="p">{</span>&#x000A;		<span class="nx">parse</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^#[0-9a-f]{3,6}$/i</span><span class="p">))</span> <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">hexToRgb</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>&#x000A;			<span class="k">return</span> <span class="p">((</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/(\d+),\s*(\d+),\s*(\d+)/</span><span class="p">)))</span> <span class="o">?</span> <span class="p">[</span><span class="nx">value</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">value</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">value</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="p">},</span>&#x000A;		<span class="nx">compute</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">delta</span><span class="p">){</span>&#x000A;			<span class="k">return</span> <span class="nx">from</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>&#x000A;				<span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">Fx</span><span class="p">.</span><span class="nx">compute</span><span class="p">(</span><span class="nx">from</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">to</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">delta</span><span class="p">));</span>&#x000A;			<span class="p">});</span>&#x000A;		<span class="p">},</span>&#x000A;		<span class="nx">serve</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>&#x000A;			<span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nb">Number</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nb">Number</span><span class="o">:</span> <span class="p">{</span>&#x000A;		<span class="nx">parse</span><span class="o">:</span> <span class="nb">parseFloat</span><span class="p">,</span>&#x000A;		<span class="nx">compute</span><span class="o">:</span> <span class="nx">Fx</span><span class="p">.</span><span class="nx">compute</span><span class="p">,</span>&#x000A;		<span class="nx">serve</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">unit</span><span class="p">){</span>&#x000A;			<span class="k">return</span> <span class="p">(</span><span class="nx">unit</span><span class="p">)</span> <span class="o">?</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">unit</span> <span class="o">:</span> <span class="nx">value</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nb">String</span><span class="o">:</span> <span class="p">{</span>&#x000A;		<span class="nx">parse</span><span class="o">:</span> <span class="nx">$lambda</span><span class="p">(</span><span class="kc">false</span><span class="p">),</span>&#x000A;		<span class="nx">compute</span><span class="o">:</span> <span class="nx">$arguments</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>&#x000A;		<span class="nx">serve</span><span class="o">:</span> <span class="nx">$arguments</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Fx.Tween.js
      Formerly Fx.Style, effect to transition any CSS property for an element.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>3225</li>
        <li>3226</li>
        <li>3227</li>
        <li>3228</li>
        <li>3229</li>
        <li>3230</li>
        <li>3231</li>
        <li>3232</li>
        <li>3233</li>
        <li>3234</li>
        <li>3235</li>
        <li>3236</li>
        <li>3237</li>
        <li>3238</li>
        <li>3239</li>
        <li>3240</li>
        <li>3241</li>
        <li>3242</li>
        <li>3243</li>
        <li>3244</li>
        <li>3245</li>
        <li>3246</li>
        <li>3247</li>
        <li>3248</li>
        <li>3249</li>
        <li>3250</li>
        <li>3251</li>
        <li>3252</li>
        <li>3253</li>
        <li>3254</li>
        <li>3255</li>
        <li>3256</li>
        <li>3257</li>
        <li>3258</li>
        <li>3259</li>
        <li>3260</li>
        <li>3261</li>
        <li>3262</li>
        <li>3263</li>
        <li>3264</li>
        <li>3265</li>
        <li>3266</li>
        <li>3267</li>
        <li>3268</li>
        <li>3269</li>
        <li>3270</li>
        <li>3271</li>
        <li>3272</li>
        <li>3273</li>
        <li>3274</li>
        <li>3275</li>
        <li>3276</li>
        <li>3277</li>
        <li>3278</li>
        <li>3279</li>
        <li>3280</li>
        <li>3281</li>
        <li>3282</li>
        <li>3283</li>
        <li>3284</li>
        <li>3285</li>
        <li>3286</li>
        <li>3287</li>
        <li>3288</li>
        <li>3289</li>
        <li>3290</li>
        <li>3291</li>
        <li>3292</li>
        <li>3293</li>
        <li>3294</li>
        <li>3295</li>
        <li>3296</li>
        <li>3297</li>
        <li>3298</li>
        <li>3299</li>
        <li>3300</li>
        <li>3301</li>
        <li>3302</li>
        <li>3303</li>
        <li>3304</li>
        <li>3305</li>
        <li>3306</li>
        <li>3307</li>
        <li>3308</li>
        <li>3309</li>
        <li>3310</li>
        <li>3311</li>
      </ol>
      <code><div class="highlight"><pre><span class="nx">Fx</span><span class="p">.</span><span class="nx">Tween</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">Extends</span><span class="o">:</span> <span class="nx">Fx</span><span class="p">.</span><span class="nx">CSS</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">element</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">subject</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">property</span><span class="p">,</span> <span class="nx">now</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">){</span>&#x000A;			<span class="nx">now</span> <span class="o">=</span> <span class="nx">property</span><span class="p">;</span>&#x000A;			<span class="nx">property</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">property</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">property</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="nx">property</span><span class="p">,</span> <span class="nx">now</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">unit</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">start</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">property</span><span class="p">,</span> <span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">,</span> <span class="nx">property</span><span class="p">,</span> <span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">))</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">flatten</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">property</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">property</span> <span class="o">||</span> <span class="nx">args</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>&#x000A;		<span class="kd">var</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">prepare</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">property</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">to</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">tween</span> <span class="o">=</span> <span class="p">{</span>&#x000A;&#x000A;	<span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">tween</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;tween&#39;</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">tween</span><span class="p">)</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">cancel</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eliminate</span><span class="p">(</span><span class="s1">&#39;tween&#39;</span><span class="p">).</span><span class="nx">store</span><span class="p">(</span><span class="s1">&#39;tween:options&#39;</span><span class="p">,</span> <span class="nx">$extend</span><span class="p">({</span><span class="nx">link</span><span class="o">:</span> <span class="s1">&#39;cancel&#39;</span><span class="p">},</span> <span class="nx">options</span><span class="p">));</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">options</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;tween&#39;</span><span class="p">)){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">options</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;tween:options&#39;</span><span class="p">))</span> <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;tween&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">(</span><span class="s1">&#39;tween&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Fx</span><span class="p">.</span><span class="nx">Tween</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;tween:options&#39;</span><span class="p">)));</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;tween&#39;</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">tween</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">property</span><span class="p">,</span> <span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;tween&#39;</span><span class="p">).</span><span class="nx">start</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">fade</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">how</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">fade</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;tween&#39;</span><span class="p">),</span> <span class="nx">o</span> <span class="o">=</span> <span class="s1">&#39;opacity&#39;</span><span class="p">,</span> <span class="nx">toggle</span><span class="p">;</span>&#x000A;		<span class="nx">how</span> <span class="o">=</span> <span class="nx">$pick</span><span class="p">(</span><span class="nx">how</span><span class="p">,</span> <span class="s1">&#39;toggle&#39;</span><span class="p">);</span>&#x000A;		<span class="k">switch</span> <span class="p">(</span><span class="nx">how</span><span class="p">){</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;in&#39;</span><span class="o">:</span> <span class="nx">fade</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;out&#39;</span><span class="o">:</span> <span class="nx">fade</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;show&#39;</span><span class="o">:</span> <span class="nx">fade</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;hide&#39;</span><span class="o">:</span> <span class="nx">fade</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="k">break</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;toggle&#39;</span><span class="o">:</span>&#x000A;				<span class="kd">var</span> <span class="nx">flag</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;fade:flag&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;opacity&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>&#x000A;				<span class="nx">fade</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="p">(</span><span class="nx">flag</span><span class="p">)</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="mi">1</span><span class="p">);</span>&#x000A;				<span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">(</span><span class="s1">&#39;fade:flag&#39;</span><span class="p">,</span> <span class="o">!</span><span class="nx">flag</span><span class="p">);</span>&#x000A;				<span class="nx">toggle</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>&#x000A;			<span class="k">break</span><span class="p">;</span>&#x000A;			<span class="k">default</span><span class="o">:</span> <span class="nx">fade</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">toggle</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">eliminate</span><span class="p">(</span><span class="s1">&#39;fade:flag&#39;</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">highlight</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">end</span><span class="p">){</span>&#x000A;			<span class="nx">end</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;highlight:original&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">getStyle</span><span class="p">(</span><span class="s1">&#39;background-color&#39;</span><span class="p">));</span>&#x000A;			<span class="nx">end</span> <span class="o">=</span> <span class="p">(</span><span class="nx">end</span> <span class="o">==</span> <span class="s1">&#39;transparent&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;#fff&#39;</span> <span class="o">:</span> <span class="nx">end</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="kd">var</span> <span class="nx">tween</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;tween&#39;</span><span class="p">);</span>&#x000A;		<span class="nx">tween</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;background-color&#39;</span><span class="p">,</span> <span class="nx">start</span> <span class="o">||</span> <span class="s1">&#39;#ffff88&#39;</span><span class="p">,</span> <span class="nx">end</span><span class="p">).</span><span class="nx">chain</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">setStyle</span><span class="p">(</span><span class="s1">&#39;background-color&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;highlight:original&#39;</span><span class="p">));</span>&#x000A;			<span class="nx">tween</span><span class="p">.</span><span class="nx">callChain</span><span class="p">();</span>&#x000A;		<span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Fx.Morph.js
      Formerly Fx.Styles, effect to transition any number of CSS properties for an element using an object of rules, or CSS based selector rules.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>3322</li>
        <li>3323</li>
        <li>3324</li>
        <li>3325</li>
        <li>3326</li>
        <li>3327</li>
        <li>3328</li>
        <li>3329</li>
        <li>3330</li>
        <li>3331</li>
        <li>3332</li>
        <li>3333</li>
        <li>3334</li>
        <li>3335</li>
        <li>3336</li>
        <li>3337</li>
        <li>3338</li>
        <li>3339</li>
        <li>3340</li>
        <li>3341</li>
        <li>3342</li>
        <li>3343</li>
        <li>3344</li>
        <li>3345</li>
        <li>3346</li>
        <li>3347</li>
        <li>3348</li>
        <li>3349</li>
        <li>3350</li>
        <li>3351</li>
        <li>3352</li>
        <li>3353</li>
        <li>3354</li>
        <li>3355</li>
        <li>3356</li>
        <li>3357</li>
        <li>3358</li>
        <li>3359</li>
        <li>3360</li>
        <li>3361</li>
        <li>3362</li>
        <li>3363</li>
        <li>3364</li>
        <li>3365</li>
        <li>3366</li>
        <li>3367</li>
        <li>3368</li>
        <li>3369</li>
        <li>3370</li>
        <li>3371</li>
        <li>3372</li>
        <li>3373</li>
        <li>3374</li>
        <li>3375</li>
        <li>3376</li>
        <li>3377</li>
        <li>3378</li>
        <li>3379</li>
        <li>3380</li>
        <li>3381</li>
        <li>3382</li>
      </ol>
      <code><div class="highlight"><pre><span class="nx">Fx</span><span class="p">.</span><span class="nx">Morph</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">Extends</span><span class="o">:</span> <span class="nx">Fx</span><span class="p">.</span><span class="nx">CSS</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">element</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">subject</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">now</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">now</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="nx">now</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">now</span><span class="p">);</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">now</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">now</span><span class="p">[</span><span class="nx">p</span><span class="p">],</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">unit</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">compute</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">delta</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">now</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">from</span><span class="p">)</span> <span class="nx">now</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="nx">from</span><span class="p">[</span><span class="nx">p</span><span class="p">],</span> <span class="nx">to</span><span class="p">[</span><span class="nx">p</span><span class="p">],</span> <span class="nx">delta</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="nx">now</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">start</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">properties</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">,</span> <span class="nx">properties</span><span class="p">))</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">properties</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="nx">properties</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="nx">properties</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">from</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">to</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">properties</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">prepare</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">properties</span><span class="p">[</span><span class="nx">p</span><span class="p">]);</span>&#x000A;			<span class="nx">from</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span> <span class="o">=</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">from</span><span class="p">;</span>&#x000A;			<span class="nx">to</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span> <span class="o">=</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">to</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">morph</span> <span class="o">=</span> <span class="p">{</span>&#x000A;&#x000A;	<span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">morph</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;morph&#39;</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">morph</span><span class="p">)</span> <span class="nx">morph</span><span class="p">.</span><span class="nx">cancel</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eliminate</span><span class="p">(</span><span class="s1">&#39;morph&#39;</span><span class="p">).</span><span class="nx">store</span><span class="p">(</span><span class="s1">&#39;morph:options&#39;</span><span class="p">,</span> <span class="nx">$extend</span><span class="p">({</span><span class="nx">link</span><span class="o">:</span> <span class="s1">&#39;cancel&#39;</span><span class="p">},</span> <span class="nx">options</span><span class="p">));</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">options</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;morph&#39;</span><span class="p">)){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">options</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;morph:options&#39;</span><span class="p">))</span> <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;morph&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">(</span><span class="s1">&#39;morph&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Fx</span><span class="p">.</span><span class="nx">Morph</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;morph:options&#39;</span><span class="p">)));</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;morph&#39;</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">morph</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">props</span><span class="p">){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;morph&#39;</span><span class="p">).</span><span class="nx">start</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Fx.Transitions.js
      Contains a set of advanced transitions to be used with any of the Fx Classes.</p>
      
      <p>License:
      MIT-style license.</p>
      
      <p>Credits:
      Easing Equations by Robert Penner, <a href="http://www.robertpenner.com/easing/">http://www.robertpenner.com/easing/</a>, modified and optimized to be used with MooTools.</p>
    </section>
    <figure>
      <ol>
        <li>3395</li>
        <li>3396</li>
        <li>3397</li>
        <li>3398</li>
        <li>3399</li>
        <li>3400</li>
        <li>3401</li>
        <li>3402</li>
        <li>3403</li>
        <li>3404</li>
        <li>3405</li>
        <li>3406</li>
        <li>3407</li>
        <li>3408</li>
        <li>3409</li>
        <li>3410</li>
        <li>3411</li>
        <li>3412</li>
        <li>3413</li>
        <li>3414</li>
        <li>3415</li>
        <li>3416</li>
        <li>3417</li>
        <li>3418</li>
        <li>3419</li>
        <li>3420</li>
        <li>3421</li>
        <li>3422</li>
        <li>3423</li>
        <li>3424</li>
        <li>3425</li>
        <li>3426</li>
        <li>3427</li>
        <li>3428</li>
        <li>3429</li>
        <li>3430</li>
        <li>3431</li>
        <li>3432</li>
        <li>3433</li>
        <li>3434</li>
        <li>3435</li>
        <li>3436</li>
        <li>3437</li>
        <li>3438</li>
        <li>3439</li>
        <li>3440</li>
        <li>3441</li>
        <li>3442</li>
        <li>3443</li>
        <li>3444</li>
        <li>3445</li>
        <li>3446</li>
        <li>3447</li>
        <li>3448</li>
        <li>3449</li>
        <li>3450</li>
        <li>3451</li>
        <li>3452</li>
        <li>3453</li>
        <li>3454</li>
        <li>3455</li>
        <li>3456</li>
        <li>3457</li>
        <li>3458</li>
        <li>3459</li>
        <li>3460</li>
        <li>3461</li>
        <li>3462</li>
        <li>3463</li>
        <li>3464</li>
        <li>3465</li>
        <li>3466</li>
        <li>3467</li>
        <li>3468</li>
        <li>3469</li>
        <li>3470</li>
        <li>3471</li>
        <li>3472</li>
        <li>3473</li>
        <li>3474</li>
        <li>3475</li>
        <li>3476</li>
        <li>3477</li>
        <li>3478</li>
        <li>3479</li>
        <li>3480</li>
        <li>3481</li>
      </ol>
      <code><div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;&#x000A;	<span class="kd">var</span> <span class="nx">old</span> <span class="o">=</span> <span class="nx">Fx</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">initialize</span><span class="p">;</span>&#x000A;&#x000A;	<span class="nx">Fx</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">initialize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="nx">old</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">trans</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">transition</span><span class="p">;</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">trans</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">trans</span> <span class="o">=</span> <span class="nx">trans</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">))){</span>&#x000A;			<span class="kd">var</span> <span class="nx">base</span> <span class="o">=</span> <span class="nx">Fx</span><span class="p">.</span><span class="nx">Transitions</span><span class="p">;</span>&#x000A;			<span class="nx">base</span> <span class="o">=</span> <span class="nx">base</span><span class="p">[</span><span class="nx">trans</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">||</span> <span class="nx">base</span><span class="p">[</span><span class="nx">trans</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">capitalize</span><span class="p">()];</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">trans</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="nx">base</span> <span class="o">=</span> <span class="nx">base</span><span class="p">[</span><span class="s1">&#39;ease&#39;</span> <span class="o">+</span> <span class="nx">trans</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">capitalize</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="nx">trans</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">?</span> <span class="nx">trans</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">capitalize</span><span class="p">()</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)];</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">transition</span> <span class="o">=</span> <span class="nx">base</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;	<span class="p">};</span>&#x000A;&#x000A;<span class="p">})();</span>&#x000A;&#x000A;<span class="nx">Fx</span><span class="p">.</span><span class="nx">Transition</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">transition</span><span class="p">,</span> <span class="nx">params</span><span class="p">){</span>&#x000A;	<span class="nx">params</span> <span class="o">=</span> <span class="nx">$splat</span><span class="p">(</span><span class="nx">params</span><span class="p">);</span>&#x000A;	<span class="k">return</span> <span class="nx">$extend</span><span class="p">(</span><span class="nx">transition</span><span class="p">,</span> <span class="p">{</span>&#x000A;		<span class="nx">easeIn</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">pos</span><span class="p">){</span>&#x000A;			<span class="k">return</span> <span class="nx">transition</span><span class="p">(</span><span class="nx">pos</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>&#x000A;		<span class="p">},</span>&#x000A;		<span class="nx">easeOut</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">pos</span><span class="p">){</span>&#x000A;			<span class="k">return</span> <span class="mi">1</span> <span class="o">-</span> <span class="nx">transition</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">pos</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>&#x000A;		<span class="p">},</span>&#x000A;		<span class="nx">easeInOut</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">pos</span><span class="p">){</span>&#x000A;			<span class="k">return</span> <span class="p">(</span><span class="nx">pos</span> <span class="o">&lt;=</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">?</span> <span class="nx">transition</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">pos</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">:</span> <span class="p">(</span><span class="mi">2</span> <span class="o">-</span> <span class="nx">transition</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">pos</span><span class="p">),</span> <span class="nx">params</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;	<span class="p">});</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Fx</span><span class="p">.</span><span class="nx">Transitions</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">linear</span><span class="o">:</span> <span class="nx">$arguments</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Fx</span><span class="p">.</span><span class="nx">Transitions</span><span class="p">.</span><span class="nx">extend</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">transitions</span><span class="p">){</span>&#x000A;	<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">transition</span> <span class="k">in</span> <span class="nx">transitions</span><span class="p">)</span> <span class="nx">Fx</span><span class="p">.</span><span class="nx">Transitions</span><span class="p">[</span><span class="nx">transition</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Fx</span><span class="p">.</span><span class="nx">Transition</span><span class="p">(</span><span class="nx">transitions</span><span class="p">[</span><span class="nx">transition</span><span class="p">]);</span>&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Fx</span><span class="p">.</span><span class="nx">Transitions</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">Pow</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">x</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="mi">6</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">Expo</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span> <span class="o">*</span> <span class="p">(</span><span class="nx">p</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">Circ</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">acos</span><span class="p">(</span><span class="nx">p</span><span class="p">));</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">Sine</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">p</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">Back</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">x</span><span class="p">){</span>&#x000A;		<span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="mf">1.618</span><span class="p">;</span>&#x000A;		<span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">p</span> <span class="o">-</span> <span class="nx">x</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">Bounce</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">value</span><span class="p">;</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">a</span> <span class="o">+=</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">b</span> <span class="o">/=</span> <span class="mi">2</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">p</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">7</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="nx">a</span><span class="p">)</span> <span class="o">/</span> <span class="mi">11</span><span class="p">){</span>&#x000A;				<span class="nx">value</span> <span class="o">=</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">((</span><span class="mi">11</span> <span class="o">-</span> <span class="mi">6</span> <span class="o">*</span> <span class="nx">a</span> <span class="o">-</span> <span class="mi">11</span> <span class="o">*</span> <span class="nx">p</span><span class="p">)</span> <span class="o">/</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">b</span><span class="p">;</span>&#x000A;				<span class="k">break</span><span class="p">;</span>&#x000A;			<span class="p">}</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">value</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">Elastic</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">x</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span> <span class="o">*</span> <span class="o">--</span><span class="nx">p</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="mi">20</span> <span class="o">*</span> <span class="nx">p</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">3</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="p">[</span><span class="s1">&#39;Quad&#39;</span><span class="p">,</span> <span class="s1">&#39;Cubic&#39;</span><span class="p">,</span> <span class="s1">&#39;Quart&#39;</span><span class="p">,</span> <span class="s1">&#39;Quint&#39;</span><span class="p">].</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">transition</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>&#x000A;	<span class="nx">Fx</span><span class="p">.</span><span class="nx">Transitions</span><span class="p">[</span><span class="nx">transition</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Fx</span><span class="p">.</span><span class="nx">Transition</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]);</span>&#x000A;	<span class="p">});</span>&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Request.js
      Powerful all purpose Request Class. Uses XMLHTTPRequest.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>3492</li>
        <li>3493</li>
        <li>3494</li>
        <li>3495</li>
        <li>3496</li>
      </ol>
      <code><div class="highlight"><pre><span class="kd">var</span> <span class="nx">Request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">Implements</span><span class="o">:</span> <span class="p">[</span><span class="nx">Chain</span><span class="p">,</span> <span class="nx">Events</span><span class="p">,</span> <span class="nx">Options</span><span class="p">],</span>&#x000A;&#x000A;	<span class="nx">options</span><span class="o">:</span> <span class="p">{</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>onRequest: $empty,
      onSuccess: $empty,
      onFailure: $empty,
      onException: $empty,</p>
    </section>
    <figure>
      <ol>
        <li>3501</li>
        <li>3502</li>
        <li>3503</li>
        <li>3504</li>
        <li>3505</li>
        <li>3506</li>
        <li>3507</li>
        <li>3508</li>
        <li>3509</li>
        <li>3510</li>
        <li>3511</li>
        <li>3512</li>
        <li>3513</li>
        <li>3514</li>
        <li>3515</li>
        <li>3516</li>
        <li>3517</li>
        <li>3518</li>
        <li>3519</li>
        <li>3520</li>
        <li>3521</li>
        <li>3522</li>
        <li>3523</li>
        <li>3524</li>
        <li>3525</li>
        <li>3526</li>
        <li>3527</li>
        <li>3528</li>
        <li>3529</li>
        <li>3530</li>
        <li>3531</li>
        <li>3532</li>
        <li>3533</li>
        <li>3534</li>
        <li>3535</li>
        <li>3536</li>
        <li>3537</li>
        <li>3538</li>
        <li>3539</li>
        <li>3540</li>
        <li>3541</li>
        <li>3542</li>
        <li>3543</li>
        <li>3544</li>
        <li>3545</li>
        <li>3546</li>
        <li>3547</li>
        <li>3548</li>
        <li>3549</li>
        <li>3550</li>
        <li>3551</li>
        <li>3552</li>
        <li>3553</li>
        <li>3554</li>
        <li>3555</li>
        <li>3556</li>
        <li>3557</li>
        <li>3558</li>
        <li>3559</li>
        <li>3560</li>
        <li>3561</li>
        <li>3562</li>
        <li>3563</li>
        <li>3564</li>
        <li>3565</li>
        <li>3566</li>
        <li>3567</li>
        <li>3568</li>
        <li>3569</li>
        <li>3570</li>
        <li>3571</li>
        <li>3572</li>
        <li>3573</li>
        <li>3574</li>
        <li>3575</li>
        <li>3576</li>
        <li>3577</li>
        <li>3578</li>
        <li>3579</li>
        <li>3580</li>
        <li>3581</li>
        <li>3582</li>
        <li>3583</li>
        <li>3584</li>
        <li>3585</li>
        <li>3586</li>
        <li>3587</li>
        <li>3588</li>
        <li>3589</li>
        <li>3590</li>
        <li>3591</li>
        <li>3592</li>
        <li>3593</li>
        <li>3594</li>
        <li>3595</li>
        <li>3596</li>
        <li>3597</li>
        <li>3598</li>
        <li>3599</li>
        <li>3600</li>
        <li>3601</li>
        <li>3602</li>
        <li>3603</li>
        <li>3604</li>
        <li>3605</li>
        <li>3606</li>
        <li>3607</li>
        <li>3608</li>
        <li>3609</li>
        <li>3610</li>
        <li>3611</li>
        <li>3612</li>
        <li>3613</li>
        <li>3614</li>
        <li>3615</li>
        <li>3616</li>
        <li>3617</li>
        <li>3618</li>
        <li>3619</li>
        <li>3620</li>
        <li>3621</li>
        <li>3622</li>
        <li>3623</li>
        <li>3624</li>
        <li>3625</li>
        <li>3626</li>
        <li>3627</li>
        <li>3628</li>
        <li>3629</li>
        <li>3630</li>
        <li>3631</li>
        <li>3632</li>
        <li>3633</li>
        <li>3634</li>
        <li>3635</li>
        <li>3636</li>
        <li>3637</li>
        <li>3638</li>
        <li>3639</li>
        <li>3640</li>
        <li>3641</li>
        <li>3642</li>
        <li>3643</li>
        <li>3644</li>
        <li>3645</li>
        <li>3646</li>
        <li>3647</li>
        <li>3648</li>
        <li>3649</li>
        <li>3650</li>
        <li>3651</li>
        <li>3652</li>
        <li>3653</li>
        <li>3654</li>
        <li>3655</li>
        <li>3656</li>
        <li>3657</li>
        <li>3658</li>
        <li>3659</li>
        <li>3660</li>
        <li>3661</li>
        <li>3662</li>
        <li>3663</li>
        <li>3664</li>
        <li>3665</li>
        <li>3666</li>
        <li>3667</li>
        <li>3668</li>
        <li>3669</li>
        <li>3670</li>
        <li>3671</li>
        <li>3672</li>
        <li>3673</li>
        <li>3674</li>
        <li>3675</li>
        <li>3676</li>
        <li>3677</li>
        <li>3678</li>
        <li>3679</li>
        <li>3680</li>
        <li>3681</li>
        <li>3682</li>
        <li>3683</li>
        <li>3684</li>
        <li>3685</li>
        <li>3686</li>
        <li>3687</li>
        <li>3688</li>
        <li>3689</li>
        <li>3690</li>
        <li>3691</li>
        <li>3692</li>
        <li>3693</li>
        <li>3694</li>
        <li>3695</li>
        <li>3696</li>
      </ol>
      <code><div class="highlight"><pre>		<span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>&#x000A;		<span class="nx">data</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>&#x000A;		<span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>&#x000A;			<span class="s1">&#39;X-Requested-With&#39;</span><span class="o">:</span> <span class="s1">&#39;XMLHttpRequest&#39;</span><span class="p">,</span>&#x000A;			<span class="s1">&#39;Accept&#39;</span><span class="o">:</span> <span class="s1">&#39;text/javascript, text/html, application/xml, text/xml, */*&#39;</span>&#x000A;		<span class="p">},</span>&#x000A;		<span class="nx">async</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>&#x000A;		<span class="nx">format</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>&#x000A;		<span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>&#x000A;		<span class="nx">link</span><span class="o">:</span> <span class="s1">&#39;ignore&#39;</span><span class="p">,</span>&#x000A;		<span class="nx">isSuccess</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>&#x000A;		<span class="nx">emulation</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>&#x000A;		<span class="nx">urlEncoded</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>&#x000A;		<span class="nx">encoding</span><span class="o">:</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">,</span>&#x000A;		<span class="nx">evalScripts</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>&#x000A;		<span class="nx">evalResponse</span><span class="o">:</span> <span class="kc">false</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Browser</span><span class="p">.</span><span class="nx">Request</span><span class="p">();</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">setOptions</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">isSuccess</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">isSuccess</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hash</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">headers</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">onStateChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">!=</span> <span class="mi">4</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">running</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">running</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>&#x000A;		<span class="nx">$try</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>&#x000A;		<span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">isSuccess</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">status</span><span class="p">)){</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">response</span> <span class="o">=</span> <span class="p">{</span><span class="nx">text</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">,</span> <span class="nx">xml</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseXML</span><span class="p">};</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">text</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">xml</span><span class="p">);</span>&#x000A;		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">response</span> <span class="o">=</span> <span class="p">{</span><span class="nx">text</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">xml</span><span class="o">:</span> <span class="kc">null</span><span class="p">};</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">failure</span><span class="p">();</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="nx">$empty</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">isSuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">status</span> <span class="o">&gt;=</span> <span class="mi">200</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">status</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">));</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">processScripts</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">evalResponse</span> <span class="o">||</span> <span class="p">(</span><span class="sr">/(ecma|java)script/</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getHeader</span><span class="p">(</span><span class="s1">&#39;Content-type&#39;</span><span class="p">)))</span> <span class="k">return</span> <span class="nx">$exec</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="nx">text</span><span class="p">.</span><span class="nx">stripScripts</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">evalScripts</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">xml</span><span class="p">){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">onSuccess</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">processScripts</span><span class="p">(</span><span class="nx">text</span><span class="p">),</span> <span class="nx">xml</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">onSuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">fireEvent</span><span class="p">(</span><span class="s1">&#39;complete&#39;</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">).</span><span class="nx">fireEvent</span><span class="p">(</span><span class="s1">&#39;success&#39;</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">).</span><span class="nx">callChain</span><span class="p">();</span>&#x000A;	<span class="p">},</span>&#x000A;	&#x000A;	<span class="nx">failure</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">onFailure</span><span class="p">();</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">onFailure</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">fireEvent</span><span class="p">(</span><span class="s1">&#39;complete&#39;</span><span class="p">).</span><span class="nx">fireEvent</span><span class="p">(</span><span class="s1">&#39;failure&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">xhr</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">setHeader</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getHeader</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>&#x000A;		<span class="k">return</span> <span class="nx">$try</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;			<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">getResponseHeader</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>&#x000A;		<span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">check</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">caller</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">running</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;		<span class="k">switch</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">link</span><span class="p">){</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;cancel&#39;</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">cancel</span><span class="p">();</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;chain&#39;</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">chain</span><span class="p">(</span><span class="nx">caller</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">)));</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">send</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">,</span> <span class="nx">options</span><span class="p">))</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">running</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>&#x000A;&#x000A;		<span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">$type</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">==</span> <span class="s1">&#39;element&#39;</span><span class="p">)</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span><span class="nx">data</span><span class="o">:</span> <span class="nx">options</span><span class="p">};</span>&#x000A;&#x000A;		<span class="kd">var</span> <span class="nx">old</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">;</span>&#x000A;		<span class="nx">options</span> <span class="o">=</span> <span class="nx">$extend</span><span class="p">({</span><span class="nx">data</span><span class="o">:</span> <span class="nx">old</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">url</span><span class="o">:</span> <span class="nx">old</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">method</span><span class="o">:</span> <span class="nx">old</span><span class="p">.</span><span class="nx">method</span><span class="p">},</span> <span class="nx">options</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">method</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">method</span><span class="p">;</span>&#x000A;&#x000A;		<span class="k">switch</span> <span class="p">(</span><span class="nx">$type</span><span class="p">(</span><span class="nx">data</span><span class="p">)){</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;element&#39;</span><span class="o">:</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">data</span><span class="p">).</span><span class="nx">toQueryString</span><span class="p">();</span> <span class="k">break</span><span class="p">;</span>&#x000A;			<span class="k">case</span> <span class="s1">&#39;object&#39;</span><span class="o">:</span> <span class="k">case</span> <span class="s1">&#39;hash&#39;</span><span class="o">:</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">Hash</span><span class="p">.</span><span class="nx">toQueryString</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">format</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">format</span> <span class="o">=</span> <span class="s1">&#39;format=&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">format</span><span class="p">;</span>&#x000A;			<span class="nx">data</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="o">?</span> <span class="nx">format</span> <span class="o">+</span> <span class="s1">&#39;&amp;&#39;</span> <span class="o">+</span> <span class="nx">data</span> <span class="o">:</span> <span class="nx">format</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">emulation</span> <span class="o">&amp;&amp;</span> <span class="p">[</span><span class="s1">&#39;put&#39;</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">].</span><span class="nx">contains</span><span class="p">(</span><span class="nx">method</span><span class="p">)){</span>&#x000A;			<span class="kd">var</span> <span class="nx">_method</span> <span class="o">=</span> <span class="s1">&#39;_method=&#39;</span> <span class="o">+</span> <span class="nx">method</span><span class="p">;</span>&#x000A;			<span class="nx">data</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="o">?</span> <span class="nx">_method</span> <span class="o">+</span> <span class="s1">&#39;&amp;&#39;</span> <span class="o">+</span> <span class="nx">data</span> <span class="o">:</span> <span class="nx">_method</span><span class="p">;</span>&#x000A;			<span class="nx">method</span> <span class="o">=</span> <span class="s1">&#39;post&#39;</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">urlEncoded</span> <span class="o">&amp;&amp;</span> <span class="nx">method</span> <span class="o">==</span> <span class="s1">&#39;post&#39;</span><span class="p">){</span>&#x000A;			<span class="kd">var</span> <span class="nx">encoding</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">encoding</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;; charset=&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">encoding</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;Content-type&#39;</span><span class="p">,</span> <span class="s1">&#39;application/x-www-form-urlencoded&#39;</span> <span class="o">+</span> <span class="nx">encoding</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">method</span> <span class="o">==</span> <span class="s1">&#39;get&#39;</span><span class="p">){</span>&#x000A;			<span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span> <span class="o">+</span> <span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s1">&#39;?&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;&amp;&#39;</span> <span class="o">:</span> <span class="s1">&#39;?&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">data</span><span class="p">;</span>&#x000A;			<span class="nx">data</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">method</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">(),</span> <span class="nx">url</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">async</span><span class="p">);</span>&#x000A;&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">onStateChange</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>&#x000A;&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$try</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;				<span class="k">this</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>&#x000A;				<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>&#x000A;			<span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">)))</span> <span class="k">this</span><span class="p">.</span><span class="nx">fireEvent</span><span class="p">(</span><span class="s1">&#39;exception&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">]);</span>&#x000A;		<span class="p">},</span> <span class="k">this</span><span class="p">);</span>&#x000A;&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">fireEvent</span><span class="p">(</span><span class="s1">&#39;request&#39;</span><span class="p">);</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">async</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">onStateChange</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">cancel</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">running</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">running</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">abort</span><span class="p">();</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="nx">$empty</span><span class="p">;</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Browser</span><span class="p">.</span><span class="nx">Request</span><span class="p">();</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">fireEvent</span><span class="p">(</span><span class="s1">&#39;cancel&#39;</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;&#x000A;<span class="kd">var</span> <span class="nx">methods</span> <span class="o">=</span> <span class="p">{};</span>&#x000A;<span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;put&#39;</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;PUT&#39;</span><span class="p">,</span> <span class="s1">&#39;DELETE&#39;</span><span class="p">].</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">method</span><span class="p">){</span>&#x000A;	<span class="nx">methods</span><span class="p">[</span><span class="nx">method</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">link</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="p">{</span><span class="nx">url</span><span class="o">:</span> <span class="nb">String</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">$defined</span><span class="p">});</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">$extend</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="p">{</span><span class="nx">method</span><span class="o">:</span> <span class="nx">method</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()}));</span>&#x000A;	<span class="p">};</span>&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Request</span><span class="p">.</span><span class="nx">implement</span><span class="p">(</span><span class="nx">methods</span><span class="p">);</span>&#x000A;&#x000A;<span class="p">})();</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">send</span> <span class="o">=</span> <span class="p">{</span>&#x000A;	&#x000A;	<span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">send</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;send&#39;</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">send</span><span class="p">)</span> <span class="nx">send</span><span class="p">.</span><span class="nx">cancel</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eliminate</span><span class="p">(</span><span class="s1">&#39;send&#39;</span><span class="p">).</span><span class="nx">store</span><span class="p">(</span><span class="s1">&#39;send:options&#39;</span><span class="p">,</span> <span class="nx">$extend</span><span class="p">({</span>&#x000A;			<span class="nx">data</span><span class="o">:</span> <span class="k">this</span><span class="p">,</span> <span class="nx">link</span><span class="o">:</span> <span class="s1">&#39;cancel&#39;</span><span class="p">,</span> <span class="nx">method</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="nx">url</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;action&#39;</span><span class="p">)</span>&#x000A;		<span class="p">},</span> <span class="nx">options</span><span class="p">));</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">options</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;send&#39;</span><span class="p">)){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">options</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;send:options&#39;</span><span class="p">))</span> <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;send&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">(</span><span class="s1">&#39;send&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;send:options&#39;</span><span class="p">)));</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;send&#39;</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">send</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">url</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">sender</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;send&#39;</span><span class="p">);</span>&#x000A;		<span class="nx">sender</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span><span class="nx">data</span><span class="o">:</span> <span class="k">this</span><span class="p">,</span> <span class="nx">url</span><span class="o">:</span> <span class="nx">url</span> <span class="o">||</span> <span class="nx">sender</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">url</span><span class="p">});</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Request.HTML.js
      Extends the basic Request Class with additional methods for interacting with HTML responses.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>3707</li>
        <li>3708</li>
        <li>3709</li>
        <li>3710</li>
        <li>3711</li>
        <li>3712</li>
        <li>3713</li>
        <li>3714</li>
        <li>3715</li>
        <li>3716</li>
        <li>3717</li>
        <li>3718</li>
        <li>3719</li>
        <li>3720</li>
        <li>3721</li>
        <li>3722</li>
        <li>3723</li>
        <li>3724</li>
        <li>3725</li>
        <li>3726</li>
        <li>3727</li>
        <li>3728</li>
        <li>3729</li>
        <li>3730</li>
        <li>3731</li>
        <li>3732</li>
        <li>3733</li>
        <li>3734</li>
        <li>3735</li>
        <li>3736</li>
        <li>3737</li>
        <li>3738</li>
        <li>3739</li>
        <li>3740</li>
        <li>3741</li>
        <li>3742</li>
        <li>3743</li>
        <li>3744</li>
        <li>3745</li>
        <li>3746</li>
        <li>3747</li>
        <li>3748</li>
        <li>3749</li>
        <li>3750</li>
        <li>3751</li>
        <li>3752</li>
        <li>3753</li>
        <li>3754</li>
        <li>3755</li>
        <li>3756</li>
        <li>3757</li>
        <li>3758</li>
        <li>3759</li>
        <li>3760</li>
        <li>3761</li>
        <li>3762</li>
        <li>3763</li>
        <li>3764</li>
        <li>3765</li>
        <li>3766</li>
        <li>3767</li>
        <li>3768</li>
        <li>3769</li>
        <li>3770</li>
        <li>3771</li>
        <li>3772</li>
        <li>3773</li>
        <li>3774</li>
        <li>3775</li>
        <li>3776</li>
        <li>3777</li>
        <li>3778</li>
        <li>3779</li>
        <li>3780</li>
        <li>3781</li>
        <li>3782</li>
        <li>3783</li>
        <li>3784</li>
        <li>3785</li>
        <li>3786</li>
        <li>3787</li>
      </ol>
      <code><div class="highlight"><pre><span class="nx">Request</span><span class="p">.</span><span class="nx">HTML</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">Extends</span><span class="o">:</span> <span class="nx">Request</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">options</span><span class="o">:</span> <span class="p">{</span>&#x000A;		<span class="nx">update</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>&#x000A;		<span class="nx">evalScripts</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>&#x000A;		<span class="nx">filter</span><span class="o">:</span> <span class="kc">false</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">processHTML</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">match</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/&lt;body[^&gt;]*&gt;([\s\S]*?)&lt;\/body&gt;/i</span><span class="p">);</span>&#x000A;		<span class="nx">text</span> <span class="o">=</span> <span class="p">(</span><span class="nx">match</span><span class="p">)</span> <span class="o">?</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="nx">text</span><span class="p">;</span>&#x000A;		&#x000A;		<span class="kd">var</span> <span class="nx">container</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>&#x000A;		&#x000A;		<span class="k">return</span> <span class="nx">$try</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;			<span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="s1">&#39;&lt;root&gt;&#39;</span> <span class="o">+</span> <span class="nx">text</span> <span class="o">+</span> <span class="s1">&#39;&lt;/root&gt;&#39;</span><span class="p">,</span> <span class="nx">doc</span><span class="p">;</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span><span class="p">){</span>&#x000A;				<span class="nx">doc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s1">&#39;Microsoft.XMLDOM&#39;</span><span class="p">);</span>&#x000A;				<span class="nx">doc</span><span class="p">.</span><span class="nx">async</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>&#x000A;				<span class="nx">doc</span><span class="p">.</span><span class="nx">loadXML</span><span class="p">(</span><span class="nx">root</span><span class="p">);</span>&#x000A;			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>&#x000A;				<span class="nx">doc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DOMParser</span><span class="p">().</span><span class="nx">parseFromString</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="s1">&#39;text/xml&#39;</span><span class="p">);</span>&#x000A;			<span class="p">}</span>&#x000A;			<span class="nx">root</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>&#x000A;			<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">k</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>&#x000A;				<span class="kd">var</span> <span class="nx">child</span> <span class="o">=</span> <span class="nx">Element</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="nx">root</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">child</span><span class="p">)</span> <span class="nx">container</span><span class="p">.</span><span class="nx">grab</span><span class="p">(</span><span class="nx">child</span><span class="p">);</span>&#x000A;			<span class="p">}</span>&#x000A;			<span class="k">return</span> <span class="nx">container</span><span class="p">;</span>&#x000A;		<span class="p">})</span> <span class="o">||</span> <span class="nx">container</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="nx">text</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">response</span><span class="p">;</span>&#x000A;		&#x000A;		<span class="nx">response</span><span class="p">.</span><span class="nx">html</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">stripScripts</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">script</span><span class="p">){</span>&#x000A;			<span class="nx">response</span><span class="p">.</span><span class="nx">javascript</span> <span class="o">=</span> <span class="nx">script</span><span class="p">;</span>&#x000A;		<span class="p">});</span>&#x000A;		&#x000A;		<span class="kd">var</span> <span class="nx">temp</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">processHTML</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">html</span><span class="p">);</span>&#x000A;		&#x000A;		<span class="nx">response</span><span class="p">.</span><span class="nx">tree</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">;</span>&#x000A;		<span class="nx">response</span><span class="p">.</span><span class="nx">elements</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">.</span><span class="nx">getElements</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">);</span>&#x000A;		&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">filter</span><span class="p">)</span> <span class="nx">response</span><span class="p">.</span><span class="nx">tree</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">elements</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">filter</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">update</span><span class="p">)</span> <span class="nx">$</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">update</span><span class="p">).</span><span class="nx">empty</span><span class="p">().</span><span class="nx">adopt</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">tree</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">evalScripts</span><span class="p">)</span> <span class="nx">$exec</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">javascript</span><span class="p">);</span>&#x000A;		&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">onSuccess</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">tree</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">elements</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">html</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">javascript</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">Properties</span><span class="p">.</span><span class="nx">load</span> <span class="o">=</span> <span class="p">{</span>&#x000A;	&#x000A;	<span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">load</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">);</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">load</span><span class="p">)</span> <span class="nx">send</span><span class="p">.</span><span class="nx">cancel</span><span class="p">();</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eliminate</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">).</span><span class="nx">store</span><span class="p">(</span><span class="s1">&#39;load:options&#39;</span><span class="p">,</span> <span class="nx">$extend</span><span class="p">({</span><span class="nx">data</span><span class="o">:</span> <span class="k">this</span><span class="p">,</span> <span class="nx">link</span><span class="o">:</span> <span class="s1">&#39;cancel&#39;</span><span class="p">,</span> <span class="nx">update</span><span class="o">:</span> <span class="k">this</span><span class="p">,</span> <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;get&#39;</span><span class="p">},</span> <span class="nx">options</span><span class="p">));</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="nx">options</span> <span class="o">||</span> <span class="o">!</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">)){</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">options</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;load:options&#39;</span><span class="p">))</span> <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">store</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Request</span><span class="p">.</span><span class="nx">HTML</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;load:options&#39;</span><span class="p">)));</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">retrieve</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">};</span>&#x000A;&#x000A;<span class="nx">Element</span><span class="p">.</span><span class="nx">implement</span><span class="p">({</span>&#x000A;	&#x000A;	<span class="nx">load</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">).</span><span class="nx">send</span><span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">link</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="p">{</span><span class="nx">data</span><span class="o">:</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="nx">url</span><span class="o">:</span> <span class="nb">String</span><span class="p">.</span><span class="nx">type</span><span class="p">}));</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>Script: Request.JSON.js
      Extends the basic Request Class with additional methods for sending and receiving JSON data.</p>
      
      <p>License:
      MIT-style license.</p>
    </section>
    <figure>
      <ol>
        <li>3798</li>
        <li>3799</li>
        <li>3800</li>
        <li>3801</li>
        <li>3802</li>
        <li>3803</li>
        <li>3804</li>
        <li>3805</li>
        <li>3806</li>
        <li>3807</li>
        <li>3808</li>
        <li>3809</li>
        <li>3810</li>
        <li>3811</li>
        <li>3812</li>
        <li>3813</li>
        <li>3814</li>
        <li>3815</li>
        <li>3816</li>
        <li>3817</li>
        <li>3818</li>
        <li>3819</li>
        <li>3820</li>
        <li>3821</li>
        <li>3822</li>
        <li>3823</li>
        <li>3824</li>
        <li>3825</li>
        <li>3826</li>
        <li>3827</li>
        <li>3828</li>
        <li>3829</li>
        <li>3830</li>
        <li>3831</li>
        <li>3832</li>
        <li>3833</li>
      </ol>
      <code><div class="highlight"><pre><span class="nx">Request</span><span class="p">.</span><span class="nx">JSON</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">Extends</span><span class="o">:</span> <span class="nx">Request</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">options</span><span class="o">:</span> <span class="p">{</span>&#x000A;		<span class="nx">secure</span><span class="o">:</span> <span class="kc">true</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="s1">&#39;Accept&#39;</span><span class="o">:</span> <span class="s1">&#39;application/json&#39;</span><span class="p">,</span> <span class="s1">&#39;X-Request&#39;</span><span class="o">:</span> <span class="s1">&#39;JSON&#39;</span><span class="p">});</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">decode</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">secure</span><span class="p">);</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">onSuccess</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">,</span> <span class="nx">text</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;&#x000A;&#x000A;&#x000A;<span class="nx">Fx</span><span class="p">.</span><span class="nx">Scroll</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">Extends</span><span class="o">:</span> <span class="nx">Fx</span><span class="p">,</span>&#x000A;&#x000A;	<span class="nx">options</span><span class="o">:</span> <span class="p">{</span>&#x000A;		<span class="nx">offset</span><span class="o">:</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="o">:</span> <span class="mi">0</span><span class="p">},</span>&#x000A;		<span class="nx">wheelStops</span><span class="o">:</span> <span class="kc">true</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">options</span><span class="p">){</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">element</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pass</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>&#x000A;		<span class="kd">var</span> <span class="nx">cancel</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cancel</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>&#x000A;</pre></div></code>
    </figure>
    <section><p>if ($type(this.element) != &lsquo;element&rsquo;) this.element = $(this.element.getDocument().body);</p></section>
    <figure>
      <ol>
        <li>3837</li>
        <li>3838</li>
        <li>3839</li>
        <li>3840</li>
        <li>3841</li>
        <li>3842</li>
        <li>3843</li>
        <li>3844</li>
        <li>3845</li>
        <li>3846</li>
        <li>3847</li>
        <li>3848</li>
        <li>3849</li>
        <li>3850</li>
        <li>3851</li>
        <li>3852</li>
        <li>3853</li>
        <li>3854</li>
        <li>3855</li>
        <li>3856</li>
        <li>3857</li>
        <li>3858</li>
        <li>3859</li>
        <li>3860</li>
        <li>3861</li>
        <li>3862</li>
        <li>3863</li>
        <li>3864</li>
        <li>3865</li>
      </ol>
      <code><div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">stopper</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">;</span>&#x000A;&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">wheelStops</span><span class="p">){</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">(</span><span class="s1">&#39;onStart&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;				<span class="nx">stopper</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">(</span><span class="s1">&#39;mousewheel&#39;</span><span class="p">,</span> <span class="nx">cancel</span><span class="p">);</span>&#x000A;			<span class="p">},</span> <span class="kc">true</span><span class="p">);</span>&#x000A;			<span class="k">this</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">(</span><span class="s1">&#39;onComplete&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;				<span class="nx">stopper</span><span class="p">.</span><span class="nx">removeEvent</span><span class="p">(</span><span class="s1">&#39;mousewheel&#39;</span><span class="p">,</span> <span class="nx">cancel</span><span class="p">);</span>&#x000A;			<span class="p">},</span> <span class="kc">true</span><span class="p">);</span>&#x000A;		<span class="p">}</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="kd">var</span> <span class="nx">now</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">flatten</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>&#x000A;		<span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="nx">now</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">now</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">compute</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">delta</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">now</span> <span class="o">=</span> <span class="p">[];</span>&#x000A;		<span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="nx">times</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">){</span>&#x000A;			<span class="nx">now</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">Fx</span><span class="p">.</span><span class="nx">compute</span><span class="p">(</span><span class="nx">from</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">to</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">delta</span><span class="p">));</span>&#x000A;		<span class="p">});</span>&#x000A;		<span class="k">return</span> <span class="nx">now</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">start</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">))</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>&#x000A;		<span class="kd">var</span> <span class="nx">offsetSize</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">getSize</span><span class="p">(),</span> <span class="nx">scrollSize</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">getScrollSize</span><span class="p">(),</span> <span class="nx">scroll</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">getScroll</span><span class="p">(),</span> <span class="nx">values</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="o">:</span> <span class="nx">x</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="o">:</span> <span class="nx">y</span><span class="p">};</span>&#x000A;		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">z</span> <span class="k">in</span> <span class="nx">values</span><span class="p">){</span>&#x000A;</pre></div></code>
    </figure>
    <section>
      <p>var max = scrollSize[z] &ndash; offsetSize[z];
      if ($chk(values[z])) values[z] = ($type(values[z]) == &lsquo;number&rsquo;) ? values[z].limit(0, max) : max;
      else values[z] = scroll[z];</p>
    </section>
    <figure>
      <ol>
        <li>3869</li>
        <li>3870</li>
        <li>3871</li>
        <li>3872</li>
        <li>3873</li>
        <li>3874</li>
        <li>3875</li>
        <li>3876</li>
        <li>3877</li>
        <li>3878</li>
        <li>3879</li>
        <li>3880</li>
        <li>3881</li>
        <li>3882</li>
        <li>3883</li>
        <li>3884</li>
        <li>3885</li>
        <li>3886</li>
        <li>3887</li>
        <li>3888</li>
        <li>3889</li>
        <li>3890</li>
        <li>3891</li>
        <li>3892</li>
        <li>3893</li>
        <li>3894</li>
        <li>3895</li>
        <li>3896</li>
        <li>3897</li>
        <li>3898</li>
        <li>3899</li>
        <li>3900</li>
        <li>3901</li>
        <li>3902</li>
        <li>3903</li>
        <li>3904</li>
        <li>3905</li>
        <li>3906</li>
        <li>3907</li>
        <li>3908</li>
        <li>3909</li>
        <li>3910</li>
        <li>3911</li>
        <li>3912</li>
        <li>3913</li>
        <li>3914</li>
        <li>3915</li>
        <li>3916</li>
        <li>3917</li>
        <li>3918</li>
        <li>3919</li>
        <li>3920</li>
        <li>3921</li>
        <li>3922</li>
        <li>3923</li>
        <li>3924</li>
        <li>3925</li>
        <li>3926</li>
        <li>3927</li>
        <li>3928</li>
        <li>3929</li>
        <li>3930</li>
        <li>3931</li>
        <li>3932</li>
        <li>3933</li>
        <li>3934</li>
        <li>3935</li>
        <li>3936</li>
        <li>3937</li>
        <li>3938</li>
        <li>3939</li>
        <li>3940</li>
      </ol>
      <code><div class="highlight"><pre>			<span class="nx">values</span><span class="p">[</span><span class="nx">z</span><span class="p">]</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">offset</span><span class="p">[</span><span class="nx">z</span><span class="p">];</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">([</span><span class="nx">scroll</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">scroll</span><span class="p">.</span><span class="nx">y</span><span class="p">],</span> <span class="p">[</span><span class="nx">values</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">values</span><span class="p">.</span><span class="nx">y</span><span class="p">]);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">toTop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">toLeft</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">toRight</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">toBottom</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">toElement</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">position</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">el</span><span class="p">).</span><span class="nx">getPosition</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;&#x000A;&#x000A;&#x000A;<span class="nx">Swiff</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>&#x000A;&#x000A;	<span class="nx">Events</span><span class="o">:</span> <span class="p">{},</span>&#x000A;&#x000A;	<span class="nx">remote</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>&#x000A;		<span class="kd">var</span> <span class="nx">rs</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">CallFunction</span><span class="p">(</span><span class="s1">&#39;&lt;invoke name=&quot;&#39;</span> <span class="o">+</span> <span class="nx">fn</span> <span class="o">+</span> <span class="s1">&#39;&quot; returntype=&quot;javascript&quot;&gt;&#39;</span> <span class="o">+</span> <span class="nx">__flash__argumentsToXML</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;/invoke&gt;&#39;</span><span class="p">);</span>&#x000A;		<span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="nx">rs</span><span class="p">);</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">getVersion</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$defined</span><span class="p">(</span><span class="nx">Swiff</span><span class="p">.</span><span class="nx">pluginVersion</span><span class="p">)){</span>&#x000A;			<span class="kd">var</span> <span class="nx">version</span><span class="p">;</span>&#x000A;			<span class="k">if</span> <span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">plugins</span> <span class="o">&amp;&amp;</span> <span class="nx">navigator</span><span class="p">.</span><span class="nx">mimeTypes</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span>&#x000A;				<span class="nx">version</span> <span class="o">=</span> <span class="nx">navigator</span><span class="p">.</span><span class="nx">plugins</span><span class="p">[</span><span class="s2">&quot;Shockwave Flash&quot;</span><span class="p">];</span>&#x000A;				<span class="k">if</span> <span class="p">(</span><span class="nx">version</span> <span class="o">&amp;&amp;</span> <span class="nx">version</span><span class="p">.</span><span class="nx">description</span><span class="p">)</span> <span class="nx">version</span> <span class="o">=</span> <span class="nx">version</span><span class="p">.</span><span class="nx">description</span><span class="p">;</span>&#x000A;			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span><span class="p">){</span>&#x000A;				<span class="nx">version</span> <span class="o">=</span> <span class="nx">$try</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>&#x000A;					<span class="k">return</span> <span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span><span class="s2">&quot;ShockwaveFlash.ShockwaveFlash&quot;</span><span class="p">).</span><span class="nx">GetVariable</span><span class="p">(</span><span class="s2">&quot;$version&quot;</span><span class="p">);</span>&#x000A;				<span class="p">});</span>&#x000A;			<span class="p">}</span>&#x000A;			<span class="nx">Swiff</span><span class="p">.</span><span class="nx">pluginVersion</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">version</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">version</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\d+/</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>&#x000A;		<span class="p">}</span>&#x000A;		<span class="k">return</span> <span class="nx">Swiff</span><span class="p">.</span><span class="nx">pluginVersion</span><span class="p">;</span>&#x000A;	<span class="p">},</span>&#x000A;&#x000A;	<span class="nx">fix</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;		<span class="nx">Swiff</span><span class="p">.</span><span class="nx">fixed</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>&#x000A;		<span class="nb">window</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">(</span><span class="s1">&#39;beforeunload&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;			<span class="nx">__flash_unloadHandler</span> <span class="o">=</span> <span class="nx">__flash_savedUnloadHandler</span> <span class="o">=</span> <span class="nx">$empty</span><span class="p">;</span>&#x000A;		<span class="p">});</span>&#x000A;		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">Browser</span><span class="p">.</span><span class="nx">Engine</span><span class="p">.</span><span class="nx">trident</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>&#x000A;		<span class="nb">window</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">(</span><span class="s1">&#39;unload&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>&#x000A;			<span class="nb">Array</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;object&#39;</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">){</span>&#x000A;				<span class="nx">obj</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span>&#x000A;				<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">){</span>&#x000A;					<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span> <span class="o">=</span> <span class="nx">$empty</span><span class="p">;</span>&#x000A;				<span class="p">}</span>&#x000A;			<span class="p">});</span>&#x000A;		<span class="p">});</span>&#x000A;	<span class="p">}</span>&#x000A;&#x000A;<span class="p">});</span>&#x000A;</pre></div></code>
    </figure>
  </body>
</html>
