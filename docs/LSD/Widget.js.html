<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Documentaiton for Widget.js</title>
    <link href='stylesheet.css' rel='stylesheet' />
  </head>
  <body>
    <figure id='relations'>
      <h2>Requires</h2>
      <ul>
        <li>LSD.Node</li>
        <li>LSD.Type</li>
        <li>LSD.Module.Layout</li>
        <li>LSD.Module.Styles</li>
        <li>LSD.Module.Attributes</li>
        <li>LSD.Module.Events</li>
        <li>LSD.Module.DOM</li>
        <li>LSD.Module.Expectations</li>
        <li>LSD.Module.Container</li>
        <li>LSD.Module.Actions</li>
        <li>LSD.Module.Command</li>
        <li>LSD.Module.Render</li>
        <li>LSD.Module.Target</li>
        <li>LSD.Trait.Shape</li>
        <li>LSD.Trait.Dimensions</li>
        <li>LSD.Trait.Layers</li>
      </ul>
      <h2>Provides</h2>
      <ul>
        <li>LSD.Widget</li>
        <li>LSD.Widget.create</li>
      </ul>
    </figure>
    <header>
      <h1>Widget.js</h1>
      <p>Base widget with all modules included</p>
      <dl>
        <dt>License:</dt>
        <dd>Public domain (http://unlicense.org).</dd>
        <dt>Authors:</dt>
        <dd>Yaroslaff Fedin</dd>
      </dl>
    </header>
    <section>
      <p>LSD.Widget autoloads all of the modules that are defined in Old.Module namespace
      unless LSD.modules array is provided.</p>
      
      <p>So if a new module needs to be included into the base class, then it only needs
      to be <em>require</em>d.</p>
    </section>
    <figure>
      <ol>
        <li>46</li>
        <li>47</li>
        <li>48</li>
        <li>49</li>
      </ol>
      <code><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">LSD</span><span class="p">.</span><span class="nx">modules</span><span class="p">)</span> <span class="p">{</span>&#x000A;  <span class="nx">LSD</span><span class="p">.</span><span class="nx">modules</span> <span class="o">=</span> <span class="p">[]</span>&#x000A;  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">LSD</span><span class="p">.</span><span class="nx">Module</span><span class="p">)</span> <span class="nx">LSD</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">LSD</span><span class="p">.</span><span class="nx">Module</span><span class="p">[</span><span class="nx">name</span><span class="p">]);</span>&#x000A;<span class="p">}</span></code>
    </figure>
    <section>
      <p>Pre-generate CSS grammar for layers.</p>
      
      <p>It is not required for rendering process itself, because
      this action is taken automatically when the first
      widget gets rendered. Declaring layer css styles upfront
      lets us use it in other parts of the framework
      (e.g. in stylesheets to validate styles)</p>
    </section>
    <figure>
      <ol>
        <li>61</li>
        <li>62</li>
        <li>63</li>
        <li>64</li>
        <li>65</li>
        <li>66</li>
        <li>67</li>
        <li>68</li>
        <li>69</li>
        <li>70</li>
        <li>71</li>
        <li>72</li>
        <li>73</li>
        <li>74</li>
        <li>75</li>
        <li>76</li>
        <li>77</li>
        <li>78</li>
        <li>79</li>
        <li>80</li>
        <li>81</li>
        <li>82</li>
      </ol>
      <code><span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">layer</span> <span class="k">in</span> <span class="nx">LSD</span><span class="p">.</span><span class="nx">Layers</span><span class="p">)</span> <span class="nx">LSD</span><span class="p">.</span><span class="nx">Layer</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">layer</span><span class="p">,</span> <span class="nx">LSD</span><span class="p">.</span><span class="nx">Layers</span><span class="p">[</span><span class="nx">layer</span><span class="p">]);</span>&#x000A;&#x000A;<span class="nx">LSD</span><span class="p">.</span><span class="nx">Widget</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Class</span><span class="p">({</span>&#x000A;  &#x000A;  <span class="nx">Includes</span><span class="o">:</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">LSD</span><span class="p">.</span><span class="nx">Node</span><span class="p">,</span> <span class="nx">LSD</span><span class="p">.</span><span class="nx">Base</span><span class="p">,</span> <span class="nx">LSD</span><span class="p">.</span><span class="nx">modules</span><span class="p">,</span> <span class="p">[</span>&#x000A;    <span class="nx">LSD</span><span class="p">.</span><span class="nx">Trait</span><span class="p">.</span><span class="nx">Shape</span><span class="p">,</span>&#x000A;    <span class="nx">LSD</span><span class="p">.</span><span class="nx">Trait</span><span class="p">.</span><span class="nx">Dimensions</span><span class="p">,</span>&#x000A;    <span class="nx">LSD</span><span class="p">.</span><span class="nx">Trait</span><span class="p">.</span><span class="nx">Layers</span>&#x000A;  <span class="p">]),</span>&#x000A;  &#x000A;  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>&#x000A;    <span class="nx">writable</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>&#x000A;    <span class="nx">layers</span><span class="o">:</span> <span class="kc">true</span>&#x000A;  <span class="p">},</span>&#x000A;  &#x000A;  <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>&#x000A;    <span class="k">this</span><span class="p">.</span><span class="nx">dirty</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>&#x000A;    <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">options</span><span class="p">);</span>&#x000A;    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">writable</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">tabindex</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">focusable</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">))</span> <span class="k">this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;tabindex&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>&#x000A;    <span class="k">this</span><span class="p">.</span><span class="nx">addPseudo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">writable</span> <span class="o">?</span> <span class="s1">&#39;read-write&#39;</span> <span class="o">:</span> <span class="s1">&#39;read-only&#39;</span><span class="p">);</span>&#x000A;    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">layers</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">layers</span> <span class="o">=</span> <span class="nx">LSD</span><span class="p">.</span><span class="nx">Layers</span><span class="p">;</span>&#x000A;  <span class="p">},</span></code>
    </figure>
    <section>
      <p>Wrapper is where content nodes get appended.
      Defaults to this.element, but can be redefined
      in other Modules or Traits (as seen in Container
      module)</p>
    </section>
    <figure>
      <ol>
        <li>91</li>
        <li>92</li>
        <li>93</li>
        <li>94</li>
        <li>95</li>
        <li>96</li>
        <li>97</li>
        <li>98</li>
      </ol>
      <code><span class="nx">getWrapper</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>&#x000A;    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">toElement</span><span class="p">();</span>&#x000A;  <span class="p">}</span>&#x000A;<span class="p">});</span>&#x000A;&#x000A;<span class="nx">LSD</span><span class="p">.</span><span class="nx">Widget</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addStates</span><span class="p">(</span><span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="s1">&#39;hidden&#39;</span><span class="p">,</span> <span class="s1">&#39;built&#39;</span><span class="p">,</span> <span class="s1">&#39;attached&#39;</span><span class="p">,</span> <span class="s1">&#39;dirty&#39;</span><span class="p">);</span>&#x000A;&#x000A;<span class="k">new</span> <span class="nx">LSD</span><span class="p">.</span><span class="nx">Type</span><span class="p">(</span><span class="s1">&#39;Widget&#39;</span><span class="p">);</span></code>
    </figure>
  </body>
</html>
